[{"content":"å·¥ä½œğŸ’» ä½œä¸ºJavaåç«¯å¼€å‘ï¼Œå¼€å‘ä»“å‚¨åº“å­˜ç®¡ç†ç³»ç»Ÿã€‚\nçœ‹ä¹¦ğŸ“š æ­£åœ¨çœ‹ ã€Šåˆ›é€ ï¼šç”¨éä¼ ç»Ÿæ–¹å¼åšæœ‰ä»·å€¼çš„äº‹ã€‹\nWhat else? è¿˜æ²¡æƒ³åˆ°\u0026hellip;\n","description":"","id":2,"section":"","tags":null,"title":"æˆ‘ç°åœ¨åœ¨åšä»€ä¹ˆï¼Ÿ","uri":"https://hugo.jiahongw.com/zh/now/"},{"content":" Freenom æ˜¯ç›®å‰ä¸ºæ•°ä¸å¤šçš„å…è´¹åŸŸåæä¾›å•†ï¼Œæä¾› .ga, .ml, .gq, .tk, .cf äº”ä¸ªå…è´¹é¡¶çº§åŸŸã€‚å½“ç„¶ä¹Ÿæœ‰ä¸€äº›ä»˜è´¹çš„åŸŸåï¼Œå¯¹äºæ™®é€šäººæ¥è¯´ï¼Œå…è´¹åŸŸåå°±å¤Ÿäº†ã€‚ğŸ˜\nå¦å¤–ï¼Œæœ¬æ–‡åé¢è¿˜æä¾›äº†ä¸€ç§è‡ªåŠ¨ç»­ç§Ÿ Freenom å…è´¹åŸŸåçš„æ–¹æ³•ã€‚\n1 æ‰¾åŸŸå Freenom åœ°å€ï¼šfreenom.com\næ‰“å¼€Freenomï¼Œç™»é™†åç›´æ¥åœ¨æœç´¢æ æœç´¢è‡ªå·±æƒ³è¦çš„åŸŸååå­—ï¼Œç„¶åç³»ç»Ÿä¼šè¿”å›å¯ä»¥ä½¿ç”¨çš„å…è´¹åŸŸåï¼Œé€‰æ‹©ä¸€ä¸ªç»“ç®—å³å¯\n2 é…ç½®è§£ææœåŠ¡ è¿™ä¸€æ­¥æ˜¯å¯é€‰çš„ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨ Freenom è‡ªå·±çš„ DNS è§£ææœåŠ¡ï¼Œæˆ–è€…ä¸ä½¿ç”¨ cloudflareï¼Œç”¨å…¶ä»–çš„ DNS è§£ææœåŠ¡ä¹Ÿå¯ä»¥ã€‚\nä½¿ç”¨cloudflareè§£ææœåŠ¡ Cloudflare ç½‘å€ï¼šcloudflare.com\næ‰“å¼€cloudflareï¼Œé¦–å…ˆéœ€è¦æ³¨å†Œä¸€ä¸ªè´¦å·ã€‚ç„¶åä»–ä¼šè¦æ±‚è¾“å…¥éœ€è¦è§£æçš„åŸŸå\nå¡«å†™ç›¸åº”çš„ DNS ä¿¡æ¯ï¼Œå¹¶ä¸”å°†ä¸‹é¢çš„ NS ä¿¡æ¯å¡«å†™åˆ° freenom çš„custom nameservers\nç­‰å¾…ä¸ªå‡ åˆ†é’Ÿå°±å¥½äº†ã€‚Over ğŸ¤\n3 è‡ªåŠ¨ç»­ç§Ÿ å‚è€ƒï¼š\nluolongfei/freenom: Freenom åŸŸåè‡ªåŠ¨ç»­æœŸã€‚Freenom domain name renews automatically. å¸¸è§é—®é¢˜ï¼š\nfreenom åŸŸåæ³¨å†Œå¤±è´¥çš„è§£å†³åŠæ³•_æœªåç¼–ç¨‹çš„åšå®¢-CSDN åšå®¢_some of your domains could not be registered becau å‚è€ƒè¿™ä¸ªgithub ä»“åº“è¿›è¡Œä¸‹é¢çš„æ“ä½œï¼š\né€šè¿‡ Koyeb éƒ¨ç½²ï¼šé€šè¿‡ Koyeb éƒ¨ç½² Â· luolongfei/freenom Wiki\næ³¨å†Œ Koyeb è´¦æˆ·\nåœ¨æ–°æ ‡ç­¾é¡µæ‰“å¼€é“¾æ¥ https://app.koyeb.com/auth/signup ï¼Œå®Œæˆæ³¨å†Œï¼Œå¹¶ç™»å½•\nä¸€é”®éƒ¨ç½²\nå³å‡»åœ¨æ–°æ ‡ç­¾é¡µæ‰“å¼€é“¾æ¥ ï¼Œæ¥åˆ°éƒ¨ç½²ç”»é¢ï¼š\nä¸»è¦å¡«å†™ token å’Œ freenom çš„è´¦å·å’Œå¯†ç ï¼Œtoken æ˜¯ç™»é™†åå°çš„å¯†ç ï¼Œéœ€è¦è‡ªå·±ä¿å­˜ã€‚\nç„¶åç‚¹å‡» deploy æˆ–è€… create serviceã€‚\nç‚¹å‡»åº”ç”¨åœ°å€ï¼Œè·³åˆ°å·¥å…·ç®¡ç†ç”»é¢ï¼š\nè¾“å…¥ token å€¼è¿›è¡ŒéªŒè¯ï¼ˆç‚¹å‡»é€ä¿¡ï¼‰ï¼š\nè¿”å›ç±»ä¼¼ä¸‹é¢çš„ç»“æœï¼š\né»˜è®¤ä¼šå‘¨æœŸè¿›è¡Œå®šæ—¶è°ƒç”¨ï¼Œä¸éœ€è¦æ‰‹åŠ¨è§¦å‘ï¼Œä¸Šé¢åªæ˜¯ä¸ºäº†å±•ç¤ºè¿›è¡Œè§¦å‘çš„ã€‚\nReferenceï¼š\nThe fastest way to deploy applications globally - Koyeb ","description":"","id":3,"section":"posts","tags":["åŸŸå","freenom"],"title":"Freenom å…è´¹åŸŸåç”³è¯· \u0026 è‡ªåŠ¨åŸŸåç»­è´¹","uri":"https://hugo.jiahongw.com/zh/posts/hugo/freenom-domain/"},{"content":" åˆ›å»ºçº¿ç¨‹æ± çš„æ–¹æ³•ï¼š\n1 2 3 4 ExecutorService executorService = Executors.newCachedThreadPool(); ExecutorService executorService = Executors.newFixedThreadPool(3); ScheduledExecutorService executorService = Executors.newScheduledThreadPool(3); ExecutorService executorService = Executors.newSingleThreadExecutor(); https://www.cnblogs.com/pcheng/p/13540619.html\nå¤šçº¿ç¨‹çš„é—®é¢˜ çº¿ç¨‹ä»»åŠ¡æ˜¯å®ç°äº†Runnableæ¥å£ï¼Œæˆ–è€…ç›´æ¥å†™ä¸ªç±»ç»§æ‰¿Thread,ä½†æ˜¯è¿™ä¸¤ç§æ–¹æ³•åªèƒ½é€šè¿‡å…±äº«å¯¹è±¡æˆ–è€…æ–‡ä»¶æ¥å¾—åˆ°è¿”å›çš„ç»“æœï¼Œæ— æ³•ç›´æ¥è¿”å›ã€‚å¹¶ä¸”Runnableæ¥å£ä¸­çš„runæ–¹æ³•æ— æ³•æŠ›å‡ºå¼‚å¸¸ã€‚\nå›è°ƒåœ°ç‹±ï¼ˆCallback hellï¼‰é—®é¢˜\nJava 5 æä¾›äº†æ‰§è¡Œå™¨æ¡†æ¶ï¼Œå…¶æ€æƒ³ç±»ä¼¼äºä¸€ä¸ªé«˜å±‚çš„çº¿ç¨‹æ± ï¼Œå¯ä»¥å……åˆ†å‘ô´çº¿ç¨‹çš„èƒ½åŠ›ã€‚æ‰§è¡Œå™¨ä½¿å¾—ç¨‹åºå‘˜æœ‰æœºä¼šè§£ô³½ä»»åŠ¡çš„æäº¤ä¸ä»»åŠ¡çš„æ‰§è¡Œã€‚\næ— è®ºä»€ä¹ˆæ—¶å€™ï¼Œä»»ä½•ä»»åŠ¡(æˆ–è€…çº¿ç¨‹)åœ¨æ–¹æ³• è°ƒç”¨ä¸­å¯åŠ¨æ—¶ï¼Œéƒ½ä¼šåœ¨å…¶è¿”å›ä¹‹å‰è°ƒç”¨åŒä¸€ä¸ªæ–¹æ³•ã€‚æ¢å¥è¯è¯´ï¼Œçº¿ç¨‹åˆ›å»ºä»¥åŠä¸å…¶åŒ¹é…çš„ join() åœ¨è°ƒç”¨è¿”å›çš„åµŒå¥—æ–¹æ³•è°ƒç”¨ä¸­éƒ½ä»¥åµŒå¥—çš„æ–¹å¼æˆå¯¹å‡ºç°ã€‚è¿™ç§æ€æƒ³è¢«ç§°ä¸ºô¶–ô¶— fork/joinã€‚\nJavaä¸­çš„Futureä»£è¡¨äº†ä»€ä¹ˆï¼Ÿ\nFutureæ˜¯Javaçš„æ¥å£ï¼Œç±»ä¼¼äºå®¹å™¨ä¿å­˜äº†Callableçš„è¿”å›ç»“æœã€‚æˆ‘ä»¬æŠŠå­ä»»åŠ¡æ”¾å…¥çº¿ç¨‹æ± ä¹‹åï¼Œç›´æ¥è¿”å›ï¼Œè¿›è¡Œå…¶ä»–å¤„ç†ï¼Œç„¶åå†è°ƒç”¨Futureçš„getæ–¹æ³•æ¥è·å–ç»“æœï¼ŒFutureè¿˜å¯ä»¥æ§åˆ¶å­ä»»åŠ¡çš„æ‰§è¡Œã€‚\nFuture æˆ‘ä»¬ä½¿ç”¨Runnableå¯¹è±¡æ¥å®šä¹‰åœ¨çº¿ç¨‹å†…æ‰§è¡Œçš„ä»»åŠ¡ã€‚è™½ç„¶å®šä¹‰ä»»åŠ¡ä½¿ç”¨Runnableå¾ˆæ–¹ä¾¿ï¼Œä½†å—é™äºä»»åŠ¡ä¸èƒ½è¿”å›ç»“æœã€‚\nJava æä¾›äº†ä¸€ä¸ªCallableæ¥å£æ¥å®šä¹‰è¿”å›ç»“æœçš„ä»»åŠ¡ã€‚Callableç±»ä¼¼äºRunnableå¹¶ä¸”å®ƒå¯ä»¥è¿”å›ç»“æœå¹¶æŠ›å‡ºå¼‚å¸¸ã€‚\nCallable æ¥å£æœ‰ä¸€ä¸ªç®€å•çš„æ–¹æ³•call() ç”¨äºåŒ…å«ç”±çº¿ç¨‹æ‰§è¡Œçš„ä»£ç ã€‚ç®€å•çš„ä¾‹å­ï¼š\n1 2 3 4 5 6 7 8 Callable\u0026lt;String\u0026gt; callable = new Callable\u0026lt;String\u0026gt;() { @Override public String call() throws Exception { // Perform some computation Thread.sleep(2000); return \u0026#34;Return some result\u0026#34;; } }; è¯·æ³¨æ„ï¼Œä½¿ç”¨Callableï¼Œæ‚¨ä¸éœ€è¦Thread.sleep()è¢« try/catch å—åŒ…å›´ï¼Œå› ä¸ºä¸ Runnable ä¸åŒï¼ŒCallable å¯ä»¥æŠ›å‡ºcheckedå¼‚å¸¸ã€‚\næ›´æ–¹ä¾¿çš„å®šä¹‰ä¸€ä¸ªCallableï¼Œä½¿ç”¨Lambdaè¡¨è¾¾å¼ï¼š\n1 2 3 4 5 Callable\u0026lt;String\u0026gt; callable = () -\u0026gt; { // Perform some computation Thread.sleep(2000); return \u0026#34;Return some result\u0026#34;; }; Callableçš„å®šä¹‰å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 @FunctionalInterface public interface Callable\u0026lt;V\u0026gt; { /** * Computes a result, or throws an exception if unable to do so. * * @return computed result * @throws Exception if unable to compute a result */ V call() throws Exception; } å¯ä»¥å‘ç°å®ƒæ˜¯å¯ä»¥å¸¦è¿”å›å€¼çš„ï¼Œå¹¶ä¸”èƒ½å¤ŸæŠ›å‡ºå¼‚å¸¸ã€‚\nRunnableæ¥å£ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 @FunctionalInterface public interface Runnable { /** * When an object implementing interface \u0026lt;code\u0026gt;Runnable\u0026lt;/code\u0026gt; is used * to create a thread, starting the thread causes the object\u0026#39;s * \u0026lt;code\u0026gt;run\u0026lt;/code\u0026gt; method to be called in that separately executing * thread. * \u0026lt;p\u0026gt; * The general contract of the method \u0026lt;code\u0026gt;run\u0026lt;/code\u0026gt; is that it may * take any action whatsoever. * * @see java.lang.Thread#run() */ public abstract void run(); } Runnableæ¥å£æ˜¯æ²¡æœ‰è¿”å›å€¼ï¼Œä¹Ÿä¸èƒ½æŠ›å‡ºå¼‚å¸¸çš„ã€‚å› ä¸ºrun()æ–¹æ³•æ˜¯Runnableæ¥å£é‡Œé¢çš„æ–¹æ³•,è€ŒRunnableæ¥å£åœ¨å®šä¹‰run()æ–¹æ³•çš„æ—¶å€™æ²¡æœ‰æŠ›å‡ºä»»ä½•å¼‚å¸¸,æ‰€ä»¥å­ç±»åœ¨é‡å†™run()æ–¹æ³•çš„æ—¶å€™è¦å°äºæˆ–ç­‰äºçˆ¶ç±»(Runnable)çš„run()æ–¹æ³•çš„å¼‚å¸¸,æ‰€ä»¥çˆ¶ç±»æ²¡æœ‰æŠ›å‡ºå¼‚å¸¸,å­ç±»ä¸èƒ½æŠ›å‡ºå¼‚å¸¸ã€‚\nThreadç±»ä¸­çš„runæ–¹æ³•å®šä¹‰å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 @Override public void run() { if (target != null) { target.run(); } } åŒç†ï¼Œç»§æ‰¿Threadçš„çº¿ç¨‹å­ç±»ä¹Ÿä¸èƒ½å¤ŸæŠ›å‡ºå¼‚å¸¸ï¼Œå› ä¸ºå¦‚æœçˆ¶ç±»æˆ–è€…æ¥å£çš„æ–¹æ³•ä¸­ï¼Œæ²¡æœ‰å¼‚å¸¸æŠ›å‡ºï¼Œé‚£ä¹ˆå­ç±»åœ¨è¦†ç›–æ–¹æ³•æ—¶ï¼Œä¹Ÿä¸å¯ä»¥æŠ›å‡ºå¼‚å¸¸ã€‚å‘ç”Ÿå¼‚å¸¸å¿…é¡»è¿›è¡Œtryå¤„ç†ã€‚\nä½¿ç”¨ï¼ˆCallableç»“åˆFutureï¼‰ åƒRunnableä¸€æ ·ï¼Œä½ å¯ä»¥submitä¸€ä¸ªCallableç»™executor serviceå»æ‰§è¡Œã€‚executor serviceçš„ submit() æ–¹æ³• ä¼šå°†ä»»åŠ¡æäº¤ç»™çº¿ç¨‹æ‰§è¡Œã€‚ä½†æ˜¯ï¼Œå®ƒä¸çŸ¥é“æäº¤çš„ä»»åŠ¡ä»€ä¹ˆæ—¶å€™ç»“æŸã€‚å› æ­¤ï¼Œå®ƒè¿”å›ä¸€ç§ç§°ä¸º Future çš„ç‰¹æ®Šç±»å‹çš„å€¼ï¼Œå¯ç”¨äºåœ¨å¯ç”¨æ—¶è·å–ä»»åŠ¡çš„ç»“æœã€‚\nFuture çš„æ¦‚å¿µç±»ä¼¼äº Javascript ç­‰å…¶ä»–è¯­è¨€ä¸­çš„ Promiseã€‚å®ƒè¡¨ç¤ºå°†åœ¨ä»¥åçš„æŸä¸ªæ—¶é—´ç‚¹å®Œæˆçš„è®¡ç®—ç»“æœã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 import java.util.concurrent.*; public class FutureAndCallableExample { public static void main(String[] args) throws InterruptedException, ExecutionException { ExecutorService executorService = Executors.newSingleThreadExecutor(); Callable\u0026lt;String\u0026gt; callable = () -\u0026gt; { // Perform some computation System.out.println(\u0026#34;Entered Callable\u0026#34;); Thread.sleep(2000); return \u0026#34;Hello from Callable\u0026#34;; }; System.out.println(\u0026#34;Submitting Callable\u0026#34;); Future\u0026lt;String\u0026gt; future = executorService.submit(callable); // This line executes immediately System.out.println(\u0026#34;Do something else while callable is getting executed\u0026#34;); System.out.println(\u0026#34;Retrieve the result of the future\u0026#34;); // Future.get() ä¼šé˜»å¡çŸ¥é“Futureä¸­å¾—åˆ°äº†è¿”å›çš„ç»“æœ String result = future.get(); System.out.println(result); executorService.shutdown(); } } æˆ–è€…å¯ä»¥ä½¿ç”¨è¿™ä¸ªä¾‹å­è¿›è¡Œæµ‹è¯•ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 mport java.util.concurrent.*; public class FutureIsDoneExample { public static void main(String[] args) throws InterruptedException, ExecutionException { ExecutorService executorService = Executors.newSingleThreadExecutor(); Future\u0026lt;String\u0026gt; future = executorService.submit(() -\u0026gt; { Thread.sleep(2000); return \u0026#34;Hello from Callable\u0026#34;; }); while(!future.isDone()) { System.out.println(\u0026#34;Task is still not done...\u0026#34;); Thread.sleep(200); } System.out.println(\u0026#34;Task completed! Retrieving the result\u0026#34;); String result = future.get(); System.out.println(result); executorService.shutdown(); } } è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š\n# Output Task is still not done... Task is still not done... Task is still not done... Task is still not done... Task is still not done... Task is still not done... Task is still not done... Task is still not done... Task is still not done... Task is still not done... Task completed! Retrieving the result Hello from Callable åœ¨æ²¡æœ‰å¾—åˆ°ç»“æœçš„æ—¶å€™ï¼ŒisDone()çš„è¿”å›å€¼éƒ½æ˜¯falseï¼Œè¿™å°†å¯¼è‡´é˜»å¡ã€‚\nå–æ¶ˆFuture ä½ å¯ä»¥ä½¿ç”¨Future.cancel()æ–¹æ³•å–æ¶ˆä¸€ä¸ªFutureã€‚å®ƒè¯•å›¾å–æ¶ˆä»»åŠ¡çš„æ‰§è¡Œï¼Œå¦‚æœæˆåŠŸå–æ¶ˆåˆ™è¿”å›trueï¼Œå¦åˆ™è¿”å›falseã€‚\næ‚¨å¯ä»¥ä½¿ç”¨isCancelled()æ–¹æ³•æ¥æ£€æŸ¥ä»»åŠ¡æ˜¯å¦è¢«å–æ¶ˆã€‚æ­¤å¤–ï¼Œå–æ¶ˆä»»åŠ¡åï¼ŒisDone() å°†å§‹ç»ˆä¸ºçœŸã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 import java.util.concurrent.*; public class FutureCancelExample { public static void main(String[] args) throws InterruptedException, ExecutionException { ExecutorService executorService = Executors.newSingleThreadExecutor(); long startTime = System.nanoTime(); Future\u0026lt;String\u0026gt; future = executorService.submit(() -\u0026gt; { Thread.sleep(2000); return \u0026#34;Hello from Callable\u0026#34;; }); while(!future.isDone()) { System.out.println(\u0026#34;Task is still not done...\u0026#34;); Thread.sleep(200); double elapsedTimeInSec = (System.nanoTime() - startTime)/1000000000.0; if(elapsedTimeInSec \u0026gt; 1) { future.cancel(true); } } System.out.println(\u0026#34;Task completed! Retrieving the result\u0026#34;); String result = future.get(); System.out.println(result); executorService.shutdown(); } } è·‘ä¸Šé¢çš„ä»£ç å°†ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œå› ä¸ºå·²ç»å–æ¶ˆäº†Futureï¼Œç„¶ååˆå®ç”¨get()æ–¹æ³•è·å–Futureçš„å€¼ã€‚\nTask is still not done... Task is still not done... Task is still not done... Task is still not done... Task is still not done... Task completed! Retrieving the result Exception in thread \u0026#34;main\u0026#34; java.util.concurrent.CancellationException at java.util.concurrent.FutureTask.report(FutureTask.java:121) at java.util.concurrent.FutureTask.get(FutureTask.java:192) at com.sankuai.stafftraining.wujiahong.demo.springdemo.concurrency.MainApp.test3(MainApp.java:79) at com.sankuai.stafftraining.wujiahong.demo.springdemo.concurrency.MainApp.main(MainApp.java:12) æœ€å¥½æ˜¯é€šè¿‡ä¸‹é¢è¿™ç§æ–¹æ³•è¿›è¡Œåˆ¤æ–­ï¼š\n1 2 3 4 5 6 7 if(!future.isCancelled()) { System.out.println(\u0026#34;Task completed! Retrieving the result\u0026#34;); String result = future.get(); System.out.println(result); } else { System.out.println(\u0026#34;Task was cancelled\u0026#34;); } invokeAllæ–¹æ³• æäº¤å¤šä¸ªä»»åŠ¡å¹¶ç­‰å¾…æ‰€æœ‰ä»»åŠ¡å®Œæˆã€‚\nä½ å¯ä»¥é€šè¿‡å‘invokeAll()æ–¹æ³•ä¼ é€’ä¸€ä¸ªCallablesçš„é›†åˆæ¥æ‰§è¡Œå¤šä¸ªä»»åŠ¡ã€‚invokeAll()è¿”å›ä¸€ä¸ªFuturesçš„åˆ—è¡¨ã€‚ä»»ä½•å¯¹future.get()çš„è°ƒç”¨éƒ½ä¼šè¢«é˜»æ­¢ï¼Œç›´åˆ°æ‰€æœ‰çš„Futureséƒ½å®Œæˆã€‚\nä¾‹å­ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 import java.util.Arrays; import java.util.List; import java.util.concurrent.*; public class InvokeAllExample { public static void main(String[] args) throws InterruptedException, ExecutionException { ExecutorService executorService = Executors.newFixedThreadPool(5); Callable\u0026lt;String\u0026gt; task1 = () -\u0026gt; { Thread.sleep(2000); return \u0026#34;Result of Task1\u0026#34;; }; Callable\u0026lt;String\u0026gt; task2 = () -\u0026gt; { Thread.sleep(1000); return \u0026#34;Result of Task2\u0026#34;; }; Callable\u0026lt;String\u0026gt; task3 = () -\u0026gt; { Thread.sleep(5000); return \u0026#34;Result of Task3\u0026#34;; }; List\u0026lt;Callable\u0026lt;String\u0026gt;\u0026gt; taskList = Arrays.asList(task1, task2, task3); List\u0026lt;Future\u0026lt;String\u0026gt;\u0026gt; futures = executorService.invokeAll(taskList); for(Future\u0026lt;String\u0026gt; future: futures) { // The result is printed only after all the futures are complete. (i.e. after 5 seconds) System.out.println(future.get()); } executorService.shutdown(); } } åœ¨ä¸Šé¢çš„ç¨‹åºä¸­ï¼Œç¬¬ä¸€æ¬¡è°ƒç”¨ future.get() è¯­å¥ä¼šé˜»å¡ï¼Œç›´åˆ°æ‰€æœ‰çš„æœŸè´§éƒ½å®Œæˆã€‚å³ç»“æœå°†åœ¨ 5 ç§’åæ‰“å°ã€‚\nè¾“å‡ºçš„ç»“æœä¸ºï¼š\nResult of Task1 Result of Task2 Result of Task3 invokeAnyæ–¹æ³• æäº¤å¤šä¸ªä»»åŠ¡å¹¶ç­‰å¾…å…¶ä¸­ä»»ä½•ä¸€ä¸ªå®Œæˆ.\ninvokeAny() æ–¹æ³•æ¥å—ä¸€ä¸ª Callables é›†åˆå¹¶è¿”å›æœ€å¿«çš„ Callable çš„ç»“æœã€‚è¯·æ³¨æ„ï¼Œå®ƒä¸ä¼šè¿”å› Futureã€‚\nä¾‹å­ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 import java.util.Arrays; import java.util.List; import java.util.concurrent.*; public class InvokeAnyExample { public static void main(String[] args) throws InterruptedException, ExecutionException { ExecutorService executorService = Executors.newFixedThreadPool(5); Callable\u0026lt;String\u0026gt; task1 = () -\u0026gt; { Thread.sleep(2000); return \u0026#34;Result of Task1\u0026#34;; }; Callable\u0026lt;String\u0026gt; task2 = () -\u0026gt; { Thread.sleep(1000); return \u0026#34;Result of Task2\u0026#34;; }; Callable\u0026lt;String\u0026gt; task3 = () -\u0026gt; { Thread.sleep(5000); return \u0026#34;Result of Task3\u0026#34;; }; // Returns the result of the fastest callable. (task2 in this case) String result = executorService.invokeAny(Arrays.asList(task1, task2, task3)); System.out.println(result); executorService.shutdown(); } } è¾“å‡ºå¦‚ä¸‹ï¼š\nResult of Task2 Future çš„å±€é™ ä¸èƒ½æ‰‹åŠ¨å®Œæˆã€‚ï¼ˆFutureè°ƒç”¨çš„ä»»åŠ¡å¤±è´¥äº†ä¸èƒ½æ‰‹åŠ¨è¿›è¡Œå®Œæˆï¼‰ Future çš„ç»“æœåœ¨éé˜»å¡çš„æƒ…å†µä¸‹ï¼Œä¸èƒ½æ‰§è¡Œæ›´è¿›ä¸€æ­¥çš„æ“ä½œã€‚ï¼ˆæ— æ³•ç»™ Future æ¤å…¥ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼‰ å¤šä¸ª Future ä¸èƒ½ä¸²è”åœ¨ä¸€èµ·ç»„æˆé“¾å¼è°ƒç”¨ã€‚ ä¸èƒ½ç»„åˆå¤šä¸ª Future çš„ç»“æœã€‚ æ²¡æœ‰å¼‚å¸¸å¤„ç†ã€‚ CompletableFutureç®€ä»‹ å¹¶å‘ä¸å¹¶è¡Œçš„åŒºåˆ«ï¼š\né¿å…é˜»å¡ï¼Œåº”ç”¨é€šè¿‡ ä¸å„ç§ç½‘ç»œæœåŠ¡é€šä¿¡ï¼Œæ›¿ç”¨æˆ·å®æ—¶æ•´åˆéœ€è¦çš„ä¿¡æ¯ï¼Œæˆ–è€…å°†æ•´åˆçš„ä¿¡æ¯ä½œä¸ºè¿›ä¸€æ­¥çš„ç½‘ç»œæœåŠ¡ æä¾›å‡ºå»ã€‚è¿™ç§å·¥ä½œæ–¹å¼è¢«ç§°ä¸ºååº”å¼ç¼–ç¨‹ã€‚\nCompletableFutureèƒ½å¤Ÿè§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿ CompletableFutureæ˜¯Java8å¼•å…¥çš„ï¼Œåœ¨Java8ä¹‹å‰ä¸€èˆ¬é€šè¿‡Futureå®ç°å¼‚æ­¥ã€‚(ä½†æ˜¯æ˜¯é˜»å¡çš„)\nFutureæ¨¡å¼å¯ä»¥ç†è§£æˆï¼šæˆ‘æœ‰ä¸€ä¸ªä»»åŠ¡ï¼Œæäº¤ç»™äº†Futureï¼ŒFutureæ›¿æˆ‘å®Œæˆè¿™ä¸ªä»»åŠ¡ã€‚æœŸé—´æˆ‘è‡ªå·±å¯ä»¥å»åšä»»ä½•æƒ³åšçš„äº‹æƒ…ã€‚ä¸€æ®µæ—¶é—´ä¹‹åï¼Œæˆ‘å°±ä¾¿å¯ä»¥ä»Futureé‚£å„¿å–å‡ºç»“æœã€‚\nCompletableFutureå…·å¤‡ä»€ä¹ˆåŠŸèƒ½ï¼Ÿ å¯ç»„åˆã€‚ï¼ˆæä¾›thenComposeã€thenCombineç­‰å„ç§thenå¼€å¤´çš„æ–¹æ³•ï¼‰ å¼‚æ­¥ã€‚ æ¯”è¾ƒ CompletableFutureæ˜¯Java8å¼•å…¥çš„ï¼Œåœ¨Java8ä¹‹å‰ä¸€èˆ¬é€šè¿‡Futureå®ç°å¼‚æ­¥ã€‚\nFutureç”¨äºè¡¨ç¤ºå¼‚æ­¥è®¡ç®—çš„ç»“æœï¼Œåªèƒ½é€šè¿‡é˜»å¡æˆ–è€…è½®è¯¢çš„æ–¹å¼è·å–ç»“æœï¼Œè€Œä¸”ä¸æ”¯æŒè®¾ç½®å›è°ƒæ–¹æ³•ï¼ŒJava8ä¹‹å‰è‹¥è¦è®¾ç½®å›è°ƒä¸€èˆ¬ä¼šä½¿ç”¨guavaçš„ListenableFutureï¼Œå›è°ƒçš„å¼•å…¥åˆä¼šå¯¼è‡´è‡­åæ˜­è‘—çš„â€œå›è°ƒåœ°ç‹±â€ã€‚\nCompletableFutureå¯¹Futureè¿›è¡Œäº†æ‰©å±•ï¼Œå¯ä»¥é€šè¿‡è®¾ç½®å›è°ƒçš„æ–¹å¼å¤„ç†è®¡ç®—ç»“æœï¼ŒåŒæ—¶ä¹Ÿæ”¯æŒç»„åˆæ“ä½œï¼Œæ”¯æŒè¿›ä¸€æ­¥çš„ç¼–æ’ï¼ŒåŒæ—¶ä¸€å®šç¨‹åº¦è§£å†³äº†å›è°ƒåœ°ç‹±çš„é—®é¢˜ã€‚\nå‡è®¾æœ‰ä¸‰ä¸ªæ“ä½œå­˜åœ¨ä¾èµ–å…³ç³»ï¼Œstep1 -\u0026gt; step2 -\u0026gt; step3éœ€è¦å‰é¢æ­¥éª¤æ‰§è¡ŒæˆåŠŸå†æ‰§è¡Œåé¢æ­¥éª¤ã€‚\nFuture(ListenableFuture)çš„å®ç°ï¼ˆå›è°ƒåœ°ç‹±ï¼‰å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 ExecutorService executor = Executors.newFixedThreadPool(5); ListeningExecutorService guavaExecutor = MoreExecutors.listeningDecorator(executor); ListenableFuture\u0026lt;Object\u0026gt; future1 = guavaExecutor.submit(() -\u0026gt; { //step 1 System.out.println(\u0026#34;æ‰§è¡Œstep1\u0026#34;); return true; }); Futures.addCallback(future1, new FutureCallback\u0026lt;Object\u0026gt;() { @Override public void onSuccess(Object step1Result) { ListenableFuture\u0026lt;Object\u0026gt; future2 = guavaExecutor.submit(() -\u0026gt; { System.out.println(\u0026#34;æ‰§è¡Œstep 2\u0026#34;); return true; }); Futures.addCallback(future2, new FutureCallback\u0026lt;Object\u0026gt;() { @Override public void onSuccess(Object result) { ListenableFuture\u0026lt;Object\u0026gt; future3 = guavaExecutor.submit(() -\u0026gt; { System.out.println(\u0026#34;æ‰§è¡Œstep 3\u0026#34;); return true; }); Futures.addCallback(future3, new FutureCallback\u0026lt;Object\u0026gt;() { @Override public void onSuccess(Object result) { System.out.println(\u0026#34;è¿™æ˜¯step 3æ‰§è¡Œç»“æœ\u0026#34;); } @Override public void onFailure(Throwable t) { } }, guavaExecutor); } @Override public void onFailure(Throwable t) { } }, guavaExecutor); System.out.println(\u0026#34;æ‰§è¡Œstep2\u0026#34;); } @Override public void onFailure(Throwable throwable) { } }, guavaExecutor); CompletableFutureçš„å®ç°å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 ExecutorService executor = Executors.newFixedThreadPool(5); CompletableFuture .supplyAsync(() -\u0026gt; { System.out.println(\u0026#34;æ‰§è¡Œstep 1\u0026#34;); return new Object(); }, executor) .thenApply(result1 -\u0026gt; { System.out.println(\u0026#34;æ‰§è¡Œstep 2\u0026#34;); return new Object(); }) .thenApply(result1 -\u0026gt; { System.out.println(\u0026#34;æ‰§è¡Œstep 3\u0026#34;); return new Object(); }); æ˜¾ç„¶ï¼ŒCompletableFutureçš„å®ç°è¦æ›´ä¸ºç®€æ´ï¼Œå¯è¯»æ€§æ›´å¥½ã€‚\nä½¿ç”¨ ç®€å•ä½¿ç”¨ åˆ›å»ºCompletableFutureï¼š\n1 CompletableFuture\u0026lt;String\u0026gt; completableFuture = new CompletableFuture\u0026lt;String\u0026gt;(); è¡¨ç¤ºåˆ›å»ºäº†ä¸€ä¸ªè¿”å›å€¼ä¸ºStringçš„CompletableFutureçš„å¯¹è±¡ã€‚\nåŒæ ·ï¼Œç±»ä¼¼Futureï¼ŒCompletableFutureä¹Ÿä½¿ç”¨getæ–¹æ³•è·å–è¿”å›ç»“æœï¼Œè¿™ä¹Ÿæ˜¯é˜»å¡çš„ï¼Œå½“æˆ‘ä»¬ç›´æ¥è¿è¡Œä¸‹é¢çš„è¯­å¥ï¼š\n1 String result = completableFuture.get() å®ƒå°†ä¸€ç›´å¤„äºé˜»å¡çŠ¶æ€ã€‚\nå¯ä»¥ä½¿ç”¨CompletableFuture.complete()æ‰‹å·¥çš„å®Œæˆä¸€ä¸ª Future:\n1 completableFuture.complete(\u0026#34;Future\u0026#39;s Result\u0026#34;); æ‰€æœ‰ç­‰å¾…è¿™ä¸ª Future çš„å®¢æˆ·ç«¯éƒ½å°†å¾—åˆ°ä¸€ä¸ªæŒ‡å®šçš„ç»“æœï¼Œå¹¶ä¸” completableFuture.complete() ä¹‹åçš„è°ƒç”¨å°†è¢«å¿½ç•¥ã€‚\nrunAsync() è¿™ä¸ªé€‚ç”¨äºæ— è¿”å›å€¼çš„å¼‚æ­¥æ‰§è¡Œã€‚\nCompletableFuture.runAsync()æ–¹æ³•ï¼Œå®ƒæŒæœ‰ä¸€ä¸ªRunnable å¯¹è±¡ï¼Œå¹¶è¿”å› CompletableFuture\u0026lt;Void\u0026gt;ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 // Run a task specified by a Runnable Object asynchronously. CompletableFuture\u0026lt;Void\u0026gt; future = CompletableFuture.runAsync(new Runnable() { @Override public void run() { // Simulate a long-running Job try { TimeUnit.SECONDS.sleep(1); } catch (InterruptedException e) { throw new IllegalStateException(e); } System.out.println(\u0026#34;I\u0026#39;ll run in a separate thread than the main thread.\u0026#34;); } }); // Block and wait for the future to complete future.get() æˆ–è€…ï¼š\n1 2 3 4 5 6 7 8 9 10 // Using Lambda Expression CompletableFuture\u0026lt;Void\u0026gt; future = CompletableFuture.runAsync(() -\u0026gt; { // Simulate a long-running Job try { TimeUnit.SECONDS.sleep(1); } catch (InterruptedException e) { throw new IllegalStateException(e); } System.out.println(\u0026#34;I\u0026#39;ll run in a separate thread than the main thread.\u0026#34;); }); supplyAsync() é€‚ç”¨äºæœ‰è¿”å›å€¼çš„å¼‚æ­¥è®¡ç®—ã€‚\nCompletableFuture.supplyAsync() æŒæœ‰supplier\u0026lt;T\u0026gt; å¹¶ä¸”è¿”å›CompletableFuture\u0026lt;T\u0026gt;ï¼ŒT æ˜¯é€šè¿‡è°ƒç”¨ ä¼ å…¥çš„supplierå–å¾—çš„å€¼çš„ç±»å‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 // Run a task specified by a Supplier object asynchronously CompletableFuture\u0026lt;String\u0026gt; future = CompletableFuture.supplyAsync(new Supplier\u0026lt;String\u0026gt;() { @Override public String get() { try { TimeUnit.SECONDS.sleep(1); } catch (InterruptedException e) { throw new IllegalStateException(e); } return \u0026#34;Result of the asynchronous computation\u0026#34;; } }); // Block and get the result of the Future String result = future.get(); System.out.println(result); æˆ–è€…ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 // Run a task specified by a Supplier object asynchronously CompletableFuture\u0026lt;String\u0026gt; future = CompletableFuture.supplyAsync(new Supplier\u0026lt;String\u0026gt;() { @Override public String get() { try { TimeUnit.SECONDS.sleep(1); } catch (InterruptedException e) { throw new IllegalStateException(e); } return \u0026#34;Result of the asynchronous computation\u0026#34;; } }); // Block and get the result of the Future String result = future.get(); System.out.println(result); æœ€å¥½åŠ ä¸Šä¸€ä¸ªçº¿ç¨‹æ± çš„å‚æ•°ï¼Œä¸ç„¶é»˜è®¤ä»å…¨å±€çš„ ForkJoinPool.commonPool()è·å¾—ä¸€ä¸ªçº¿ç¨‹ä¸­æ‰§è¡Œè¿™äº›ä»»åŠ¡ã€‚\n// Variations of runAsync() and supplyAsync() methods static CompletableFuture\u0026lt;Void\u0026gt; runAsync(Runnable runnable) static CompletableFuture\u0026lt;Void\u0026gt; runAsync(Runnable runnable, Executor executor) static \u0026lt;U\u0026gt; CompletableFuture\u0026lt;U\u0026gt; supplyAsync(Supplier\u0026lt;U\u0026gt; supplier) static \u0026lt;U\u0026gt; CompletableFuture\u0026lt;U\u0026gt; supplyAsync(Supplier\u0026lt;U\u0026gt; supplier, Executor executor) ä¸Šé¢çš„å‡ ä¸ªæ–¹æ³•å…¶å®è¿˜æ˜¯é˜»å¡çš„ã€‚å®ƒä¼šä¸€ç›´ç­‰åˆ°Futureå®Œæˆå¹¶ä¸”åœ¨å®Œæˆåè¿”å›ç»“æœã€‚è¿™ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ï¼Œæˆ‘ä»¬æƒ³è¦çš„æ˜¯åœ¨å®ƒæ‰§è¡Œå®Œæˆä¹‹åè°ƒç”¨æˆ‘ä»¬è‡ªå·±çš„é€»è¾‘ã€‚å¯¹äºæ„å»ºå¼‚æ­¥ç³»ç»Ÿï¼Œæˆ‘ä»¬åº”è¯¥é™„ä¸Šä¸€ä¸ªå›è°ƒç»™CompletableFutureï¼Œå½“Futureå®Œæˆçš„æ—¶å€™ï¼Œè‡ªåŠ¨çš„è·å–ç»“æœã€‚\nå¯ä»¥ä½¿ç”¨ thenApply(), thenAccept() å’ŒthenRun()æ–¹æ³•é™„ä¸Šä¸€ä¸ªå›è°ƒç»™CompletableFutureã€‚\nthenApply() å®ç°è°ƒç”¨é“¾ã€‚\nä½¿ç”¨ thenApply() å¤„ç†å’Œæ”¹å˜CompletableFutureçš„ç»“æœã€‚æŒæœ‰ä¸€ä¸ªFunction\u0026lt;R,T\u0026gt;ä½œä¸ºå‚æ•°ã€‚Function\u0026lt;R,T\u0026gt;æ˜¯ä¸€ä¸ªç®€å•çš„å‡½æ•°å¼æ¥å£ï¼Œæ¥å—ä¸€ä¸ªTç±»å‹çš„å‚æ•°ï¼Œäº§å‡ºä¸€ä¸ªRç±»å‹çš„ç»“æœã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 // Create a CompletableFuture CompletableFuture\u0026lt;String\u0026gt; whatsYourNameFuture = CompletableFuture.supplyAsync(() -\u0026gt; { try { TimeUnit.SECONDS.sleep(1); } catch (InterruptedException e) { throw new IllegalStateException(e); } return \u0026#34;Rajeev\u0026#34;; }); // Attach a callback to the Future using thenApply() CompletableFuture\u0026lt;String\u0026gt; greetingFuture = whatsYourNameFuture.thenApply(name -\u0026gt; { return \u0026#34;Hello \u0026#34; + name; }); // Block and get the result of the future. System.out.println(greetingFuture.get()); // Hello Rajeev thenAccept() å’Œ thenRun() å¦‚æœä½ ä¸æƒ³ä»ä½ çš„å›è°ƒå‡½æ•°ä¸­è¿”å›ä»»ä½•ä¸œè¥¿ï¼Œä»…ä»…æƒ³åœ¨Futureå®Œæˆåè¿è¡Œä¸€äº›ä»£ç ç‰‡æ®µï¼Œä½ å¯ä»¥ä½¿ç”¨thenAccept() å’Œ thenRun()æ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•ç»å¸¸åœ¨è°ƒç”¨é“¾çš„æœ€æœ«ç«¯çš„æœ€åä¸€ä¸ªå›è°ƒå‡½æ•°ä¸­ä½¿ç”¨ã€‚\nCompletableFuture.thenAccept() æŒæœ‰ä¸€ä¸ªConsumer\u0026lt;T\u0026gt; ï¼Œè¿”å›ä¸€ä¸ªCompletableFuture\u0026lt;Void\u0026gt;ã€‚å®ƒå¯ä»¥è®¿é—®CompletableFutureçš„ç»“æœï¼š\n1 2 3 4 5 6 // thenAccept() example CompletableFuture.supplyAsync(() -\u0026gt; { return ProductService.getProductDetail(productId); }).thenAccept(product -\u0026gt; { System.out.println(\u0026#34;Got product detail from remote service \u0026#34; + product.getName()) }); è™½ç„¶thenAccept()å¯ä»¥è®¿é—®CompletableFutureçš„ç»“æœï¼Œä½†thenRun()ä¸èƒ½è®¿Futureçš„ç»“æœï¼Œå®ƒæŒæœ‰ä¸€ä¸ªRunnableè¿”å›CompletableFutureï¼š\n1 2 3 4 5 6 // thenRun() example CompletableFuture.supplyAsync(() -\u0026gt; { // Run some computation }).thenRun(() -\u0026gt; { // Computation Finished. }); thenCompose()-ç»„åˆ ç»„åˆä¸¤ä¸ªç‹¬ç«‹çš„futureã€‚\nåŸæ¥å‡è®¾æƒ³ä»ä¸€ä¸ªè¿œç¨‹APIä¸­è·å–ä¸€ä¸ªç”¨æˆ·çš„è¯¦ç»†ä¿¡æ¯ï¼Œä¸€æ—¦ç”¨æˆ·ä¿¡æ¯å¯ç”¨ï¼Œä½ æƒ³ä»å¦å¤–ä¸€ä¸ªæœåŠ¡ä¸­è·å–ä»–çš„è´·æ–¹ã€‚ä»£ç æ˜¯è¿™æ ·çš„ï¼š\n1 2 3 4 5 6 7 8 9 10 11 CompletableFuture\u0026lt;User\u0026gt; getUsersDetail(String userId) { return CompletableFuture.supplyAsync(() -\u0026gt; { UserService.getUserDetails(userId); }); } CompletableFuture\u0026lt;Double\u0026gt; getCreditRating(User user) { return CompletableFuture.supplyAsync(() -\u0026gt; { CreditRatingService.getCreditRating(user); }); } ä½¿ç”¨äº†thenApply()å¯ä»¥è¿›è¡Œå¼‚æ­¥è°ƒç”¨ï¼Œå¹¶ä¸”ä»£ç éå¸¸ç®€æ´ï¼š\n1 2 CompletableFuture\u0026lt;CompletableFuture\u0026lt;Double\u0026gt;\u0026gt; result = getUserDetail(userId) .thenApply(user -\u0026gt; getCreditRating(user)); åœ¨æ›´æ—©çš„ç¤ºä¾‹ä¸­ï¼ŒSupplierå‡½æ•°ä¼ å…¥thenApplyå°†è¿”å›ä¸€ä¸ªç®€å•çš„å€¼ï¼Œä½†æ˜¯åœ¨æœ¬ä¾‹ä¸­ï¼Œå°†è¿”å›ä¸€ä¸ªCompletableFutureã€‚ä»¥ä¸Šç¤ºä¾‹çš„æœ€ç»ˆç»“æœæ˜¯ä¸€ä¸ªåµŒå¥—çš„CompletableFutureã€‚\nå¦‚æœä½ æƒ³è·å–æœ€ç»ˆçš„ç»“æœç»™æœ€é¡¶å±‚futureï¼Œä½¿ç”¨ thenCompose()æ–¹æ³•ä»£æ›¿\n1 2 CompletableFuture\u0026lt;Double\u0026gt; result = getUserDetail(userId) .thenCompose(user -\u0026gt; getCreditRating(user)); thenCombine()-ç»„åˆæ“ä½œ è™½ç„¶thenCompose()è¢«ç”¨äºå½“ä¸€ä¸ªfutureä¾èµ–å¦å¤–ä¸€ä¸ªfutureçš„æ—¶å€™ç”¨æ¥ç»„åˆä¸¤ä¸ªfutureã€‚thenCombine()è¢«ç”¨æ¥å½“ä¸¤ä¸ªç‹¬ç«‹çš„Futureéƒ½å®Œæˆçš„æ—¶å€™ï¼Œç”¨æ¥åšä¸€äº›äº‹æƒ…ã€‚\nä¾‹å­ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 System.out.println(\u0026#34;Retrieving weight.\u0026#34;); CompletableFuture\u0026lt;Double\u0026gt; weightInKgFuture = CompletableFuture.supplyAsync(() -\u0026gt; { try { TimeUnit.SECONDS.sleep(1); } catch (InterruptedException e) { throw new IllegalStateException(e); } return 65.0; }); System.out.println(\u0026#34;Retrieving height.\u0026#34;); CompletableFuture\u0026lt;Double\u0026gt; heightInCmFuture = CompletableFuture.supplyAsync(() -\u0026gt; { try { TimeUnit.SECONDS.sleep(1); } catch (InterruptedException e) { throw new IllegalStateException(e); } return 177.8; }); System.out.println(\u0026#34;Calculating BMI.\u0026#34;); CompletableFuture\u0026lt;Double\u0026gt; combinedFuture = weightInKgFuture .thenCombine(heightInCmFuture, (weightInKg, heightInCm) -\u0026gt; { Double heightInMeter = heightInCm/100; return weightInKg/(heightInMeter*heightInMeter); }); System.out.println(\u0026#34;Your BMI is - \u0026#34; + combinedFuture.get()); å½“ä¸¤ä¸ªFutureéƒ½å®Œæˆçš„æ—¶å€™ï¼Œä¼ ç»™thenCombine()çš„å›è°ƒå‡½æ•°å°†è¢«è°ƒç”¨ã€‚\nå‰é¢éƒ½æ˜¯ç»„åˆä¸¤ä¸ªçš„CompletableFutureæ–¹æ³•ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä¸¤ä¸ªæ–¹æ³•ç»„åˆä»»æ„æ•°é‡çš„CompletableFutureã€‚\n1 2 static CompletableFuture\u0026lt;Void\u0026gt; allOf(CompletableFuture\u0026lt;?\u0026gt;... cfs) static CompletableFuture\u0026lt;Object\u0026gt; anyOf(CompletableFuture\u0026lt;?\u0026gt;... cfs) CompletableFuture.allOf()-ç»„åˆå¤šä¸ªï¼ˆå…¨éƒ¨ï¼‰ CompletableFuture.allOfçš„ä½¿ç”¨åœºæ™¯æ˜¯å½“ä½ ä¸€ä¸ªåˆ—è¡¨çš„ç‹¬ç«‹futureï¼Œå¹¶ä¸”ä½ æƒ³åœ¨å®ƒä»¬éƒ½å®Œæˆåå¹¶è¡Œçš„åšä¸€äº›äº‹æƒ…ã€‚\nä¸€èˆ¬æ˜¯ä¸€æ¬¡æ•°æ®çš„è¯·æ±‚éœ€è¦è°ƒç”¨å¤šä¸ªæœåŠ¡è¿›è¡ŒæŸ¥è¯¢ï¼Œå¯ä»¥ä½¿ç”¨è¿™ç§æ–¹æ³•åŠ å¿«æ“ä½œçš„é€Ÿåº¦ã€‚ä½†æ˜¯ï¼Œå¯¹äºåŒä¸€ä¸ªæœåŠ¡çš„å¾ªç¯å·®å…¶å®æ²¡æœ‰å®è´¨æ€§çš„æé«˜ã€‚\nå®šä¹‰ä¸€ä¸ªä¸‹è½½é¡µé¢çš„æ–¹æ³•:\n1 2 3 4 5 CompletableFuture\u0026lt;String\u0026gt; downloadWebPage(String pageLink) { return CompletableFuture.supplyAsync(() -\u0026gt; { // Code to download and return the web page\u0026#39;s content }); } ä¸‹è½½ä¸€ä¸ªç½‘ç«™çš„100ä¸ªä¸åŒçš„é¡µé¢ï¼Œä½¿ç”¨allofæ–¹æ³•ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 List\u0026lt;String\u0026gt; webPageLinks = Arrays.asList(...) // A list of 100 web page links // Download contents of all the web pages asynchronously List\u0026lt;CompletableFuture\u0026lt;String\u0026gt;\u0026gt; pageContentFutures = webPageLinks.stream() .map(webPageLink -\u0026gt; downloadWebPage(webPageLink)) .collect(Collectors.toList()); // Create a combined Future using allOf() CompletableFuture\u0026lt;Void\u0026gt; allFutures = CompletableFuture.allOf( pageContentFutures.toArray(new CompletableFuture[pageContentFutures.size()]) ); ä½¿ç”¨CompletableFuture.allOf()çš„é—®é¢˜æ˜¯å®ƒè¿”å›CompletableFutureã€‚ä½†æ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡å†™ä¸€äº›é¢å¤–çš„ä»£ç æ¥è·å–æ‰€æœ‰å°è£…çš„CompletableFutureç»“æœã€‚\n1 2 3 4 5 6 // When all the Futures are completed, call `future.join()` to get their results and collect the results in a list - CompletableFuture\u0026lt;List\u0026lt;String\u0026gt;\u0026gt; allPageContentsFuture = allFutures.thenApply(v -\u0026gt; { return pageContentFutures.stream() .map(pageContentFuture -\u0026gt; pageContentFuture.join()) .collect(Collectors.toList()); }); å½“æ‰€æœ‰futureå®Œæˆçš„æ—¶å€™ï¼Œæˆ‘ä»¬è°ƒç”¨äº†future.join()ï¼Œå› æ­¤æˆ‘ä»¬ä¸ä¼šåœ¨ä»»ä½•åœ°æ–¹é˜»å¡ã€‚\njoin()æ–¹æ³•å’Œget()æ–¹æ³•éå¸¸ç±»ä¼¼ï¼Œè¿™å”¯ä¸€ä¸åŒçš„åœ°æ–¹æ˜¯å¦‚æœæœ€é¡¶å±‚çš„CompletableFutureå®Œæˆçš„æ—¶å€™å‘ç”Ÿäº†å¼‚å¸¸ï¼Œå®ƒä¼šæŠ›å‡ºä¸€ä¸ªæœªç»æ£€æŸ¥çš„å¼‚å¸¸ã€‚\nç°åœ¨è®©æˆ‘ä»¬è®¡ç®—åŒ…å«å…³é”®å­—é¡µé¢çš„æ•°é‡ã€‚\n1 2 3 4 5 6 7 8 9 // Count the number of web pages having the \u0026#34;CompletableFuture\u0026#34; keyword. CompletableFuture\u0026lt;Long\u0026gt; countFuture = allPageContentsFuture.thenApply(pageContents -\u0026gt; { return pageContents.stream() .filter(pageContent -\u0026gt; pageContent.contains(\u0026#34;CompletableFuture\u0026#34;)) .count(); }); System.out.println(\u0026#34;Number of Web Pages having CompletableFuture keyword - \u0026#34; + countFuture.get()); CompletableFuture.anyOf()-ç»„åˆå¤šä¸ªï¼ˆä»»æ„ï¼‰ CompletableFuture.anyOf()å’Œå…¶åå­—ä»‹ç»çš„ä¸€æ ·ï¼Œå½“ä»»ä½•ä¸€ä¸ªCompletableFutureå®Œæˆçš„æ—¶å€™ã€ç›¸åŒçš„ç»“æœç±»å‹ã€‘ï¼Œè¿”å›ä¸€ä¸ªæ–°çš„CompletableFutureã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 CompletableFuture\u0026lt;String\u0026gt; future1 = CompletableFuture.supplyAsync(() -\u0026gt; { try { TimeUnit.SECONDS.sleep(2); } catch (InterruptedException e) { throw new IllegalStateException(e); } return \u0026#34;Result of Future 1\u0026#34;; }); CompletableFuture\u0026lt;String\u0026gt; future2 = CompletableFuture.supplyAsync(() -\u0026gt; { try { TimeUnit.SECONDS.sleep(1); } catch (InterruptedException e) { throw new IllegalStateException(e); } return \u0026#34;Result of Future 2\u0026#34;; }); CompletableFuture\u0026lt;String\u0026gt; future3 = CompletableFuture.supplyAsync(() -\u0026gt; { try { TimeUnit.SECONDS.sleep(3); } catch (InterruptedException e) { throw new IllegalStateException(e); } return \u0026#34;Result of Future 3\u0026#34;; }); CompletableFuture\u0026lt;Object\u0026gt; anyOfFuture = CompletableFuture.anyOf(future1, future2, future3); System.out.println(anyOfFuture.get()); // Result of Future 2 å½“ä¸‰ä¸ªä¸­çš„ä»»ä½•ä¸€ä¸ªCompletableFutureå®Œæˆï¼Œ anyOfFutureå°±ä¼šå®Œæˆã€‚å› ä¸ºfuture2çš„ä¼‘çœ æ—¶é—´æœ€å°‘ï¼Œå› æ­¤å¥¹æœ€å…ˆå®Œæˆï¼Œæœ€ç»ˆçš„ç»“æœå°†æ˜¯future2çš„ç»“æœã€‚\nCompletableFuture.anyOf()ä¼ å…¥ä¸€ä¸ªFutureå¯å˜å‚æ•°ï¼Œè¿”å›CompletableFutureã€‚CompletableFuture.anyOf()çš„é—®é¢˜æ˜¯å¦‚æœä½ çš„CompletableFutureè¿”å›çš„ç»“æœæ˜¯ä¸åŒç±»å‹çš„ï¼Œè¿™æ—¶å€™ä½ è®²ä¼šä¸çŸ¥é“ä½ æœ€ç»ˆCompletableFutureæ˜¯ä»€ä¹ˆç±»å‹ã€‚\nå¼‚å¸¸å¤„ç† 1. ä½¿ç”¨ exceptionally() å›è°ƒå¤„ç†å¼‚å¸¸\nexceptionally()å›è°ƒç»™ä½ ä¸€ä¸ªä»åŸå§‹Futureä¸­ç”Ÿæˆçš„é”™è¯¯æ¢å¤çš„æœºä¼šã€‚ä½ å¯ä»¥åœ¨è¿™é‡Œè®°å½•è¿™ä¸ªå¼‚å¸¸å¹¶è¿”å›ä¸€ä¸ªé»˜è®¤å€¼ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 Integer age = -1; CompletableFuture\u0026lt;String\u0026gt; maturityFuture = CompletableFuture.supplyAsync(() -\u0026gt; { if(age \u0026lt; 0) { throw new IllegalArgumentException(\u0026#34;Age can not be negative\u0026#34;); } if(age \u0026gt; 18) { return \u0026#34;Adult\u0026#34;; } else { return \u0026#34;Child\u0026#34;; } }).exceptionally(ex -\u0026gt; { // åœ¨æ­¤å¤„æ‰“å°ç›¸å…³çš„æ—¥å¿—ï¼Œè¿”å›å€¼éœ€è¦ç‰¹åˆ«æ³¨æ„ï¼Œå¯ä»¥è¿”å›ä¸€ä¸ªæŒ‡å®šçš„å€¼ï¼Œç„¶ååœ¨åé¢è¿›è¡Œè¿‡æ»¤ System.out.println(\u0026#34;Oops! We have an exception - \u0026#34; + ex.getMessage()); return \u0026#34;Unknown!\u0026#34;; }); System.out.println(\u0026#34;Maturity : \u0026#34; + maturityFuture.get()); 2. ä½¿ç”¨ handle() æ–¹æ³•å¤„ç†å¼‚å¸¸\nAPIæä¾›äº†ä¸€ä¸ªæ›´é€šç”¨çš„æ–¹æ³• - handle()ä»å¼‚å¸¸æ¢å¤ï¼Œæ— è®ºä¸€ä¸ªå¼‚å¸¸æ˜¯å¦å‘ç”Ÿå®ƒéƒ½ä¼šè¢«è°ƒç”¨ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 Integer age = -1; CompletableFuture\u0026lt;String\u0026gt; maturityFuture = CompletableFuture.supplyAsync(() -\u0026gt; { if(age \u0026lt; 0) { throw new IllegalArgumentException(\u0026#34;Age can not be negative\u0026#34;); } if(age \u0026gt; 18) { return \u0026#34;Adult\u0026#34;; } else { return \u0026#34;Child\u0026#34;; } }).handle((res, ex) -\u0026gt; { if(ex != null) { System.out.println(\u0026#34;Oops! We have an exception - \u0026#34; + ex.getMessage()); return \u0026#34;Unknown!\u0026#34;; } return res; }); System.out.println(\u0026#34;Maturity : \u0026#34; + maturityFuture.get()); å¦‚æœå¼‚å¸¸å‘ç”Ÿï¼Œreså‚æ•°å°†æ˜¯ nullï¼Œå¦åˆ™ï¼Œexå°†æ˜¯ nullã€‚\nåŒºåˆ« supplyAsyncï¼š\nå½“åªæ˜¯æŒ‡å®šç¬¬ä¸€ä¸ªå‚æ•°ï¼Œé»˜è®¤ä½¿ç”¨çš„çº¿ç¨‹æ± æ˜¯ ForkJoinPool.commonPool() å½“æŒ‡å®šç¬¬äºŒä¸ªçº¿ç¨‹æ± çš„å‚æ•°ï¼Œä½¿ç”¨çš„æ˜¯è‡ªå®šä¹‰çš„çº¿ç¨‹ supplyAsyncè¡¨ç¤ºå¼€å¯ä¸€ä¸ªæœ‰è¿”å›å€¼çš„å¼‚æ­¥ä»»åŠ¡ã€‚\nå¯ä»¥ä½¿ç”¨ thenAccept å’Œ thenApply ç»™å®ƒå¢åŠ å›è°ƒå‡½æ•°ã€‚åŒæ ·ï¼ŒthenAccept å’Œ thenApply ä¹Ÿæœ‰åŒæ ·çš„å¼‚æ­¥å‡½æ•°thenAcceptAsync å’Œ thenApplyAsync ï¼Œå¯ä»¥è®©é€»è¾‘æ‰§è¡Œåœ¨è®¾å®šçš„çº¿ç¨‹æ± ä¸Šã€‚\nåŒæ­¥å’Œå¼‚æ­¥çš„åŒºåˆ«ï¼š\nå‡è®¾æˆ‘ä»¬æƒ³ä¸€æ¬¡å‘åŒä¸€ä¸ªæ¥æ”¶è€…å‘é€ä¸¤æ¡æ¶ˆæ¯ã€‚\n1 2 3 4 CompletableFuture\u0026lt;String\u0026gt; receiver = CompletableFuture.supplyAsync(this::findReceiver); receiver.thenApply(this::sendMsg); receiver.thenApply(this::sendOtherMsg); åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œä¸€åˆ‡éƒ½å°†åœ¨åŒä¸€ä¸ªçº¿ç¨‹ä¸Šæ‰§è¡Œã€‚è¿™å¯¼è‡´æœ€åä¸€æ¡æ¶ˆæ¯ç­‰å¾…ç¬¬ä¸€æ¡æ¶ˆæ¯å®Œæˆã€‚\nè€ƒè™‘è¿™ä¸ªä»£ç :\n1 2 3 4 5 CompletableFuture\u0026lt;String\u0026gt; receiver = CompletableFuture.supplyAsync(this::findReceiver); receiver.thenApplyAsync(this::sendMsg); receiver.thenApplyAsync(this::sendMsg); é€šè¿‡ä½¿ç”¨asyncåç¼€ï¼Œæ¯ä¸ªæ¶ˆæ¯è¢«ä½œä¸ºå•ç‹¬çš„ä»»åŠ¡æäº¤ç»™ForkJoinPool.commonPool()ã€‚è¿™å¯¼è‡´åœ¨å®Œæˆå‰é¢çš„è®¡ç®—æ—¶ï¼ŒsendMsgçš„å›è°ƒéƒ½è¢«æ‰§è¡Œã€‚\nä¸€ä¸ªæµ‹è¯•ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 //thenApplyå’ŒthenApplyAsyncçš„åŒºåˆ« System.out.println(\u0026#34;-------------\u0026#34;); CompletableFuture\u0026lt;String\u0026gt; supplyAsyncWithSleep = CompletableFuture.supplyAsync(()-\u0026gt;{ try { Thread.sleep(10000); } catch (InterruptedException e) { e.printStackTrace(); } return \u0026#34;supplyAsyncWithSleep Thread Id : \u0026#34; + Thread.currentThread(); }); CompletableFuture\u0026lt;String\u0026gt; thenApply = supplyAsyncWithSleep .thenApply(name -\u0026gt; name + \u0026#34;------thenApply Thread Id : \u0026#34; + Thread.currentThread()); CompletableFuture\u0026lt;String\u0026gt; thenApplyAsync = supplyAsyncWithSleep .thenApplyAsync(name -\u0026gt; name + \u0026#34;------thenApplyAsync Thread Id : \u0026#34; + Thread.currentThread()); System.out.println(\u0026#34;Main Thread Id: \u0026#34;+ Thread.currentThread()); System.out.println(thenApply.get()); System.out.println(thenApplyAsync.get()); System.out.println(\u0026#34;-------------No Sleep\u0026#34;); CompletableFuture\u0026lt;String\u0026gt; supplyAsyncNoSleep = CompletableFuture.supplyAsync(()-\u0026gt;{ return \u0026#34;supplyAsyncNoSleep Thread Id : \u0026#34; + Thread.currentThread(); }); CompletableFuture\u0026lt;String\u0026gt; thenApplyNoSleep = supplyAsyncNoSleep .thenApply(name -\u0026gt; name + \u0026#34;------thenApply Thread Id : \u0026#34; + Thread.currentThread()); CompletableFuture\u0026lt;String\u0026gt; thenApplyAsyncNoSleep = supplyAsyncNoSleep .thenApplyAsync(name -\u0026gt; name + \u0026#34;------thenApplyAsync Thread Id : \u0026#34; + Thread.currentThread()); System.out.println(\u0026#34;Main Thread Id: \u0026#34;+ Thread.currentThread()); System.out.println(thenApplyNoSleep.get()); System.out.println(thenApplyAsyncNoSleep.get()); åˆ†åˆ«æµ‹è¯•æ‰§è¡Œä¸åŒå¤„ç†é€Ÿåº¦çš„ä»£ç ï¼ŒthenApply å’Œ thenApplyAsync ä½¿ç”¨çš„æ˜¯å“ªä¸ªçº¿ç¨‹ï¼š\n------------- Main Thread Id: Thread[main,5,main] supplyAsyncWithSleep Thread Id : Thread[ForkJoinPool.commonPool-worker-9,5,main]------thenApply Thread Id : Thread[ForkJoinPool.commonPool-worker-9,5,main] supplyAsyncWithSleep Thread Id : Thread[ForkJoinPool.commonPool-worker-9,5,main]------thenApplyAsync Thread Id : Thread[ForkJoinPool.commonPool-worker-9,5,main] -------------No Sleep Main Thread Id: Thread[main,5,main] supplyAsyncNoSleep Thread Id : Thread[ForkJoinPool.commonPool-worker-2,5,main]------thenApply Thread Id : Thread[main,5,main] supplyAsyncNoSleep Thread Id : Thread[ForkJoinPool.commonPool-worker-2,5,main]------thenApplyAsync Thread Id : Thread[ForkJoinPool.commonPool-worker-2,5,main] å¯ä»¥çœ‹åˆ°\nsupplyAsyncæ–¹æ³•æ‰§è¡Œé€Ÿåº¦æ…¢çš„è¯thenApplyæ–¹æ³•æ‰§è¡Œçº¿ç¨‹å’ŒsupplyAsync æ‰§è¡Œçº¿ç¨‹ç›¸åŒ supplyAsync æ–¹æ³•æ‰§è¡Œé€Ÿåº¦å¿«çš„è¯ï¼Œé‚£ä¹ˆthenApplyæ–¹æ³•æ‰§è¡Œçº¿ç¨‹å’ŒMainæ–¹æ³•æ‰§è¡Œçº¿ç¨‹ç›¸åŒ è¿”å›å€¼ æ–¹æ³•å æ˜¯å¦å¯è·å¾—å‰ä¸€ä¸ªä»»åŠ¡çš„è¿”å›å€¼ æ˜¯å¦æœ‰è¿”å›å€¼ thenApply èƒ½è·å¾— æœ‰ thenAccept èƒ½è·å¾— æ—  thenRun ä¸å¯è·å¾— æ—  æ‰€ä»¥ä¸€èˆ¬æ¥è¯´thenAccept ã€thenRun è¿™ä¸¤ä¸ªæ–¹æ³•åœ¨è°ƒç”¨é“¾çš„æœ€æœ«ç«¯ä½¿ç”¨ã€‚\näºŒå…ƒä¾èµ– thenCombine:ä¸¤ä¸ªå¼‚æ­¥æ–¹æ³•å¾—å‡ºæ¥å€¼çš„æƒ…å†µä¸‹æ‰èƒ½è¿›è¡Œè®¡ç®— thenCompose:äºŒä¸ªå®šæ—¶ä»»åŠ¡éœ€è¦ç”¨åˆ°ç¬¬ä¸€ä¸ªå®šæ—¶ä»»åŠ¡çš„è¿”å›å€¼ runAfterBoth äºŒé€‰ä¸€ï¼šacceptEither\nfirstSource.acceptEither(secondSource, this::sendMsg);\næ€»ç»“ CompletableFutureä½¿ç”¨getæ–¹æ³•å’Œjoinæ–¹æ³•ä¼šé˜»å¡åç»­çš„æ“ä½œã€‚ ä¸é˜»å¡çš„è¯å¹¶ä¸”ä¸éœ€è¦è¿”å›å€¼å¯ä»¥ç›´æ¥ä¸æ˜¾ç¤ºçš„ä½¿ç”¨getæ–¹æ³•å’Œjoinæ–¹æ³•ã€‚ ä½¿ç”¨åœºæ™¯ ä½ ä»¥å‰å¯èƒ½æ¥è§¦è¿‡ CompletableFuture å¯¹è±¡èƒŒåçš„æ¦‚å¿µï¼Œåœ¨å…¶ä»–è¯­è¨€ä¸­è¿™è¢« å«ä½œå»¶è¿Ÿå¯¹è±¡æˆ–çº¦å®šã€‚åœ¨Google Guavaç±»åº“å’ŒSpringæ¡†æ¶ä¸­ï¼Œè¿™è¢«å«ä½œ ListenableFuturesã€‚\nå¤šæœåŠ¡è°ƒç”¨ å®é™…çš„æƒ…å†µå¯èƒ½æ˜¯è¿™æ ·å­\nå¤šçº¿ç¨‹ç»„è£…æ•°æ®ã€‚ æ¯ä¸€ä¸ªåˆ†ç‰‡æ•°æ®éƒ½ç”¨ä¸€ä¸ªCompletableFutureæ‰§è¡Œã€‚\nJoinï¼Œå®ƒçš„ä½œç”¨å’Œ get æ–¹æ³• æ˜¯ä¸€æ ·çš„ï¼Œè€Œä¸”å®ƒæ²¡æœ‰ä½¿ç”¨ get æ–¹æ³•æ—¶ä»¤äººå€’èƒƒå£çš„æ£€æŸ¥å¼‚å¸¸ã€‚\njoinæŠ›å‡ºuncheckerå¼‚å¸¸ï¼Œè€ŒgetæŠ›å‡ºcheckedå¼‚å¸¸\næ··åˆä½¿Streamå’ŒCompletableFutureçš„æ—¶å€™éœ€è¦æ³¨æ„âš ï¸ï¼š\nè€ƒè™‘æ“ä½œä¹‹é—´çš„å»¶è¿Ÿç‰¹æ€§ï¼Œå¦‚ä½•ä½ åœ¨å•ä¸€æµæ°´çº¿ä¸­å¤„ç†æµï¼Œæ¯ä¸ªåˆ›å»ºCompletableFuture å¯¹è±¡åªèƒ½åœ¨å‰ä¸€ä¸ªæ“ä½œç»“æŸä¹‹åæ‰èƒ½åˆ›å»ºã€‚\næœ€å¥½æ˜¯å°†CompletableFutureå…ˆèšé›†åˆ°ä¸€ä¸ªåˆ—è¡¨ä¸­ã€‚ç„¶åå†å±Œç”¨joinã€‚\nåŸç† é€šå¸¸ï¼Œè®¾è®¡å’Œç†è§£å¹¶å‘ç³»ç»Ÿæœ€å¥½çš„æ–¹å¼æ˜¯ä½¿ç”¨å›¾å½¢:\nä¸Šé¢çš„å›¾å½¢å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„ä»£ç æ¥å®ç°ï¼š\n1 2 int t = p(x); System.out.println( r(q1(t), q2(t)) ); ä½¿ç”¨Futureæ–¹æ³•ï¼š\n1 2 3 4 int t = p(x); Future\u0026lt;Integer\u0026gt; a1 = executorService.submit(() -\u0026gt; q1(t)); Future\u0026lt;Integer\u0026gt; a2 = executorService.submit(() -\u0026gt; q2(t)); System.out.println( r(a1.get(),a2.get())); CompletableFutureä½¿ç”¨çš„æ˜¯ä¸€ç§è§‚å¯Ÿè€…æ¨¡å¼è¿›è¡Œå®ç°çš„ã€‚\nä½¿ç”¨CompletableFutureä¹Ÿæ˜¯æ„å»ºä¾èµ–æ ‘çš„è¿‡ç¨‹ï¼Œä¸€ä¸ªCompletableFutureçš„å®Œæˆä¼šè§¦å‘å¦å¤–ä¸€ç³»åˆ—ä¾èµ–å®ƒçš„CompletableFutureçš„æ‰§è¡Œï¼š\nJavaå®æˆ˜ æˆ‘ä»¬å®é™…çš„å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæ€»æ˜¯éœ€è¦è°ƒç”¨å¤šä¸ªæœåŠ¡ï¼Œå‡å¦‚æ²¡æœ‰ä½¿ç”¨å¹¶å‘è¿›è¡Œç¼–ç¨‹ï¼Œé‚£ä¹ˆï¼Œåœ¨ä¸€ä¸ªæœåŠ¡è¿”å›ç»“æœä¹‹å‰ï¼Œè¿™éƒ½æ˜¯é˜»å¡çš„ï¼Œä¸èƒ½æ‰§è¡Œå…¶ä»–çš„ä»»åŠ¡ã€‚ç„¶è€Œï¼Œä½ å¹¶ä¸å¸Œæœ›ç”±äºè¦ç­‰å¾…è¿œç¨‹æœåŠ¡çš„å“åº”ï¼Œé˜»å¡ç°æœ‰çš„è®¡ç®—ä»»åŠ¡å¹¶ç™½ç™½æµªè´¹ CPU ä¸­æ•°åäº¿ä¸ªå®è´µçš„æ—¶ô²ôµ‘æœŸã€‚è­¬ å¦‚ï¼Œä½ ä¸åº”è¯¥ç”±äºè¦ç­‰å¾… Facebook æ•°æ®çš„è¿”å›è€Œôµ’æ­¢å¯¹ Twitter æ•°æ®çš„å¤„ç†ã€‚\nJavaçš„å¹¶å‘ä¹‹è·¯ ä¸€å¼€å§‹å°±æä¾›äº†é”(é€šè¿‡ synchronized ç±»å’Œæ–¹æ³•)ã€Runnable ä»¥åŠçº¿ç¨‹ã€‚ 2004 å¹´ï¼Œ Java 5 åˆå¼•å…¥äº† java.util.concurrent åŒ…ã€‚ï¼ˆå¼•å…¥ExecutorServiceã€Callableä»¥åŠ Futureï¼‰ Java 7 ä¸ºäº†ä½¿ç”¨ fork/join å®ç°åˆ†è€Œôµ¬ä¹‹ç®—æ³•ï¼Œæ–° å¢äº†java.util.concurrent.RecursiveTask Java 8åˆ™å¢åŠ äº†å¯¹æµå’Œæµçš„å¹¶è¡Œå¤„ç†(ä¾èµ–äºæ–°å¢çš„ Lambda è¡¨è¾¾å¼)çš„æ”¯æŒ Java 8è¿˜æ”¯æŒç»„åˆå¼çš„Future(åŸºäºJava 8CompleteFutureå®ç°çš„Futureï¼‰ Java 9 æä¾›äº†å¯¹åˆ†å¸ƒå¼å¼‚æ­¥ç¼–ç¨‹çš„æ˜¾å¼æ”¯æŒã€‚ï¼ˆé€šè¿‡ java.util.concurrent.Flow æ¥å£ï¼‰ CompletableFuture åŠ java.util.concurrent.Flow çš„å…³é”®ç†å¿µæ˜¯æä¾›ä¸€ç§ç¨‹åºç»“æ„ï¼Œè®©ç›¸äº’ç‹¬ç«‹çš„ä»»åŠ¡å°½å¯èƒ½åœ°å¹¶å‘æ‰§è¡Œï¼Œé€šè¿‡è¿™ç§æ–¹å¼æœ€å¤§åŒ–åœ°åˆ©ç”¨å¤šæ ¸æˆ–è€…å¤šå°æœºå™¨æä¾›çš„å¹¶å‘èƒ½åŠ›ã€‚\nå¤šçº¿ç¨‹å¹¶å‘å†…å¹• åœ¨ä¸€ä¸ªå¤šæ ¸çš„ç¯å¢ƒä¸­ï¼Œå•ç”¨æˆ·ç™»å½•çš„ç¬”è®°æœ¬ç”µè„‘ä¸Šå¯èƒ½åªå¯åŠ¨äº†ä¸€ä¸ªç”¨æˆ·è¿›ç¨‹ï¼Œè¿™ç§ç¨‹åºæ°¸è¿œä¸èƒ½å……åˆ†å‘æŒ¥è®¡ç®—æœºçš„å¤„ç†èƒ½åŠ›ï¼Œé™¤éä½¿ç”¨å¤šçº¿ç¨‹ã€‚è™½ç„¶æ¯ä¸ªæ ¸å¯ä»¥æœåŠ¡ä¸€ä¸ªæˆ–å¤šä¸ªè¿›ç¨‹æˆ–çº¿ç¨‹ï¼Œä½†æ˜¯å¦‚æœä½ çš„ç¨‹åºå¹¶æœªä½¿ç”¨å¤šçº¿ç¨‹ï¼Œé‚£å®ƒåŒä¸€æ—¶åˆ»èƒ½æœ‰æ•ˆä½¿ç”¨çš„åªæœ‰å¤„ç†å™¨ä¼—å¤šæ ¸ä¸­çš„ä¸€ä¸ªã€‚\nè¿™éœ€è¦æˆ‘ä»¬åœ¨ç¼–å†™ä»£ç çš„æ—¶å€™æ³¨æ„ä½¿ç”¨å¤šçº¿ç¨‹å¹¶å‘ç¼–ç¨‹ï¼Œä»¥å……åˆ†å‘æŒ¥è®¡ç®—æœºçš„å¤„ç†èƒ½åŠ›ã€‚\nçº¿ç¨‹çš„é—®é¢˜\nJava çº¿ç¨‹ç›´æ¥è®¿é—®æ“ä½œç³»ç»Ÿçš„çº¿ç¨‹ã€‚è¿™é‡Œä¸»è¦çš„é—®é¢˜åœ¨äºåˆ›å»ºå’Œô³’é™¤æ“ä½œç³»ç»Ÿçº¿ç¨‹çš„ä»£ä»·å¾ˆ å¤§(æ¶‰åŠé¡µè¡¨æ“ä½œ)ï¼Œå¹¶ä¸”ä¸€ä¸ªç³»ç»Ÿä¸­èƒ½åˆ›å»ºçš„çº¿ç¨‹æ•°ç›®æ˜¯æœ‰é™çš„ã€‚å¦‚æœåˆ›å»ºçš„çº¿ç¨‹æ•°è¶…è¿‡æ“ä½œç³»ç»Ÿçš„é™åˆ¶ï¼Œå¾ˆå¯èƒ½å¯¼è‡´ Java åº”ç”¨è«åå…¶å¦™åœ°å´©æºƒï¼Œå› æ­¤ä½ éœ€è¦ç‰¹åˆ«ç•™æ„ï¼Œä¸è¦åœ¨çº¿ç¨‹è¿è¡Œæ—¶ æŒç»­ä¸æ–­åœ°åˆ›å»ºæ–°çº¿ç¨‹ã€‚å¹¶ä¸”æ“ä½œç³»ç»Ÿ(ä»¥åŠ Java)çš„çº¿ç¨‹æ•°éƒ½è¿œè¿œå¤§äºç¡¬ä»¶çº¿ç¨‹æ•°ï¼Œå› æ­¤å³ä¾¿ä¸€äº›æ“ä½œç³»ç»Ÿçº¿ç¨‹è¢«é˜»å¡äº†ï¼Œæˆ–è€…å¤„äºç¡çœ çŠ¶æ€ã€‚\nçº¿ç¨‹æ± çš„ä¼˜åŠ¿\nJava çš„ ExecutorService æä¾›äº†ä¸€ä¸ªæ¥å£ï¼Œç”¨æˆ·å¯ä»¥æäº¤ä»»åŠ¡å¹¶è·å–å®ƒä»¬çš„æ‰§è¡Œç»“æœã€‚æ–°åˆ›å»º çš„çº¿ç¨‹ä¼šè¢«æ”¾å…¥ä¸€ä¸ªçº¿ç¨‹æ± ï¼Œæ¯æ¬¡æœ‰æ–°ä»»åŠ¡è¯·æ±‚æ—¶ï¼Œä»¥å…ˆæ¥å…ˆåˆ°çš„ôµ¼ç•¥ä»çº¿ç¨‹æ± ä¸­é€‰å–æœªè¢«ä½¿ç”¨ çš„çº¿ç¨‹æ‰§è¡Œæäº¤çš„ä»»åŠ¡è¯·æ±‚ã€‚ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ä¹‹åï¼Œè¿™äº›çº¿ç¨‹åˆä¼šè¢«å½’è¿˜ç»™çº¿ç¨‹æ± ã€‚è¿™ç§æ–¹å¼çš„æœ€å¤§ä¼˜åŠ¿åœ¨äºèƒ½ä»¥å¾ˆä½çš„æˆæœ¬å‘çº¿ç¨‹æ± æäº¤ä¸Šåƒä¸ªä»»åŠ¡ï¼ŒåŒæ—¶ä¿è¯ç¡¬ä»¶åŒ¹é…çš„ä»»åŠ¡æ‰§è¡Œã€‚\nçº¿ç¨‹æ± çš„ä¸è¶³\nä½¿ç”¨ k ä¸ªçº¿ç¨‹çš„çº¿ç¨‹æ± åªèƒ½å¹¶å‘åœ°æ‰§è¡Œ k ä¸ªä»»åŠ¡\næäº¤çš„ä»»åŠ¡å¦‚æœè¶…è¿‡è¿™ä¸ªé™åˆ¶ï¼Œçº¿ç¨‹æ± ä¸ä¼šåˆ›å»ºæ–°çº¿ç¨‹å»æ‰§è¡Œè¯¥ä»»åŠ¡ï¼Œè¿™äº›è¶…é™çš„ä»»åŠ¡ä¼šè¢«åŠ å…¥ç­‰å¾…é˜Ÿåˆ—ï¼Œç›´åˆ°ç°æœ‰ä»»åŠ¡æ‰§è¡Œ å®Œæ¯•æ‰ä¼šé‡æ–°è°ƒåº¦ç©ºé—²çº¿ç¨‹å»æ‰§è¡Œæ–°ä»»åŠ¡ã€‚\né‡‡ç”¨è¿™ç§æ–¹å¼æ—¶ä½  éœ€è¦ç‰¹åˆ«ç•™æ„ä»»åŠ¡æ˜¯å¦å­˜åœ¨ä¼šè¿›å…¥ç¡çœ ã€ç­‰å¾… I/O ç»“ô°…æˆ–è€…ç­‰å¾…ç½‘ç»œè¿æ¥çš„æƒ…å†µã€‚ä¸€æ—¦å‘ ç”Ÿé˜»å¡å¼ I/Oï¼Œè¿™äº›ä»»åŠ¡å ç”¨äº†çº¿ç¨‹ï¼Œå´ä¼šç”±äºç­‰å¾…æ— æ³•æ‰§è¡Œæœ‰ä»·å€¼çš„å·¥ä½œã€‚\nä¾‹å¦‚ï¼Œå‡å¦‚CPUæœ‰4ä¸ªç¡¬ä»¶çº¿ç¨‹ï¼Œä½ åˆ›å»ºäº†ä¸€ä¸ªå¤§å°ä¸º5çš„çº¿ç¨‹æ± ï¼Œä½ ä¸€æ¬¡æ€§æäº¤äº† 20 ä¸ªæ‰§è¡Œä»»åŠ¡ï¼Œå¸Œæœ›è¿™20ä¸ªä»»åŠ¡å¹¶å‘çš„æ‰§è¡Œï¼Œç›´åˆ°æ‰€æœ‰ 20 ä¸ªä»»åŠ¡æ‰§è¡Œå®Œæ¯•ã€‚å‡è®¾é¦–æ‰¹æäº¤çš„ çº¿ç¨‹ä¸­æœ‰ 3 ä¸ªçº¿ç¨‹è¿›å…¥äº†é˜»å¡çŠ¶æ€æˆ–è€…åœ¨ç­‰å¾… I/Oï¼Œé‚£å°±åªå‰©2 ä¸ªçº¿ç¨‹å¯ä»¥æœåŠ¡å‰©ä¸‹çš„ 15 ä¸ªä»»åŠ¡äº†ã€‚å¦‚æ­¤ä¸€æ¥ï¼Œä½ åªèƒ½å–å¾—ä½ ä¹‹å‰é¢„æœŸååé‡çš„ä¸€åŠ(å¦‚æœä½ åˆ›å»ºçš„çº¿ç¨‹æ± ä¸­å·¥ ä½œçº¿ç¨‹æ•°ä¸º 8ï¼Œé‚£ä¹ˆè¿˜æ˜¯èƒ½å–å¾—åŒæ ·é¢„æœŸååé‡çš„)ã€‚\né€šå¸¸æƒ…å†µä¸‹ï¼ŒJava ä» main è¿”å›ä¹‹å‰ï¼Œéƒ½ä¼šç­‰å¾…æ‰€æœ‰çš„çº¿ç¨‹æ‰§è¡Œå®Œæ¯•ï¼Œä»è€Œé¿å…è¯¯æ€æ­£åœ¨æ‰§è¡Œå…³é”®ä»£ç çš„çº¿ç¨‹ã€‚\nå®é™…æ“ä½œæ—¶çš„ä¸€ä¸ªå¥½ä¹ æƒ¯æ˜¯åœ¨é€€å‡ºç¨‹åºæ‰§è¡Œä¹‹å‰ï¼Œç¡®ä¿å…³é—­æ¯ä¸€ä¸ªçº¿ç¨‹æ± ã€‚\nä½ å¸Œæœ›é‡‡ç”¨çº¿ç¨‹æŠ€æœ¯ç†ç¨‹åºçš„ç»“æ„ï¼Œä»¥ä¾¿åœ¨éœ€è¦çš„æ—¶å€™äº«å—ç¨‹åºå¹¶è¡Œå¸¦æ¥çš„å¥½å¤„ï¼Œç”Ÿæˆè¶³å¤Ÿå¤šçš„ä»»åŠ¡ä»¥å……åˆ†åˆ©ç”¨æ‰€æœ‰ç¡¬ä»¶çº¿ç¨‹ã€‚è¿™æ„å‘³ç€ä½ éœ€è¦å¯¹ç¨‹åºè¿›è¡Œåˆ‡åˆ†ã€‚\nä½¿å¤šçº¿ç¨‹çš„æ¼”è¿›è¿‡ç¨‹ å¤šäºå‡½æ•° f(x) å’Œ g(x)ï¼Œåˆ†åˆ«ä½¿ç”¨ä¸€ä¸ªçº¿ç¨‹å»å¹¶å‘æ‰§è¡Œã€‚\nä½¿ç”¨Runnableï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 class ThreadExample { public static void main(String[] args) throws InterruptedException { int x = 1337; Result result = new Result(); Thread t1 = new Thread(() -\u0026gt; { result.left = f(x); } ); Thread t2 = new Thread(() -\u0026gt; { result.right = g(x); }); t1.start(); t2.start(); t1.join(); t2.join(); System.out.println(result.left + result.right); } private static class Result { private int left; private int right; } } ä½¿ç”¨çº¿ç¨‹æ± å’ŒFutureï¼š\n1 2 3 4 5 6 7 8 9 10 public class ExecutorServiceExample { public static void main(String[] args) throws ExecutionException, InterruptedException { int x = 1337; ExecutorService executorService = Executors.newFixedThreadPool(2); Future\u0026lt;Integer\u0026gt; y = executorService.submit(() -\u0026gt; f(x)); Future\u0026lt;Integer\u0026gt; z = executorService.submit(() -\u0026gt; g(x)); System.out.println(y.get() + z.get()); executorService.shutdown(); } } ç„¶è€Œï¼Œè¿™æ®µä»£ç ä¾ç„¶å—åˆ°äº†æ˜¾å¼è°ƒç”¨ submit æ—¶ä½¿ç”¨çš„æ¨¡æ¿ä»£ç çš„æ±¡æŸ“ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå…¶å®è¿™ä¸ªæ¯ç‡¥çš„æ“ä½œå…¶å®ä¹Ÿæ˜¯å¯ä»¥çœç•¥çš„ã€‚\nè§£å†³è¿™ä¸ªé—®é¢˜çš„ç­”æ¡ˆæ˜¯å°† API ç”±åŒæ­¥ API å˜ä¸ºæ­¥ APIï¼Œä¹Ÿå°±æ˜¯å¢åŠ å¼‚æ­¥çš„APIå‡½æ•°ã€‚\nä½¿ç”¨çº¿ç¨‹æ± å’ŒCompletableFutureï¼š\n1 2 3 4 5 6 7 8 9 10 11 public class ExecutorServiceExample { public static void main(String[] args) throws ExecutionException, InterruptedException { int x = 1337; ExecutorService executorService = Executors.newFixedThreadPool(2); CompletableFuture\u0026lt;Integer\u0026gt; y = CompletableFuture.supplyAsync(() -\u0026gt; f(x),executorService); CompletableFuture\u0026lt;Integer\u0026gt; z = CompletableFuture.supplyAsync(() -\u0026gt; g(x),executorService); CompletableFuture\u0026lt;Integer\u0026gt; result = y.thenCombine(z,(y_val,z_val) -\u0026gt; {return y_val + z_val;} ) System.out.println(result.get()); executorService.shutdown(); } } ä½¿ç”¨ååº”å¼çš„APIï¼š(åŸºäºå›è°ƒå‡½æ•°)\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 public class CallbackStyleExample { public static void main(String[] args) { System.out.println((result.left + result.right)); int x = 1337; Result result = new Result(); f(x, (int y) -\u0026gt; { result.left = y; }); g(x, (int z) -\u0026gt; { result.right = z; System.out.println((result.left + result.right)); 7 }); } } æ³¨æ„ï¼Œååº”å¼ç¼–ç¨‹å…è®¸æ–¹æ³• f å’Œ g å¤šæ¬¡è°ƒç”¨å®ƒä»¬çš„å›è°ƒå‡½æ•° dealWithResultã€‚è€ŒåŸå§‹ç‰ˆ\næœ¬çš„ f å’Œ g ä½¿ç”¨ return è¿”å›ç»“æœï¼Œreturn åªèƒ½è¢«è°ƒç”¨ä¸€æ¬¡ã€‚Future ä¸æ­¤ç±»ä¼¼ï¼Œå®ƒä¹Ÿåªèƒ½å®Œ æˆä¸€æ¬¡ï¼Œæ‰§è¡Œ Future çš„è®¡ç®—ç»“æœå¯ä»¥é€šè¿‡ get()æ–¹æ³•è·å–ã€‚\nå¯èƒ½é˜»å¡çº¿ç¨‹çš„å› ç´  é˜»å¡å¼æ“ä½œå¯ä»¥åˆ†ä¸ºä¸¤ç±»:\nä¸€ç±»æ˜¯ç­‰å¾…å¦ä¸€ä¸ªä»»åŠ¡æ‰§è¡Œï¼Œè­¬å¦‚è°ƒç”¨ Future çš„ get()æ–¹æ³•; å¦ä¸€ç±»æ˜¯ç­‰å¾…ä¸å¤–éƒ¨äº¤äº’çš„è¿”å›ï¼Œè­¬å¦‚ä»ç½‘ç»œã€æ•°æ®åº“æœåŠ¡å™¨æˆ–è€…é”®ç›˜è¿™æ ·çš„äººæœºæ¥å£è¯»å–æ•°æ®ã€‚ ç¡çœ ä¹Ÿä¼šé˜»å¡ã€‚\nå­¦ä¹ å¹¶å‘çš„æ¨¡å¼ é€šå¸¸ï¼Œè®¾è®¡å’Œç†è§£å¹¶å‘ç³»ç»Ÿæœ€å¥½çš„æ–¹å¼æ˜¯ä½¿ç”¨å›¾å½¢ã€‚æˆ‘ä»¬å°†è¿™ç§æŠ€æœ¯ç§°çº¿ç¨‹-ç®¡é“ (box-and-channel)æ¨¡å‹ã€‚\nè¿™å…¶å®æ˜¯è§‚å¯Ÿè€…æ¨¡å¼çš„ä¸€ç§å®ç°ã€‚\nä½¿ç”¨CompletableFuture CompletableFutureå’Œå¹¶è¡Œæµçš„å®ç°æ–¹å¼ç±»ä¼¼çš„ï¼Œå®ƒä»¬å†…éƒ¨éƒ½æ˜¯è°ƒç”¨å¤šçº¿ç¨‹è¿›è¡Œæ‰§è¡Œï¼Œç„¶è€ŒCompletableFutureå¯ä»¥å…è®¸è®¾ç½®çº¿ç¨‹æ± ï¼ŒæŒ‡å®šçº¿ç¨‹çš„æ•°é‡ï¼ˆçº¿ç¨‹æ± çš„å¤§å°ï¼‰ï¼Œå¹¶ä¸”æ”¯æŒç»„åˆæ¨¡å¼ã€‚\nå¹¶è¡Œæµæ˜¯æŠŠå†…å®¹æ‹†åˆ†æˆå¤šä¸ªæ•°æ®å—ï¼Œç”¨ä¸åŒçº¿ç¨‹å¤„ç†æ¯ä¸ªæ•°æ®å—çš„æ•°æ®ã€‚è¿™æ ·ä»¥æ¥ï¼Œå°±å¯ä»¥è‡ªåŠ¨çš„æŠŠå·¥ä½œçš„è´Ÿè·åˆ†é…åˆ°å¤šæ ¸å¤„ç†å™¨çš„æ‰€æœ‰æ ¸ï¼Œè®©ä»–ä»¬éƒ½å¿™èµ·æ¥ã€‚\nä½¿ç”¨Asyncè¿˜æ˜¯åŒæ­¥APIçš„åˆ¤æ–­æ ‡å‡†ï¼š\nä¸€èˆ¬æƒ…å†µä¸‹æ“ä½œä¸æ¶‰åŠè¿œç¨‹æœåŠ¡å’ŒI/Oæ“ä½œï¼Œå¯ä»¥é‡‡ç”¨åŒæ­¥API å…¶ä»–è€—æ—¶çš„æ“ä½œå¯ä»¥ä½¿ç”¨å¼‚æ­¥APIã€‚ é€šå¸¸è€Œè¨€ï¼Œåç§°ä¸­ä¸å¸¦Asyncçš„æ–¹æ³•å’Œå®ƒçš„å‰ä¸€ä¸ªä»»åŠ¡ä¸€æ ·ï¼Œåœ¨åŒä¸€ä¸ªçº¿ç¨‹ä¸­è¿è¡Œï¼Œè€Œåç§°ä»¥Asyncç»“å°¾çš„æ–¹æ³•ä¼šå°†åç»­çš„ä»»åŠ¡æäº¤åˆ°ä¸€ä¸ªçº¿ç¨‹æ± ï¼Œæ‰€ä»¥æ¯ä¸ªä»»åŠ¡æ˜¯ç”±ä¸åŒçš„çº¿ç¨‹å¤„ç†çš„ã€‚å¯¹äºä¸å¤æ‚çš„å»¶è¿Ÿä½çš„æ“ä½œï¼Œå°½é‡å¤ç”¨åŒä¸€ä¸ªè¿›ç¨‹ï¼Œå‡å°‘è¿›ç¨‹é—´åˆ‡æ¢çš„å¼€é”€ã€‚\nJavaä¸­çš„çº¿ç¨‹æ±  å‚è€ƒï¼šã€ŠJavaå¹¶å‘ç¼–ç¨‹çš„è‰ºæœ¯ã€‹\nçº¿ç¨‹æ± çš„å¥½å¤„ é™ä½èµ„æºæŸè€—ã€‚ æé«˜å“åº”é€Ÿåº¦ã€‚ æé«˜çº¿ç¨‹çš„å¯ç®¡ç†æ€§ã€‚ Reference:\nå½»åº•ç†è§£Javaçš„Futureæ¨¡å¼ - å¤§è¯šæŒš - åšå®¢å›­ CompletableFutureçš„åŸç†ä¸å®è·µ-è®°å¤–å–å•†å®¶ç«¯APIçš„å¼‚æ­¥åŒ– Java 8 CompletableFuture æ•™ç¨‹ - SegmentFault æ€å¦ å…³äºå®ç°Runnableæ¥å£ä¸èƒ½æŠ›å¼‚å¸¸åªèƒ½æ•è·å¼‚å¸¸åŸå› _å°æ—å­çš„åšå®¢-CSDNåšå®¢ Java Callable and Future Tutorial | CalliCoder ~ Javaå¯è°ƒç”¨å’Œæœªæ¥æ•™ç¨‹ | CalliCoder ä½¿ç”¨CompletableFutureå¼‚æ­¥ç»„è£…æ•°æ® Java: Writing asynchronous code with CompletableFuture Java8â€”â€”å¼‚æ­¥ç¼–ç¨‹ - Mr.å¢¨æ–—çš„åšå®¢ | MoDou Blog ","description":"CompletableFutureä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼å°è£…äº†å¤šçº¿ç¨‹çš„å¹¶å‘ï¼Œæ–¹ä¾¿å¼€å‘äººå‘˜çš„ä½¿ç”¨ã€‚","id":4,"section":"posts","tags":["java","CompletableFuture","å¼€å‘æ–¹æ³•è®º"],"title":"CompletableFutureä½¿ç”¨ç¬”è®°","uri":"https://hugo.jiahongw.com/zh/posts/dev/completable-future/"},{"content":" åŸåˆ™ è®¾è®¡åŸåˆ™ å•ä¸€èŒè´£åŸåˆ™\nSingle Responsibility Principleï¼Œä¸€ä¸ªç±»åº”è¯¥åªè´Ÿè´£ä¸€ä¸ªèŒè´£ã€‚\nå¼€é—­åŸåˆ™\nOpen-Closed Principle, OCPï¼Œä¸€ä¸ªè½¯ä»¶å®ä½“åº”å½“å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­ã€‚å³è½¯ä»¶å®ä½“åº”å°½é‡åœ¨ä¸ä¿®æ”¹åŸæœ‰ä»£ç çš„æƒ…å†µä¸‹è¿›è¡Œæ‰©å±•ã€‚\né‡Œæ°æ›¿æ¢åŸåˆ™\nLiskov Substitution Principle, LSPï¼Œæ‰€æœ‰å¼•ç”¨åŸºç±»ï¼ˆçˆ¶ç±»ï¼‰çš„åœ°æ–¹å¿…é¡»èƒ½é€æ˜åœ°ä½¿ç”¨å…¶å­ç±»çš„å¯¹è±¡ã€‚ï¼ˆå…¶å®å°±æ˜¯ä½¿ç”¨å¤šæ€ï¼‰\nä¾èµ–æ³¨å…¥åŸåˆ™\nDependence Inversion Principle, DIPï¼ŒæŠ½è±¡ä¸åº”è¯¥ä¾èµ–äºç»†èŠ‚ï¼Œç»†èŠ‚åº”å½“ä¾èµ–äºæŠ½è±¡ã€‚æ¢è¨€ä¹‹ï¼Œè¦é’ˆå¯¹æ¥å£ç¼–ç¨‹ï¼Œè€Œä¸æ˜¯é’ˆå¯¹å®ç°ç¼–ç¨‹ã€‚\nå…³é”®ç‚¹ä¸ºï¼š\né«˜å±‚æ¨¡å—ä¸åº”è¯¥ä¾èµ–ä½å±‚æ¨¡å—ï¼Œä¸¤è€…éƒ½åº”è¯¥ä¾èµ–å…¶æŠ½è±¡ æŠ½è±¡ä¸åº”è¯¥ä¾èµ–ç»†èŠ‚ ç»†èŠ‚åº”è¯¥ä¾èµ–æŠ½è±¡ æ¥å£åˆ†ç¦»åŸåˆ™\nInterface Segregation Principle, ISPï¼Œä½¿ç”¨å¤šä¸ªä¸“é—¨çš„æ¥å£ï¼Œè€Œä¸ä½¿ç”¨å•ä¸€çš„æ€»æ¥å£ï¼Œå³å®¢æˆ·ç«¯ä¸åº”è¯¥ä¾èµ–é‚£äº›å®ƒä¸éœ€è¦çš„æ¥å£ã€‚\nè¿ªç±³ç‰¹åŸåˆ™\nLaw of Demeter åˆåLeast Knowledge Principle, LoDï¼Œä¸€ä¸ªè½¯ä»¶å®ä½“åº”å½“å°½å¯èƒ½å°‘åœ°ä¸å…¶ä»–å®ä½“å‘ç”Ÿç›¸äº’ä½œç”¨ã€‚\nä½“ç°äº†å°è£…çš„æ€æƒ³ã€‚\nè®¾è®¡æ¨¡å¼åˆ†ç±»ä¸€è§ˆ å•ä¾‹æ¨¡å¼ å•ä¾‹æ¨¡å¼: å•ä¾‹æ¨¡å¼æ˜¯ä¸€ç§åˆ›å»ºå‹è®¾è®¡æ¨¡å¼ï¼Œ è®©ä½ èƒ½å¤Ÿä¿è¯ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œ å¹¶æä¾›ä¸€ä¸ªè®¿é—®è¯¥å®ä¾‹çš„å…¨å±€èŠ‚ç‚¹ å®šä¹‰ï¼š\nå•ä¾‹è®¾è®¡æ¨¡å¼ï¼ˆSingleton Design Patternï¼‰ç†è§£èµ·æ¥éå¸¸ç®€å•ã€‚ä¸€ä¸ªç±»åªå…è®¸åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼ˆæˆ–è€…å®ä¾‹ï¼‰ï¼Œé‚£è¿™ä¸ªç±»å°±æ˜¯ä¸€ä¸ªå•ä¾‹ç±»ï¼Œè¿™ç§è®¾è®¡æ¨¡å¼å°±å«ä½œå•ä¾‹è®¾è®¡æ¨¡å¼ï¼Œç®€ç§°å•ä¾‹æ¨¡å¼ã€‚\næ¶æ„ï¼šæ¯”è¾ƒç®€å•ï¼Œä¸ç”»äº†ã€‚\nä½¿ç”¨åœºæ™¯ï¼š\nçº¿ç¨‹æ±  ç¼“å­˜ å¯¹è¯æ¡† æ³¨å†Œè¡¨å¯¹è±¡ æ—¥å¿—å¯¹è±¡ çŠ¶æ€æ¨¡å¼ çŠ¶æ€æ¨¡å¼: çŠ¶æ€æ¨¡å¼å…è®¸å¯¹è±¡åœ¨å†…éƒ¨çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶æ”¹å˜å®ƒçš„è¡Œä¸º å®šä¹‰ï¼š\nçŠ¶æ€æ¨¡å¼å…è®¸å¯¹è±¡åœ¨å†…éƒ¨çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶æ”¹å˜å®ƒçš„è¡Œä¸ºã€‚ï¼ˆå¯¹è±¡çœ‹èµ·æ¥å¥½åƒæ”¹å˜äº†å®ƒçš„ç±»ï¼‰\næ¶æ„ï¼š\nå®ç°æ–¹æ³•ï¼š\nåˆ†æ”¯é€»è¾‘æ³• æŸ¥è¡¨æ³• çŠ¶æ€æ¨¡å¼ ä½¿ç”¨åœºæ™¯ï¼š\nçŠ¶æ€æ¨¡å¼ä¸€èˆ¬ç”¨æ¥å®ç°çŠ¶æ€æœºï¼Œè€ŒçŠ¶æ€æœºå¸¸ç”¨åœ¨æ¸¸æˆã€å·¥ä½œæµå¼•æ“ç­‰ç³»ç»Ÿå¼€å‘ä¸­ã€‚æˆ–è€…åœ¨ä¸€äº›å•æ®çš„æµè½¬ä¸Šä¹Ÿå¯ä»¥ä½¿ç”¨çŠ¶æ€æ¨¡å¼ã€‚ çŠ¶æ€æ¨¡å¼å¯ä»¥éšç€æ—¶é—´æ”¹å˜çŠ¶æ€ï¼Œä»è€Œæ‰§è¡Œä¸åŒçš„è¡Œä¸ºï¼›ä½†æ˜¯ç­–ç•¥æ¨¡å¼æ˜¯äº‹å…ˆå‡†å¤‡å¥½å¤šç§ç­–ç•¥ï¼Œåœ¨å¼€å§‹çš„æ—¶å€™é€‰æ‹©äº†ä¸€ç§ç­–ç•¥å°±æ˜¯ä¸€ç›´ä½¿ç”¨è¿™ç§ç­–ç•¥è¿›è¡Œå¤„ç†ã€‚ï¼ˆå¯ä»¥è¯´ï¼ŒçŠ¶æ€æ¨¡å¼è¿è¡Œæ—¶ä½¿ç”¨äº†æ‰€æœ‰çš„çŠ¶æ€ï¼Œè€Œç­–ç•¥æ¨¡å¼åœ¨è¿è¡Œæ—¶åªä½¿ç”¨äº†ä¸€ç§ç­–ç•¥ï¼‰ ç­–ç•¥æ¨¡å¼ ç­–ç•¥æ¨¡å¼: ç­–ç•¥æ¨¡å¼å®šä¹‰äº†ç®—æ³•æ—ï¼Œåˆ†åˆ«å°è£…èµ·æ¥ï¼Œè®©ä»–ä»¬ä¹‹é—´å¯ä»¥äº’ç›¸æ›¿æ¢ å®šä¹‰ï¼š\nç­–ç•¥æ¨¡å¼å®šä¹‰äº†ç®—æ³•æ—ï¼Œåˆ†åˆ«å°è£…èµ·æ¥ï¼Œè®©ä»–ä»¬ä¹‹é—´å¯ä»¥äº’ç›¸æ›¿æ¢ã€‚æ­¤æ¨¡å¼è®©ç®—æ³•çš„å˜åŒ–ç‹¬ç«‹äºä½¿ç”¨ç®—æ³•çš„å®¢æˆ·ã€‚\næ¶æ„ï¼š\nç­–ç•¥å®šä¹‰ï¼š\nclassDiagram Strategy \u0026lt;|-- StrategyA : implements Strategy \u0026lt;|-- StrategyB : implements Strategy : algorithmInterface() StrategyA : algorithmInterface() StrategyB : algorithmInterface() ç­–ç•¥åˆ›å»ºï¼š\nclassDiagram Strategy \u0026lt;|-- StrategyA : implements Strategy \u0026lt;|-- StrategyB : implements Strategy : algorithmInterface() StrategyA : algorithmInterface() StrategyB : algorithmInterface() StrategyFactory --\u0026gt; Strategy : å…³è” StrategyFactory : getStrategy(type) æ— çŠ¶æ€ç­–ç•¥ï¼šæ— çŠ¶æ€çš„ç­–ç•¥å› ä¸ºä¸ä¼šå˜ï¼Œå¯ä»¥è¿›è¡Œç¼“å­˜ï¼Œä¸€å¼€å§‹å°±åˆ›å»ºå¥½æ‰€æœ‰çš„ç­–ç•¥å³å¯ã€‚ï¼ˆç›´æ¥ä»mapä¸­æ‹¿å–ï¼‰ æœ‰çŠ¶æ€ç­–ç•¥ï¼šæœ‰çŠ¶æ€çš„ç­–ç•¥å› ä¸ºä¼šæ”¹å˜ï¼Œæ‰€ä»¥æ¯æ¬¡åˆ›å»ºéƒ½éœ€è¦æ˜¯ä¸€ä¸ªæœ€æ–°çš„ç­–ç•¥å¯¹è±¡ã€‚ï¼ˆåœ¨å·¥å‚ç±»ä¸­å­˜åœ¨if-elseåˆ¤æ–­ï¼‰ ç­–ç•¥ä½¿ç”¨ï¼š\nâ€‹\ngraph TD; æ‹¿å–ç­–ç•¥:getStrategy--\u0026gt;ä½¿ç”¨ç­–ç•¥æ¥å£:algorithmInterface; ä»å·¥å‚ç±»ä¸­æ‹¿å–ç­–ç•¥ã€‚ è°ƒç”¨ç­–ç•¥å¯¹åº”çš„æ¥å£å‡½æ•°ã€‚ ä½¿ç”¨åœºæ™¯ï¼š\né¿å…å†—é•¿çš„if-elseæˆ–switchåˆ†æ”¯åˆ¤æ–­ æä¾›æ¡†æ¶çš„æ‰©å±•ç‚¹ æ¨¡ç‰ˆæ–¹æ³•æ¨¡å¼ æ¨¡ç‰ˆæ–¹æ³•æ¨¡å¼: æ¨¡æ¿æ–¹æ³•æ¨¡å¼æ˜¯å¯¹æŠ½è±¡çš„æœ‰ä¸€ç§ä½“ç°ï¼Œè¿™æ¬¡ï¼ŒæŠ½è±¡çš„æ˜¯ç®—æ³•æµç¨‹ã€‚æ¨¡æ¿æ–¹æ³•å®šä¹‰äº†ä¸€ä¸ªç®—æ³•çš„æ­¥éª¤ï¼Œå°†å…è®¸å­ç±»ä¸ºä¸€ä¸ªæˆ–è€…å¤šä¸ªæ­¥éª¤æä¾›å®ç° å®šä¹‰ï¼š\næ¨¡æ¿æ–¹æ³•æ¨¡å¼åœ¨ä¸€ä¸ªæ–¹æ³•ä¸­å®šä¹‰ä¸€ä¸ªç®—æ³•çš„æ¶æ„ï¼Œè€Œå°†ä¸€äº›æ­¥éª¤å»¶è¿Ÿåˆ°å­ç±»ä¸­ã€‚æ¨¡æ¿æ–¹æ³•ä½¿å¾—å­ç±»å¯ä»¥åœ¨ä¸æ”¹å˜ç®—æ³•ç»“æ„çš„æƒ…å†µä¸‹ï¼Œé‡æ–°å®šä¹‰ç®—æ³•ä¸­çš„æŸäº›æ­¥éª¤ã€‚\næ¶æ„ï¼š\nä½¿ç”¨åœºæ™¯ï¼š\nå¤ç”¨\nå› ä¸ºæ¨¡æ¿æ–¹æ³•æ˜¯åŸºäºç»§æ‰¿å®ç°ï¼Œå¯ä»¥å°†å›ºå®šçš„ç®—æ³•æ­¥éª¤å°è£…åœ¨æŠ½è±¡ç±»ï¼ŒæŠ½è±¡ç±»å¯ä»¥å®ç°ä¸€äº›å›ºå®šçš„æ­¥éª¤ï¼Œå­ç±»ç›´æ¥è¿›è¡Œå¤ç”¨å°±å¯ä»¥äº†ã€‚\næ¡†æ¶æ‹“å±•æ€§\nHttpServletçš„service()æ–¹æ³•å°±æ˜¯ä¸€ä¸ªæ¨¡æ¿æ–¹æ³•ï¼Œå®ƒå®ç°äº†æ•´ä¸ªhttpè¯·æ±‚çš„æ‰§è¡Œæµç¨‹ï¼Œè€ŒdoGet()å’ŒdoPost()æ˜¯æ¨¡æ¿ä¸­å¯ä»¥ç”±å­ç±»è‡ªå®šä¹‰çš„éƒ¨åˆ†ã€‚ç›¸å½“äºæ¡†æ¶ä¸ºç”¨æˆ·æä¾›äº†æ‹“å±•ç‚¹ï¼Œä½¿å¾—ä¸éœ€è¦ä¿®æ”¹æ¡†æ¶æºç å°±èƒ½å°†æ‹“å±•ç‚¹æ·»åŠ åˆ°æ¡†æ¶ä¸­ã€‚ Junitæ¡†æ¶ä¹Ÿæä¾›äº†ä¸€äº›åŠŸèƒ½æ‹“å±•ç‚¹setUp()å’ŒsetDown()ï¼Œå¯ä»¥åœ¨å¼€å§‹å’Œç»“æŸçš„æ—¶å€™åšä¸€äº›äº‹æƒ…ï¼Œè€ŒrunBase()å‡½æ•°æ˜¯ä¸€ä¸ªæ¨¡æ¿æ–¹æ³•ï¼Œå®šä¹‰äº†æ‰§è¡Œæµ‹è¯•ç”¨ä¾‹çš„æ•´ä½“æµç¨‹ã€‚ ç­–ç•¥æ¨¡å¼å’Œæ¨¡æ¿æ–¹æ³•æ¨¡å¼éƒ½å°è£…ç®—æ³•ï¼Œä½†æ˜¯ä¸€ä¸ªç»„åˆï¼Œä¸€ä¸ªç»§æ‰¿ã€‚ å·¥å‚æ–¹æ³•æ˜¯æ¨¡æ¿æ–¹æ³•çš„ä¸€ä¸ªç‰¹æ®Šç‰ˆæœ¬ã€‚ é€‚é…å™¨æ¨¡å¼ é€‚é…å™¨ä½¿å¾—æ–°çš„è°ƒç”¨å¯ä»¥é€‚é…è€çš„æ¥å£è€Œä¸éœ€è¦ä¿®æ”¹æ—§çš„ä»£ç ã€‚è¾¾åˆ°äº†å¯¹æ‹“å±•å¼€å‘ï¼Œå¯¹ä¿®æ”¹å…³é—­çš„è®¾è®¡åŸåˆ™ã€‚\nå®šä¹‰ï¼š\né€‚é…å™¨å°†ä¸€ä¸ªç±»çš„æ¥å£ï¼Œè½¬æ¢æˆå®¢æˆ·ç«¯æœŸæœ›çš„å¦ä¸€ä¸ªæ¥å£ã€‚é€‚é…å™¨è®©åŸæœ¬ä¸å…¼å®¹çš„ç±»è¾¾åˆ°å…¼å®¹ã€‚ï¼ˆå¯ä»¥è®©å®¢æˆ·ä»å®ç°çš„æ¥å£è§£è€¦ï¼‰\nUSBè½¬æ¥å¤´å°±æ˜¯ä¸€ä¸ªé€‚é…å™¨ï¼\næ¶æ„:\nåœ¨æ”¯æŒå¤šé‡ç»§æ‰¿çš„è¯­è¨€ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ç±»é€‚é…å™¨æ˜¯è¿™æ ·çš„ï¼š\nä½¿ç”¨åœºæ™¯ï¼š\nä¸€èˆ¬æ¥è¯´ï¼Œé€‚é…å™¨æ¨¡å¼å¯ä»¥çœ‹ä½œæ˜¯ä¸€å®—â€œè¡¥å¿æ¨¡å¼â€ï¼Œç”¨æ¥è¡¥æ•‘è®¾è®¡ä¸Šçš„ç¼ºé™·ï¼Œä¹Ÿæ˜¯ä¸€ç§æ— å¥ˆä¹‹ä¸¾ã€‚ä¸€èˆ¬ä¹Ÿä¸ä¼šä¼˜å…ˆæ¨èä½¿ç”¨è¿™ç§æ¨¡å¼ã€‚ å°è£…æœ‰ç¼ºé™·çš„æ¥å£\nä¾‹å¦‚å¤–éƒ¨å¼•å…¥çš„æ¥å£éƒ½æ˜¯é™æ€æ–¹æ³•ï¼Œä¼šå½±å“ä»£ç çš„å¯æµ‹è¯•æ€§ã€‚æ­¤æ—¶ä½¿ç”¨é€‚é…å™¨è¿›è¡Œé€‚é…æ¥å£ï¼Œå°†é™æ€æ–¹æ³•éƒ½â€œå°è£…â€œèµ·æ¥ï¼Œè¿™æ ·å°±å¯ä»¥è¿›è¡Œæµ‹è¯•äº†ã€‚\nâ€ç¼ºé™·â€œå¯ä»¥ç†è§£ä¸ºåœ¨æŸäº›æ–¹é¢ä¸è¶³ã€‚é€šè¿‡å°è£…ä¹‹åè¾¾åˆ°è§£å†³é—®é¢˜çš„æ•ˆæœå°±æ˜¯é€‚é…å™¨ä½œç”¨ã€‚\næ›¿æ¢ä¾èµ–çš„å¤–éƒ¨ç³»ç»Ÿ\nå½“éœ€è¦å°†å¤–éƒ¨ä¾èµ–çš„ä¸€ä¸ªç³»ç»Ÿæ›¿æ¢æˆå¦ä¸€ä¸ªç³»ç»Ÿçš„æ—¶å€™ï¼Œä¹Ÿå°±æ˜¯ä¸€äº›ç³»ç»Ÿè¿ç§»æˆ–è€…æ¥å£åˆ‡æ¢çš„åœºæ™¯ï¼Œä½¿ç”¨é€‚é…å™¨æ¨¡å¼å¯ä»¥å‡å°‘å¯¹ä»£ç çš„æ”¹åŠ¨ã€‚\nå…¼å®¹è€ç‰ˆæœ¬çš„æ¥å£\nåœ¨è¿›è¡Œä¸€äº›ç‰ˆæœ¬å‡çº§çš„æ—¶å€™ï¼Œå¯¹äºä¸€äº›åºŸå¼ƒçš„æ¥å£ï¼Œæˆ‘ä»¬ä¸ä¼šç›´æ¥åˆ é™¤ï¼Œè€Œæ˜¯æš‚æ—¶ä¿ç•™ï¼Œå¹¶ä¸”æ ‡æ³¨ä¸ºdeprecateï¼Œå¹¶ä¸”å°†å†…éƒ¨å®ç°é€»è¾‘å§”æ‰˜ä¸ºæ–°çš„å®ç°é€»è¾‘ã€‚\nä¾‹å¦‚JDKä¸­åŒ…å«ä¸€ä¸ªéå†é›†åˆå®¹å™¨çš„ç±»Enumerationï¼ŒJDK2.0å¯¹è¿™ä¸ªç±»è¿›è¡Œäº†é‡æ„ï¼Œå°†å®ƒæ”¹åä¸ºIteratorç±»ï¼Œå¹¶ä¸”å¯¹å®ƒçš„ä»£ç å®ç°åšäº†ä¼˜åŒ–ã€‚ä½†æ˜¯å¦‚æœå°†Enumerationç›´æ¥ä»JDK2.0åˆ é™¤ï¼Œé‚£ä¹ˆé‚£äº›ä»JDK1.0å‡çº§åˆ°JDK2.0çš„é¡¹ç›®ï¼Œå°±ä¼šç¼–è¯‘æŠ¥é”™ã€‚ä½†æ˜¯ä¿®æ”¹æ•£è½åœ¨å„å¤„çš„Enumerationè°ƒç”¨åˆå¤šåˆæ‚ï¼Œå¯¼è‡´å‡çº§å›°éš¾ã€‚ä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œå¯ä»¥æš‚æ—¶ä¿ç•™Enumerationç±»ï¼Œå¹¶ä¸”å°†å…¶å†…éƒ¨å®ç°æ›¿æ¢ä¸ºIteratorçš„å®ç°ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 public class Collections { public static Emueration emumeration(final Collection c) { return new Enumeration() { Iterator i = c.iterator(); public boolean hasMoreElments() { return i.hashNext(); } public Object nextElement() { return i.next(): } } } } è£…é¥°å™¨åŒ…è£…ä¸€ä¸ªå®ç°åŒä¸€ä¸ªæ¥å£çš„ç±»å¯¹è±¡ï¼Œæ·»åŠ ä¸€äº›è´£ä»»ï¼Œå¹¶ä¸”æ¥å£ä¸å˜ï¼›é€‚é…å™¨åˆ™åŒ…è£…å®ç°ä¸åŒæ¥å£çš„è¢«é€‚é…çš„å¯¹è±¡ï¼Œè¿›è¡Œæ¥å£çš„è½¬æ¢å’Œé€‚é…ï¼Œä»¥è¾¾åˆ°å…¼å®¹çš„æ•ˆæœã€‚ å·¥å‚æ–¹æ³•æ¨¡å¼ å·¥å‚æ–¹æ³•æ¨¡å¼: ç›¸å¯¹äºç›´æ¥newæ¥åˆ›å»ºå¯¹è±¡ï¼Œç”¨å·¥å‚æ¨¡å¼æ¥åˆ›å»ºä¼šæ›´åŠ çµæ´» å½“æˆ‘ä»¬ä½¿ç”¨newåˆ›å»ºä¸€ä¸ªå¯¹è±¡çš„æ—¶å€™ï¼Œéœ€è¦æŒ‡å®šä¸€ä¸ªå…·ä½“ç±»ï¼Œè¿™å°±æ˜¯é’ˆå¯¹å®ç°è¿›è¡Œç¼–ç¨‹ã€‚å½“æˆ‘ä»¬å°†åˆ›å»ºå¯¹è±¡çš„è¿‡ç¨‹å°è£…æˆä¸€ä¸ªæ–¹æ³•æˆ–è€…æ¥å£çš„æ—¶å€™ï¼Œå°±å¯ä»¥é¿å…é’ˆå¯¹å®ç°ç¼–ç¨‹ï¼Œå˜æˆé’ˆå¯¹æ¥å£ç¼–ç¨‹ã€‚\nå®šä¹‰ï¼š\nå·¥å‚æ–¹æ³•æ¨¡å¼å®šä¹‰äº†ä¸€ä¸ªåˆ›å»ºå¯¹è±¡çš„æ¥å£ï¼Œä½†ç”±å­ç±»å†³å®šè¦å®ä¾‹åŒ–çš„ç±»æ˜¯å“ªä¸€ä¸ªã€‚å·¥å‚æ–¹æ³•å°†å®ä¾‹åŒ–æ¨è¿Ÿåˆ°å­ç±»ã€‚\næ ¸å¿ƒåœ¨å°†åˆ›å»ºå¯¹è±¡çš„è¿‡ç¨‹è§£è€¦å‡ºæ¥ã€‚\næ¶æ„ï¼š\nå·¥å‚æ¨¡å¼ä½“ç°äº†ä¸€ä¸ªåŸåˆ™ï¼šä¾èµ–å€’ç½®åŸåˆ™ã€‚ï¼ˆSpringå«ä¾èµ–åè½¬ï¼‰\nå…³é”®ç‚¹:\nå·¥å‚åªæœ‰ä¸€ä¸ªåŠŸèƒ½â€”â€”åˆ›å»ºæŒ‡å®šçš„ç±»ã€‚ï¼ˆå•ä¸€èŒè´£ï¼‰ å°†åŸæ¥çš„if-elseåˆ¤æ–­ï¼Œè½¬æ¢æˆå¯¹è±¡è¿›è¡Œå¤„ç†ã€‚ æŠ½è±¡æˆä¸€ä¸ªæ–¹æ³• -ã€‹ æŠ½è±¡æˆä¸€ä¸ªç±» -ã€‰ æŠ½è±¡æˆä¸€ä¸ªæ¥å£ æŠ½è±¡å·¥å‚æ¨¡å¼\nå®šä¹‰ï¼šæŠ½è±¡å·¥å‚æ¨¡å¼æä¾›ä¸€ä¸ªæ¥å£ï¼Œç”¨äºåˆ›å»ºç›¸å…³æˆ–è€…ä¾èµ–å¯¹è±¡çš„å®¶æ—ï¼Œè€Œä¸éœ€è¦æ˜ç¡®æŒ‡å®šå…·ä½“ç±»\næ¶æ„ï¼š\nclassDiagram class AbstractFactory { \u0026lt;\u0026lt;interface\u0026gt;\u0026gt; + createProductA() + createProductB() } class ConcreteFactoory1 { + createProductA() + createProductB() } class ConcreteFactoory2 { + createProductA() + createProductB() } class AbstractProductA { \u0026lt;\u0026lt;interface\u0026gt;\u0026gt; } class ProducttA1 class ProducttA2 ProducttA1 ..|\u0026gt; AbstractProductA : å®ç° ProducttA2 ..|\u0026gt; AbstractProductA : å®ç° class AbstractProductB { \u0026lt;\u0026lt;interface\u0026gt;\u0026gt; } class ProducttB1 class ProducttB2 ProducttB1 ..|\u0026gt; AbstractProductB : å®ç° ProducttB2 ..|\u0026gt; AbstractProductB : å®ç° AbstractFactory \u0026lt;|.. ConcreteFactoory1 : å®ç° AbstractFactory \u0026lt;|.. ConcreteFactoory2 : å®ç° ConcreteFactoory1 --\u0026gt;ProducttA1 : åˆ›å»º ConcreteFactoory1 --\u0026gt;ProducttB1 : åˆ›å»º ConcreteFactoory2 --\u0026gt;ProducttA2 : åˆ›å»º ConcreteFactoory2 --\u0026gt;ProducttB2 : åˆ›å»º æŠ½è±¡å·¥å‚æ¨¡å¼ç±»ä¼¼äºä¸€ä¸ªäºŒç»´çš„åˆ†ç±»ï¼Œå°†æ›´åŠ å¤æ‚çš„ç³»ç»Ÿè¿›è¡Œæ•´ç†å¹¶ä¸”åˆ’åˆ†ã€‚ä»¥è¾¾åˆ°è§£è€¦çš„æ•ˆæœã€‚\nä½¿ç”¨åœºæ™¯ï¼š\nå»ºé€ è€…æ¨¡å¼ å»ºé€ è€…æ¨¡å¼: å»ºé€ è€…æ¨¡å¼ä¸»è¦æ˜¯ä¸ºäº†è§£å†³è°ƒç”¨æ„é€ å‡½æ•°çš„æ—¶å€™ï¼Œå‚æ•°å¤ªå¤šï¼Œå¹¶ä¸”æœ‰ä¸€äº›æ˜¯å¯é€‰å‚æ•°ä¸å¡«çš„æƒ…å†µã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œä½¿ç”¨å»ºé€ è€…æ¨¡å¼ä¼šæ›´åŠ çµæ´»ã€‚ å¾…è¡¥å……\u0026hellip;\u0026hellip;\nå‘½ä»¤æ¨¡å¼ å‘½ä»¤æ¨¡å¼: å‘½ä»¤æ¨¡å¼å°†â€œè¯·æ±‚â€å°è£…æˆå¯¹è±¡ï¼Œä»¥ä¾¿ä½¿ç”¨ä¸åŒçš„è¯·æ±‚ã€é˜Ÿåˆ—æˆ–è€…æ—¥å¿—æ¥å‚æ•°åŒ–å…¶ä»–å¯¹è±¡ã€‚å‘½ä»¤æ¨¡å¼ä¹Ÿå¯ä»¥æ”¯æŒæ’¤é”€çš„æ“ä½œã€‚ å®šä¹‰ï¼š\nå‘½ä»¤æ¨¡å¼å°†â€œè¯·æ±‚â€å°è£…æˆå¯¹è±¡ï¼Œä»¥ä¾¿ä½¿ç”¨ä¸åŒçš„è¯·æ±‚ã€é˜Ÿåˆ—æˆ–è€…æ—¥å¿—æ¥å‚æ•°åŒ–å…¶ä»–å¯¹è±¡ã€‚å‘½ä»¤æ¨¡å¼ä¹Ÿå¯ä»¥æ”¯æŒæ’¤é”€çš„æ“ä½œã€‚\nå‘½ä»¤æ¨¡å¼ä¸»è¦æ˜¯å°†â€œå‘½ä»¤çš„è¯·æ±‚è€…â€ä»â€œå‘½ä»¤çš„æ‰§è¡Œè€…â€å¯¹è±¡ä¸­è§£è€¦ã€‚\næ¶æ„ï¼š\nå‘½ä»¤æ¨¡å¼å¯¹è±¡å¯ä»¥åŒ…å«æ¥å—è€…çš„å¼•ç”¨ï¼Œä¹Ÿå¯ä»¥ä¸åŒ…å«ï¼Œå› ä¸ºåœ¨è¿œç¨‹è°ƒç”¨çš„æƒ…å†µä¸‹ï¼Œä¸èƒ½è·å–å¼•ç”¨ã€‚\nä½¿ç”¨åœºæ™¯ï¼š\nå¼‚æ­¥ã€å»¶è¿Ÿã€æ’é˜Ÿæ‰§è¡Œå‘½ä»¤ã€æ’¤é”€é‡åšå‘½ä»¤ã€å­˜å‚¨å‘½ä»¤ã€å‘½ä»¤è®°å½•æ—¥å¿— Hystixç†”æ–­æ¡†æ¶å°±ç”¨åˆ°äº†å‘½ä»¤æ¨¡å¼ redisä½¿ç”¨å‘½ä»¤æ¨¡å¼å¤„ç†æŒ‡ä»¤ ç»„åˆæ¨¡å¼ zç»„åˆæ¨¡å¼: ç»„åˆæ¨¡å¼è·Ÿæˆ‘ä»¬ä¹‹å‰è®²çš„é¢å‘å¯¹è±¡è®¾è®¡ä¸­çš„â€œç»„åˆå…³ç³»(é€šè¿‡ç»„åˆæ¥ç»„è£…ä¸¤ä¸ªç±»)â€ï¼Œå®Œå…¨æ˜¯ä¸¤ç äº‹ã€‚è¿™é‡Œè®²çš„â€œç»„åˆæ¨¡å¼â€ï¼Œä¸»è¦æ˜¯ç”¨æ¥å¤„ç†æ ‘å½¢ç»“æ„æ•°æ® å®šä¹‰ï¼š\nç»„åˆæ¨¡å¼å…è®¸ä½ å°†å¯¹è±¡ç»„åˆæˆæ ‘å½¢ç»“æ„æ¥è¡¨ç¤ºâ€œæ•´ä½“/éƒ¨åˆ†â€çš„å±‚æ¬¡ç»“æ„ã€‚ç»„åˆèƒ½å¤Ÿè®©å®¢æˆ·ä»¥ä¸€è‡´çš„æ–¹å¼å¤„ç†ä¸ªåˆ«å¯¹è±¡ä»¥åŠå¯¹è±¡ç»„åˆã€‚\næ¶æ„ï¼š\nä½¿ç”¨åœºæ™¯ï¼š\nä½¿ç”¨ç»„åˆæ¨¡å¼çš„å‰æåœ¨äºï¼Œä½ çš„ä¸šåŠ¡åœºæ™¯å¿…é¡»èƒ½å¤Ÿè¡¨ç¤ºæˆæ ‘å½¢ç»“æ„ã€‚æ‰€ä»¥ï¼Œç»„åˆæ¨¡å¼çš„åº”ç”¨åœºæ™¯ä¹Ÿæ¯”è¾ƒå±€é™ï¼Œå®ƒå¹¶ä¸æ˜¯ä¸€ç§å¾ˆå¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ã€‚\néœ€è¦ç†è§£â€œæ•´ä½“å’Œéƒ¨åˆ†â€çš„å…³ç³»ã€‚\nè£…é¥°å™¨æ¨¡å¼ è£…é¥°å™¨æ¨¡å¼: è£…é¥°å™¨æ¨¡å¼åŠ¨æ€çš„å°†è´£ä»»é™„åŠ åˆ°å¯¹è±¡ä¸Šï¼Œè‹¥è¦æ‹“å±•åŠŸèƒ½ï¼Œè£…é¥°è€…æä¾›äº†æ¯”ç»§æ‰¿æ›´æœ‰å¼¹æ€§çš„æ›¿ä»£æ–¹æ¡ˆ å®šä¹‰ï¼š\nè£…é¥°å™¨æ¨¡å¼åŠ¨æ€çš„å°†è´£ä»»é™„åŠ åˆ°å¯¹è±¡ä¸Šï¼Œè‹¥è¦æ‹“å±•åŠŸèƒ½ï¼Œè£…é¥°è€…æä¾›äº†æ¯”ç»§æ‰¿æ›´æœ‰å¼¹æ€§çš„æ›¿ä»£æ–¹æ¡ˆã€‚\næ¶æ„ï¼š\nclassDiagram class Component { \u0026lt;\u0026lt;abstract\u0026gt;\u0026gt; + methodA() + methodB() } class ConcreateComponent { + methodA() + methodB() } class Decrator { \u0026lt;\u0026lt;abstract\u0026gt;\u0026gt; + methodA() + methodB() } class ConcreateDecratorA { + methodA() + methodB() + newMethod() } class ConcreateDecratorB { + methodA() + methodB() } ConcreateComponent --|\u0026gt; Component : ç»§æ‰¿ Decrator --|\u0026gt; Component : ç»§æ‰¿ ConcreateDecratorA --|\u0026gt; Decrator : ç»§æ‰¿ ConcreateDecratorB --|\u0026gt; Decrator : ç»§æ‰¿ è£…é¥°çš„æŠ€å·§å¯ä»¥åœ¨ä¸ä¿®æ”¹ä»»ä½•åº•å±‚ä»£ç çš„æƒ…å†µä¸‹å¢å¼ºåŠŸèƒ½ã€‚\nä½¿ç”¨åœºæ™¯ï¼š\nJava IOç±»åº“ï¼ˆInputStreamã€OutputStreamï¼‰\nåœ¨ä¸å½±å“å…¶ä»–å¯¹è±¡çš„æƒ…å†µä¸‹ï¼Œä»¥åŠ¨æ€ã€é€æ˜çš„æ–¹å¼ç»™å•ä¸ªå¯¹è±¡æ·»åŠ èŒè´£ã€‚\nä½¿ç”¨è£…é¥°å™¨æ¨¡å¼ï¼Œå¸¸å¸¸é€ æˆè®¾è®¡ä¸­æœ‰å¤§é‡çš„ç±» è¿­ä»£å™¨æ¨¡å¼ è¿­ä»£å™¨æ¨¡å¼: è¿­ä»£å™¨æ¨¡å¼æä¾›äº†ä¸€ç§æ–¹æ³•é¡ºåºè®¿é—®ä¸€ä¸ªèšåˆå¯¹è±¡ä¸­çš„å„ä¸ªå…ƒç´ ï¼Œè€Œä¸æš´éœ²å…¶å†…éƒ¨çš„è¡¨ç¤º å®šä¹‰ï¼š\nè¿­ä»£å™¨æ¨¡å¼æä¾›äº†ä¸€ç§æ–¹æ³•é¡ºåºè®¿é—®ä¸€ä¸ªèšåˆå¯¹è±¡ä¸­çš„å„ä¸ªå…ƒç´ ï¼Œè€Œä¸æš´éœ²å…¶å†…éƒ¨çš„è¡¨ç¤ºã€‚\nè¿­ä»£å™¨æ¨¡å¼å°è£…äº†éå†ã€‚å¹¶ä¸”è¿­ä»£å™¨æ¨¡å¼è¿˜å°†åœ¨å…ƒç´ ä¹‹é—´è¿›è¡Œæ¸¸èµ°çš„è´£ä»»äº¤ç»™è¿­ä»£å™¨ï¼Œä½¿å¾—èŒè´£æ›´åŠ å•ä¸€ã€‚\næ¶æ„ï¼š\nä½¿ç”¨åœºæ™¯ï¼š\nJava Iterator è§£è€¦å®¹å™¨ä»£ç å’Œéå†ä»£ç ï¼Œä½¿å¾—èŒè´£æ›´åŠ å•ä¸€ è§‚å¯Ÿè€…æ¨¡å¼ è§‚å¯Ÿè€…æ¨¡å¼: ä¸€ä¸ªæ¯”å–»ï¼ŒæŠ¥çº¸è®¢é˜…ï¼ˆå‡ºç‰ˆè€…å’Œè®¢é˜…è€…ï¼‰ å®šä¹‰ï¼š\nè§‚å¯Ÿè€…æ¨¡å¼å®šä¹‰äº†å¯¹è±¡ä¹‹é—´çš„ä¸€å¯¹å¤šä¾èµ–ï¼Œè¿™æ ·ä¸€æ¥ï¼Œå½“ä¸€ä¸ªå¯¹è±¡æ”¹å˜çŠ¶æ€æ—¶ï¼Œå®ƒçš„æ‰€æœ‰ä¾èµ–è€…éƒ½ä¼šæ”¶åˆ°é€šçŸ¥å¹¶ä¸”è‡ªåŠ¨æ›´æ–°ã€‚\nä¸€ä¸ªæ¯”å–»ï¼šæŠ¥çº¸è®¢é˜…ï¼ˆå‡ºç‰ˆè€…å’Œè®¢é˜…è€…ï¼‰\næ¶æ„ï¼š\nclassDiagram class Subject { \u0026lt;\u0026lt;interface\u0026gt;\u0026gt; + registerObserver() + removeObserver() + notifyObserver() } class ConcreteSubject { - List\u0026lt;Observer\u0026gt; observers + registerObserver() + removeObserver() + notifyObserver() } class Observer { \u0026lt;\u0026lt;interface\u0026gt;\u0026gt; + update() } class ConcreteObeserver { - Subject subject + update() } Subject --\u0026gt; Observer : å¤šä¸ªè§‚å¯Ÿè€… ConcreteSubject ..|\u0026gt; Subject : å®ç° ConcreteObeserver ..|\u0026gt; Observer : å®ç° ConcreteObeserver --\u0026gt; ConcreteSubject : è®¢é˜…ä¸»é¢˜ è§‚å¯Ÿè€…ä¾èµ–ä¸»é¢˜ã€‚è§‚å¯Ÿè€…æ¨¡å¼æä¾›äº†ä¸€ç§å¯¹è±¡è®¾è®¡ï¼Œè®©ä¸»é¢˜å’Œè§‚å¯Ÿè€…ä¹‹é—´æ¾è€¦åˆã€‚ä»–ä»¬ä¾ç„¶å¯ä»¥äº¤äº’ï¼Œä½†æ˜¯ä¸å¿…æ¸…æ¥šå½¼æ­¤çš„ç»†èŠ‚ã€‚\nä½¿ç”¨åœºæ™¯ï¼š\næ¶ˆæ¯é˜Ÿåˆ— å›è°ƒå°±æ˜¯ä¸€ç§è§‚å¯Ÿè€…æ¨¡å¼ Google EventBus é‚®ä»¶è®¢é˜… RSS ååº”å¼RxJava JDK(CompletableFuture) ä»£ç†æ¨¡å¼ ä»£ç†æ¨¡å¼: ä»£ç†æ¨¡å¼ä¸ºå¦ä¸€ä¸ªå¯¹è±¡æä¾›ä¸€ä¸ªæ›¿èº«æˆ–è€…å ä½ç¬¦ä»¥æ§åˆ¶è¿™ä¸ªå¯¹è±¡çš„è®¿é—® å®šä¹‰ï¼š\nä»£ç†æ¨¡å¼ä¸ºå¦ä¸€ä¸ªå¯¹è±¡æä¾›ä¸€ä¸ªæ›¿èº«æˆ–è€…å ä½ç¬¦ä»¥æ§åˆ¶è¿™ä¸ªå¯¹è±¡çš„è®¿é—®ã€‚\næ¶æ„ï¼š\nä½¿ç”¨åœºæ™¯ï¼š\nè¿œç¨‹ä»£ç†ï¼šè¿œç¨‹ä»£ç†å¯ä»¥ä½œä¸ºå¦ä¸€ä¸ªJVMä¸Šå¯¹è±¡çš„æœ¬åœ°ä»£è¡¨ã€‚å¸¸è§çš„æ˜¯RPCæ¡†æ¶ã€‚ è™šæ‹Ÿä»£ç†ï¼šè™šæ‹Ÿä»£ç†ä½œä¸ºåˆ›å»ºå¼€é”€å¤§çš„å¯¹è±¡çš„ä»£è¡¨ã€‚å½“å¯¹è±¡æ²¡æœ‰å¾—åˆ°çš„æƒ…å†µä¸‹æ‰§è¡Œä¸€äº›æ“ä½œã€‚å¸¸è§çš„æ˜¯å›¾ç‰‡çš„åŠ è½½ã€‚ ç¼“å­˜ä»£ç†ï¼šç¼“å­˜ä»£ç†ä¼šç»´æŠ¤ä¹‹å‰çš„å¯¹è±¡ï¼Œåœ¨å¯èƒ½çš„æƒ…å†µä¸‹ä¼šè¿”å›ç¼“å­˜å¯¹è±¡ã€‚ ä¿æŠ¤ä»£ç†ï¼šå¯ä»¥æ ¹æ®å®¢æˆ·çš„è§’è‰²æ¥å†³å®šæ˜¯å¦å…è®¸å®¢æˆ·è®¿é—®ç‰¹å®šçš„æ–¹æ³•ã€‚ï¼ˆJavaåŠ¨æ€ä»£ç†ï¼‰ å…¶ä»–ä»£ç†ï¼š\né˜²ç«å¢™ä»£ç†ï¼šæ§åˆ¶ç½‘ç»œèµ„æºçš„è®¿é—®ï¼Œä¿æŠ¤è®¿é—®åç½‘ç»œã€‚ æ™ºèƒ½å¼•ç”¨ä»£ç†ï¼šä¾‹å¦‚è®¡ç®—ä¸€ä¸ªå¯¹è±¡è¢«å¼•ç”¨çš„æ¬¡æ•°ã€‚ åŒæ­¥ä»£ç†ï¼šåœ¨å¤šçº¿ç¨‹çš„æƒ…å†µä¸‹ä¸ºä¸»é¢˜æä¾›å®‰å…¨çš„è®¿é—®ã€‚ å†™å…¥æ—¶å¤åˆ¶ä»£ç†ï¼šç”¨äºæ§åˆ¶å¯¹è±¡çš„å¤åˆ¶ï¼Œæ–¹æ³•æ˜¯å»¶è¿Ÿå¯¹è±¡çš„å¤åˆ¶ï¼Œå‘é‚£ä¸ªå®¢æˆ·çœŸçš„éœ€è¦ï¼ˆä¹Ÿå°±æ˜¯éœ€è¦å†™å…¥æ—¶ï¼‰æ‰è¿›è¡Œå¤åˆ¶ã€‚æ˜¯è™šæ‹Ÿä»£ç†çš„å˜ä½“ã€‚ï¼ˆJava5çš„CopyOnWriteArrayListï¼‰ è£…é¥°å™¨æ¨¡å¼æ˜¯ä¸ºå¯¹è±¡å¢åŠ è¡Œä¸ºï¼Œè€Œä»£ç†æ¨¡å¼æ˜¯æ§åˆ¶å¯¹è±¡çš„è®¿é—®ã€‚ é€‚é…å™¨ä¼šæ”¹å˜å¯¹è±¡é€‚é…çš„æ¥å£ï¼Œè€Œä»£ç†åˆ™å®ç°ç›¸åŒçš„æ¥å£ å¤–è§‚æ¨¡å¼ å¤–è§‚æ¨¡å¼: å¤–è§‚æ¨¡å¼ä¹Ÿå«åšé—¨é¢æ¨¡å¼ï¼Œå¤–è§‚æ¨¡å¼å®šä¹‰äº†ä¸€ä¸ªç»Ÿä¸€çš„æ¥å£ï¼Œç”¨æ¥è®¿é—®å­ç³»ç»Ÿä¸­çš„ä¸€ç¾¤æ¥å£ã€‚å¤–è§‚å®šä¹‰äº†ä¸€ä¸ªé«˜å±‚æ¥å£ï¼Œè®©å­ç³»ç»Ÿæ›´å®¹æ˜“ä½¿ç”¨ å®šä¹‰ï¼š\nå¤–è§‚æ¨¡å¼å®šä¹‰äº†ä¸€ä¸ªç»Ÿä¸€çš„æ¥å£ï¼Œç”¨æ¥è®¿é—®å­ç³»ç»Ÿä¸­çš„ä¸€ç¾¤æ¥å£ã€‚å¤–è§‚å®šä¹‰äº†ä¸€ä¸ªé«˜å±‚æ¥å£ï¼Œè®©å­ç³»ç»Ÿæ›´å®¹æ˜“ä½¿ç”¨ã€‚\nå¤–è§‚æ¨¡å¼å¯ä»¥è§£å†³æ¥å£çš„å¤ç”¨æ€§å’Œæ˜“ç”¨æ€§çš„é—®é¢˜ï¼Œå¹¶ä¸”ï¼Œå¤–è§‚æ¨¡å¼å¯ä»¥è®©å±‚çº§æ›´åŠ æ¸…æ™°ï¼Œæ»¡è¶³æœ€å°‘çŸ¥è¯†åŸåˆ™ï¼Œè®©æš´éœ²çš„æ¥å£æˆ–è€…å‡½æ•°æ›´åŠ å°‘ã€‚\næ¶æ„ï¼š\nä½¿ç”¨åœºæ™¯ï¼š\nè§£å†³æ˜“ç”¨æ€§\nå½“æ¥å£è¶Šæ¥è¶Šå¤šï¼Œè¶Šæ¥è¶Šå¤æ‚çš„æ—¶å€™ï¼Œæä¾›ä¸€å±‚æ›´åŠ ç®€å•æ˜“ç”¨ï¼Œæ›´åŠ é«˜å±‚çš„æ¥å£ã€‚ä¾‹å­ï¼šLinuxç³»ç»Ÿè°ƒç”¨å‡½æ•°å°è£…äº†Linuxå†…æ ¸è°ƒç”¨ã€Linuxçš„Shellå‘½ä»¤å°è£…äº†å¤æ‚çš„ç³»ç»Ÿè°ƒç”¨ã€‚\nå•ç‹¬èµ·èµ·ä¸€ä¸ªAPIç½‘å…³å±‚æœåŠ¡åšè½¬å‘å’Œèšåˆä¹Ÿå¾ˆç±»ä¼¼é—¨é¢è®¾è®¡æ¨¡å¼ã€‚\nè§£å†³æ€§èƒ½é—®é¢˜\nå°†å¤šä¸ªæ¥å£è°ƒç”¨å°è£…æˆä¸€ä¸ªç®€å•çš„é—¨é¢æ¥å£ï¼Œåœ¨ä¸€äº›éœ€è¦å¤šæ¬¡è¯·æ±‚çš„ç½‘ç»œé€šä¿¡ä¸­å¯ä»¥å‡å°‘é€šä¿¡çš„æ¬¡æ•°ï¼Œé™ä½ç½‘ç»œé€šä¿¡çš„æˆæœ¬ï¼Œæé«˜APPå“åº”çš„é€Ÿåº¦ã€‚\nè§£å†³åˆ†å¸ƒå¼äº‹åŠ¡é—®é¢˜\né—¨é¢æ¥å£å¯ä»¥å°†ä¸€ä¸ªäº‹åŠ¡çš„å¤šä¸ªæ¥å£å°è£…åœ¨ä¸€ä¸ªæ¥å£ä¸­ï¼Œæ–¹é¢è¿›è¡Œäº‹åŠ¡çš„å›æ»šæˆ–è€…é‡è¯•ã€‚\né€‚é…å™¨æ˜¯åšæ¥å£è½¬æ¢ï¼Œè§£å†³çš„æ˜¯åŸæ¥å£å’Œç›®æ ‡æ¥å£ä¸åŒ¹é…çš„é—®é¢˜ã€‚é—¨é¢æ¨¡å¼åšæ¥å£æ•´åˆï¼Œè§£å†³çš„æ˜¯å¤šæ¥å£è°ƒç”¨å¸¦æ¥çš„é—®é¢˜ã€‚ é€‚é…å™¨æ¨¡å¼æ³¨é‡çš„æ˜¯å…¼å®¹æ€§ï¼Œè€Œé—¨é¢æ¨¡å¼æ³¨é‡çš„æ˜¯æ˜“ç”¨æ€§ã€‚ å¤åˆæ¨¡å¼ å¤åˆæ¨¡å¼å±äºæ˜¯æ¨¡å¼çš„æ¨¡å¼äº†ã€‚å¤åˆæ¨¡å¼åœ¨ä¸€ä¸ªè§£å†³æ–¹æ¡ˆä¸­ç»“åˆä¸¤ä¸ªæˆ–è€…å¤šä¸ªæ¨¡å¼ï¼Œä»¥è§£å†³ä¸€èˆ¬æˆ–è€…é‡å¤å‘ç”Ÿçš„é—®é¢˜ã€‚\nMVCæ¶æ„ï¼ˆæ¨¡å‹ã€è§†å›¾ã€æ§åˆ¶å™¨ï¼‰å°±ä½¿ç”¨äº†å¤šç§è®¾è®¡æ¨¡å¼çš„å¤åˆã€‚å…¶ä¸­åŒ…æ‹¬ï¼šè§‚å¯Ÿè€…æ¨¡å¼ã€ç­–ç•¥æ¨¡å¼ã€ç»„åˆæ¨¡å¼ã€‚\nè§‚å¯Ÿè€…æ¨¡å¼ï¼šæ¨¡å‹é€šçŸ¥è§†å›¾å’Œæ§åˆ¶å™¨å…³äºè‡ªå·±çš„æ”¹å˜ã€‚ ç­–ç•¥æ¨¡å¼ï¼šè§†å›¾å’Œæ§åˆ¶å™¨å®ç°äº†ç­–ç•¥æ¨¡å¼ï¼Œè§†å›¾å¯ä»¥æœ‰å¤šä¸ªæ§åˆ¶å™¨ï¼Œç›¸å½“äºæœ‰å¤šä¸ªç­–ç•¥è¡Œä¸ºå¯ä»¥äº’ç›¸æ›¿æ¢ã€‚ ç»„åˆæ¨¡å¼ï¼šè§†å›¾å†…é€šè¿‡ç»„åˆæ¨¡å¼ç®¡ç†çª—å£æ˜¾ç¤ºã€‚ Reference:\n","description":"è®¾è®¡æ¨¡å¼æ˜¯å‰äººæ€»ç»“çš„ç»éªŒã€‚","id":5,"section":"posts","tags":["è®¾è®¡æ¨¡å¼","å¼€å‘æ–¹æ³•è®º"],"title":"ç†è§£è®¾è®¡æ¨¡å¼","uri":"https://hugo.jiahongw.com/zh/posts/dev/design-pattern/"},{"content":"å‡ºå‘å‰çš„å‡†å¤‡ æˆ‘è¿™é‡Œåˆ—äº†ä¸€ä¸ªå¤§è‡´çš„æ”»ç•¥ï¼ˆè™½ç„¶æœ€åå´‚å±±æ²¡å»æˆï¼‰ï¼š\né’å²›æ”»ç•¥\nè¿˜å‡†å¤‡äº†ä¸€ä¸ªè¡Œç¨‹è·¯çº¿ï¼š\nç¬¬ä¸€ç«™ æˆ‘ä»¬ä¸‹è½¦çš„åœ°æ–¹æ˜¯é’å²›ç«™ï¼Œä¸€ä¸‹æ¥ï¼Œå°±æ˜¯ä¸€ç§æ¬§å¼å»ºç­‘çš„æ„Ÿè§‰ï¼Œè¿™å°±æ˜¯é’å²›çš„ç‰¹è‰²å—\nçœ‹æµ· æ¥é’å²›æ€ä¹ˆèƒ½ä¸çœ‹æµ·ï¼Œé’å²›ä¸‰é¢ç¯æµ·ï¼Œæ¥çš„è¿™å‡ å¤©ï¼Œæµ·æµªè¿˜æŒºå¤§ï¼Œå¹ç€æŒºèˆ’æœ\næ³¢æ¶›æ±¹æ¶Œ\næœ‰æ„å¢ƒçš„ä¸€ç¬é—´\né’å²›æ ‡å¿—æ€§å»ºç­‘â€”â€”æ ˆæ¡¥\nåƒæµ·é²œ åœ¨é’å²›åƒæµ·é²œğŸ¦ï¼Œå–ğŸºå•¤é…’ã€‚\nä¹°æµ·é²œ\næ‰¾åˆ«äººåŠ å·¥\né€›é’å²›è¡—å¤´ åœ¨åæœˆä»½çš„é’å²›æ ‘æœ¨éå¸¸ç»¿ï¼Œè€Œä¸”é’å²›çš„è¡—é“ä¹Ÿå¾ˆæœ‰ç‰¹è‰²ï¼Œå°±æ˜¯é‚£ç§æ—è«é“çš„æ„Ÿè§‰ï¼Œè®©äººå¾ˆèˆ’æœ\né’å²›çš„é“è·¯å‘½åå¾ˆæœ‰æ„æ€ï¼Œéƒ½æ˜¯æ‹¿å…¶ä»–çœåä½œä¸ºé“è·¯åï¼Œæ®è¯´é’å²›çš„ç‰ˆå›¾å°±æ˜¯ä¸€ä¸ªå°å‹çš„ä¸­å›½\nå¤œæ™šåœ¨æ•™å ‚è¿˜æœ‰äººç»„ç»‡ä¸€èµ·çœ‹ç”µå½±ï¼Œå¥½ä¹…æ²¡æœ‰è¿™æ ·çš„æ–‡è‰ºæ´»åŠ¨äº†\nå…‰åœˆå†…çš„äºº\nå¤œæ™šçš„è¡—é“å’Œè¡Œäºº\næ€»ç»“ é’å²›æ˜¯ä¸€ä¸ªéå¸¸æ¼‚äº®çš„åŸå¸‚ï¼Œéå¸¸é€‚åˆæ—…æ¸¸ã€‚é’å²›ä¸ä»…æœ‰æµ·ï¼Œæœ‰æµ·é²œï¼Œè¿˜æœ‰å¾ˆå¤šç¾å¥³ã€‚æ­¤è¡Œå‰å‰ååä¹Ÿåšäº†ä¸€äº›æ”»ç•¥ï¼Œå…¶å®æ”»ç•¥æ˜¯æ¬¡è¦çš„ï¼Œä¸ä¸€å®šéè¦å°†æ”»ç•¥ä¸­çš„å„ä¸ªæ™¯ç‚¹éƒ½é€›äº†æ‰ç®—å®Œç¾ï¼Œåœ¨è¡Œç¨‹ä¸­äº«å—è¿‡ç¨‹æ‰æ˜¯æ›´é‡è¦çš„ã€‚\nå½©è›‹ï½\n","description":"å›½åº†æœŸé—´ï¼Œå»äº†ä¸€è¶Ÿé’å²›ã€‚","id":6,"section":"posts","tags":["é’å²›","ç”Ÿæ´»","æ—…è¡Œ"],"title":"é’å²›ä¹‹æ—…","uri":"https://hugo.jiahongw.com/zh/posts/life/qingdao-travel/"},{"content":"The photo about Beijing with me.ğŸ“¹\n","description":"è®°å½•åŒ—äº¬çš„ç…§ç‰‡ç”Ÿæ´»","id":7,"section":"gallery","tags":[null],"title":"åŒ—äº¬","uri":"https://hugo.jiahongw.com/zh/gallery/beijing/"},{"content":"é…ç½®ä¿¡æ¯ gitçš„configçš„ä¿¡æ¯åˆä¸€ä¸ªå…¨å±€çš„é…ç½®æ–‡ä»¶ï¼Œä¹Ÿæœ‰ä¸€ä¸ªå±€éƒ¨ï¼ˆå½“å‰gité¡¹ç›®ï¼‰çš„é…ç½®æ–‡ä»¶ã€‚ä»–ä»¬çš„ä½ç½®åˆ†åˆ«åœ¨ï¼š\nå…¨å±€é…ç½®æ–‡ä»¶.gitconfigï¼š~/.gitconfig(ç”¨æˆ·æ ¹ç›®å½•ä¸‹)\nå±€éƒ¨é…ç½®æ–‡ä»¶.gitconfigï¼š.git/config(å½“å‰é¡¹ç›®ä¸‹ç›¸å¯¹è·¯å¾„)\né…ç½®æ–‡ä»¶å†…å®¹ï¼š\n[core] editor = vim [color \u0026#34;diff\u0026#34;] whitespace = red reverse [include] path = ~/.gitconfig.user [user] name = xxx email = xxx@xxx.com é…ç½®æ–‡ä»¶çš„ä¿¡æ¯ä¸»è¦åŒ…æ‹¬ï¼š\ngitä½¿ç”¨çš„ç¼–è¾‘å™¨\ndiffçš„é…ç½®\nincludeå¯ä»¥åŒ…æ‹¬ç”¨æˆ·çš„è‡ªå®šä¹‰ä¿¡æ¯\nç”¨æˆ·çš„ä¿¡æ¯ï¼ˆç”¨æˆ·åå’Œé‚®ç®±ï¼‰\né…ç½®å¤šä¸ªè´¦å·ï¼š\nMacé…ç½®å¤šä¸ªGitè´¦å·ï¼Œä¾‹å¦‚ä¸€ä¸ªå…¬å¸è´¦å·ï¼Œä¸€ä¸ªä¸ªäººè´¦å·ã€‚\nhttps://www.jianshu.com/p/698f82e72415\né¦–å…ˆunsetå…¨éƒ¨å…¨å±€çš„æ•°æ®ï¼Œç„¶åå‚è€ƒä¸Šé¢çš„åˆ†åˆ«è®¾ç½®å¤šä¸ªè´¦å·çš„å…¬é’¥ã€‚æœ€åè®¾ç½®configçš„æ—¶å€™ï¼Œå…¬å¸çš„ä¸è®¾ç½®ï¼Œç›´æ¥è®¾ç½®æˆglobalçš„ã€‚\nå…¶ä»–æ— éœ€æ›´æ”¹ã€‚\né€šè¿‡å‘½ä»¤è¡Œè¿›è¡Œé…ç½® è®¾ç½®ç”¨æˆ·ä¿¡æ¯ï¼š\n1 2 3 # è®¾ç½®æäº¤ä»£ç æ—¶çš„ç”¨æˆ·ä¿¡æ¯ $ git config [--global] user.name \u0026#34;[name]\u0026#34; $ git config [--global] user.email \u0026#34;[email address]\u0026#34; æŸ¥çœ‹gité…ç½®ä¿¡æ¯ï¼š\n1 2 3 4 # å±€éƒ¨é…ç½®ä¿¡æ¯ git config --list # å…¨å±€é…ç½®ä¿¡æ¯ git config --global --list ç¼–è¾‘gité…ç½®ä¿¡æ¯å¯ä»¥ä½¿ç”¨å‘½ä»¤è¡Œæ‰“å¼€ï¼š\n1 2 # ç¼–è¾‘Gité…ç½®æ–‡ä»¶ $ git config -e [--global] ä¿®æ”¹è¿œç¨‹ä»“åº“çš„åœ°å€ä¿¡æ¯ï¼š\n1 2 3 4 5 6 # è®¾ç½®è¿œç¨‹åœ°å€ git remote set-url origin [url] # åˆ é™¤æœ¬åœ°åœ°å€ git remote rm origin # æ²¡æœ‰è®¾ç½®è¿œç¨‹åœ°å€çš„æƒ…å†µä¸‹ä½¿ç”¨æ­¤å‘½ä»¤æ·»åŠ è¿œç¨‹ä»“åº“åœ°å€ git remote add origin [url] é€šè¿‡é…ç½®æ–‡ä»¶è¿›è¡Œä¿®æ”¹ [user] name = ç”¨æˆ·å email = é‚®ç®± [remote \u0026#34;origin\u0026#34;] url = è¿œç¨‹ä»“åº“åœ°å€ fetch = +refs/heads/*:refs/remotes/origin/* [branch \u0026#34;master\u0026#34;] remote = origin merge = refs/heads/master é…ç½®gitä»£ç†æº å¸¸è§çš„ github åŠ é€Ÿæ–¹æ³•å¦‚ä¿®æ”¹ hosts æ–‡ä»¶ã€é­”æ³•ä¸Šç½‘ã€è®¾ç½® proxy ç­‰æ–¹æ³•ã€‚\nåŠ é€Ÿåœ°å€ä¸€è§ˆ **fastgit.orgï¼š**https://doc.fastgit.org/ **cnpmjs.orgï¼š**https://github.com.cnpmjs.org/ **gitclone.comï¼š**https://gitclone.com/ **giteeï¼š**https://gitee.com/mirrors GitHub æ–‡ä»¶åŠ é€Ÿï¼šhttps://gh.api.99988866.xyz/ Github ä»“åº“åŠ é€Ÿï¼šhttps://github.zhlh6.cn/ Github ä»“åº“åŠ é€Ÿï¼šhttp://toolwa.com/github/ github å›½å†…é•œåƒæœåŠ¡åŠ é€Ÿ ä¸è¿›è¡Œå¤šä½™ç½‘ç»œé…ç½®çš„æƒ…å†µä¸‹ï¼Œç›´æ¥ä½¿ç”¨æä¾›äº† github å›½å†…é•œåƒæœåŠ¡çš„ç½‘ç«™è¿›è¡Œ github å„ç§èµ„æºæ‹‰å–åŠ é€Ÿã€‚\nåŠ é€Ÿcloneï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 # æ–¹æ³•ä¸€ï¼šæ‰‹åŠ¨æ›¿æ¢åœ°å€ #åŸåœ°å€ $ git clone https://github.com/kubernetes/kubernetes.git #æ”¹ä¸º $ git clone https://github.com.cnpmjs.org/kubernetes/kubernetes.git #æˆ–è€… $ git clone https://hub.fastgit.org/kubernetes/kubernetes.git #æˆ–è€… $ git clone https://gitclone.com/github.com/kubernetes/kubernetes.git # æ–¹æ³•äºŒï¼šé…ç½®gitè‡ªåŠ¨æ›¿æ¢ $ git config --global url.\u0026#34;https://hub.fastgit.org\u0026#34;.insteadOf https://github.com # æµ‹è¯• $ git clone https://github.com/kubernetes/kubernetes.git # æŸ¥çœ‹gité…ç½®ä¿¡æ¯ $ git config --global --list # å–æ¶ˆè®¾ç½® $ git config --global --unset url.https://github.com/.insteadof åŠ é€Ÿ release:\n1 2 3 4 5 6 # åŸåœ°å€ wget https://github.com/goharbor/harbor/releases/download/v2.0.2/harbor-offline-installer-v2.0.2.tgz # åŠ é€Ÿä¸‹è½½æ–¹æ³•ä¸€ wget https://download.fastgit.org/goharbor/harbor/releases/download/v2.0.2/harbor-offline-installer-v2.0.2.tgz # åŠ é€Ÿä¸‹è½½æ–¹æ³•äºŒ wget https://hub.fastgit.org/goharbor/harbor/releases/download/v2.0.2/harbor-offline-installer-v2.0.2.tgz åŠ é€Ÿ raw:\n1 2 3 4 5 6 # åŸåœ°å€ $ wget https://raw.githubusercontent.com/kubernetes/kubernetes/master/README.md # åŠ é€Ÿä¸‹è½½æ–¹æ³•ä¸€ $ wget https://raw.staticdn.net/kubernetes/kubernetes/master/README.md # åŠ é€Ÿä¸‹è½½æ–¹æ³•äºŒ $ wget https://raw.fastgit.org/kubernetes/kubernetes/master/README.md è®¾ç½®proxy å‘½ä»¤è¡Œè®¾ç½®å’Œå–æ¶ˆä»£ç†ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 git config --global https.proxy http://127.0.0.1:1080 git config --global https.proxy https://127.0.0.1:1080 git config --global --unset http.proxy git config --global --unset https.proxy #åªå¯¹github.com git config --global http.https://github.com.proxy socks5://127.0.0.1:1080 #å–æ¶ˆä»£ç† git config --global --unset http.https://github.com.proxy) npm config delete proxy é…ç½®æ–‡ä»¶é…ç½®ï¼š\n[http] proxy = socks5://127.0.0.1:1080 [https] proxy = socks5://127.0.0.1:1080 #åªå¯¹github.com æ–¹æ¡ˆ2 [http \u0026#34;https://github.com\u0026#34;] proxy = socks5://192.168.10.120:7890 æ³¨æ„ï¼š\n1, https.proxyè®¾ç½®æ˜¯æ— ç”¨çš„, åªéœ€è¦è®¾ç½®http.proxy\n2, socks5h://æ›´å¥½, è¿œç«¯DNS\nRefï¼š\næ— éœ€ä»£ç†ç›´æ¥åŠ é€Ÿå„ç§ GitHub èµ„æºæ‹‰å– | å›½å†…é•œåƒèµ‹èƒ½ | åŠ©åŠ›å¼€å‘ - Frytea\u0026rsquo;s Blog git è®¾ç½®å’Œå–æ¶ˆä»£ç† Linuxå®‰è£…å¹¶ä½¿ç”¨ssrå®¢æˆ·ç«¯ - ç°é¹¦é¹‰ å…³é”®å‘½ä»¤ ä¸‹å›¾å±•ç¤ºäº†å¸¸ç”¨çš„gitå‘½ä»¤ï¼š\nåŸºæœ¬æ“ä½œ 1 2 3 4 5 6 7 8 9 # åˆå§‹åŒ–gitä»“åº“ git init # æ·»åŠ æ–‡ä»¶åˆ°æš‚å­˜åŒºåŸŸ git add filename #æ·»åŠ æ‰€æœ‰æ›´æ”¹çš„æ–‡ä»¶åˆ°æš‚å­˜åŒº git add . (git add --all) # æäº¤ git commit # æäº¤åˆ°è¿œç¨‹ä»“åº“ åˆ é™¤git addæ“ä½œçš„æ–‡ä»¶\n1 2 3 4 # åˆ é™¤å·¥ä½œåŒºæ–‡ä»¶ï¼Œå¹¶ä¸”å°†è¿™æ¬¡åˆ é™¤æ”¾å…¥æš‚å­˜åŒº git rm [file1] [file2] .. # æ”¹åæ–‡ä»¶ï¼Œå¹¶ä¸”å°†è¿™ä¸ªæ”¹åæ”¾å…¥æš‚å­˜åŒº git mv [file-original] [file-renamed] æ’¤é”€æ›´æ”¹ æœªcommitï¼Œéœ€è¦å–æ¶ˆæ›´æ”¹ å·²ç»git addçš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨git checkout . å–æ¶ˆæ›´æ”¹ã€‚\nå·²commitï¼Œéœ€è¦å–æ¶ˆæ›´æ”¹ å…³é”®å­—ï¼šcheckoutï¼Œclean\n$ git checkout # æ’¤é”€é¡¹ç›®ä¸‹æ‰€æœ‰çš„ä¿®æ”¹ $ git checkout . # æ’¤é”€å½“å‰æ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰çš„ä¿®æ”¹ $ git checkout xx/xx.py xx/xx2.py # æ’¤é”€æŸå‡ ä¸ªæ–‡ä»¶çš„ä¿®æ”¹ $ git clean -f # untrackedçŠ¶æ€ï¼Œæ’¤é”€æ–°å¢çš„æ–‡ä»¶ $ git clean -df # untrackedçŠ¶æ€ï¼Œæ’¤é”€æ–°å¢çš„æ–‡ä»¶å’Œæ–‡ä»¶å¤¹ æœ€å¥½ä¸è¦ä½¿ç”¨git cleanè¿™ä¸ªå‘½ä»¤ã€‚\nåˆ é™¤commit\nç‰ˆæœ¬å›é€€ hash_valueæ˜¯åœ¨git logæŸ¥è¯¢åˆ°çš„å¯¹åº”æäº¤çš„å“ˆå¸Œå€¼ã€‚\ngit reset --hard hash_value ä¹Ÿå¯ä»¥\n$ git reset --hard origin/master # å›é€€ä¸æœ¬åœ°è¿œç¨‹ä»“åº“ä¸€è‡´ $ git reset --hard HEAD^ # å›é€€åˆ°æœ¬åœ°ä»“åº“ä¸Šä¸€ä¸ªç‰ˆæœ¬ $ git reset --hard \u0026lt;hash code\u0026gt; # å›é€€åˆ°ä»»æ„ç‰ˆæœ¬ $ git reset --soft/git reset # å›é€€ä¸”å›åˆ°å·²ä¿®æ”¹çŠ¶æ€ï¼Œä¿®æ”¹ä»ä¿ç•™åœ¨å·¥ä½œåŒºä¸­ã€‚ Gitæ ‡ç­¾tagçš„ä½¿ç”¨ git stashä½¿ç”¨ GitåŒºåŸŸ å·¥ä½œåŒº(Working Area) æš‚å­˜åŒº(Stage) æœ¬åœ°ä»“åº“(Local Repository) è¿œç¨‹ä»“åº“(Remote Repository) çŠ¶æ€ æœªä¿®æ”¹(Origin) å·²ä¿®æ”¹(Modified)\u0026amp;æœªè¿½è¸ª(Untracked) å·²æš‚å­˜(Staged) å·²æäº¤(Committed) å·²æ¨é€(Pushed) git add . æ˜¯æŠŠæ–‡ä»¶æ·»åŠ åˆ°æš‚å­˜åŒºä¸­ã€‚\ngit commit æŠŠæš‚å­˜åŒºä¸­çš„æ‰€æœ‰å†…å®¹æäº¤åˆ°å½“å‰åˆ†æ”¯ã€‚\ngit push æ˜¯å°†æœ¬ç‰ˆæœ¬åº“åº“ä¸­çš„å½“å‰çš„ä¿®æ”¹ç‰ˆæœ¬æ¨é€åˆ°è¿œç¨‹ä»“åº“ã€‚\ngit pull å°†è¿œç¨‹ä»“åº“çš„ä¿®æ”¹ç‰ˆæœ¬æ¨é€åˆ°æœ¬åœ°ç‰ˆæœ¬åº“ä¸­\nå–æ¶ˆcommitï¼š\n# ä¸åˆ é™¤å·¥ä½œç©ºé—´æ”¹åŠ¨ä»£ç  git reset --soft HEAD^ å‡ ä¸ªå‚æ•°ï¼š\nâ€“mixedï¼šä¸åˆ é™¤å·¥ä½œç©ºé—´æ”¹åŠ¨ä»£ç ï¼Œæ’¤é”€conmitï¼Œå¹¶ä¸”æ’¤é”€git add .æ“ä½œã€‚ï¼ˆè¿™ä¸ªå‚æ•°ä¸ºé»˜è®¤å‚æ•°ï¼‰ â€“softï¼šä¸åˆ é™¤å·¥ä½œç©ºé—´æ”¹åŠ¨ä»£ç ï¼Œæ’¤é”€commitï¼Œä¸æ’¤é”€git add . â€“hardï¼šåˆ é™¤å·¥ä½œç©ºé—´æ”¹åŠ¨ä»£ç ï¼Œæ’¤é”€commitï¼Œæ’¤é”€git add . æ·»åŠ è¿œç¨‹ä»“åº“ï¼š\nå†²çªè§£å†³ å¼ºåˆ¶æäº¤ï¼šgit push origin branch-name \u0026ndash;force åœ¨è¿›è¡Œpullå’Œpushçš„æ—¶å€™æˆ–è€…mergeçš„æ—¶å€™ï¼Œå¯èƒ½ä¼šå‘ç”Ÿå†²çªï¼Œè¿™ä¸ªæ—¶å€™éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨è¿›è¡Œä¿®æ”¹å†²çªçš„å†…å®¹ã€‚\ngit åˆå¹¶å¤šä¸ªcommit æœ€ç®€å•çš„å•æ­¥æ“ä½œæ–¹æ³•ï¼š\n# ä½¿ç”¨ä¸€æ¬¡æ–°çš„commitï¼Œæ›¿ä»£ä¸Šä¸€æ¬¡æäº¤ # å¦‚æœä»£ç æ²¡æœ‰ä»»ä½•æ–°å˜åŒ–ï¼Œåˆ™ç”¨æ¥æ”¹å†™ä¸Šä¸€æ¬¡commitçš„æäº¤ä¿¡æ¯ $ git commit --amend -m [message] é‡ç½®ä¸Šæ¬¡commitçš„ä¿¡æ¯ï¼š\n# é‡åšä¸Šä¸€æ¬¡commitï¼Œå¹¶åŒ…æ‹¬æŒ‡å®šæ–‡ä»¶çš„æ–°å˜åŒ– $ git commit --amend [file1] [file2] ... å‹ç¼©å½“å‰ç‰ˆæœ¬åˆ°æŒ‡å®šç‰ˆæœ¬ä¹‹é—´çš„commitä¸ºä¸€ä¸ªcommitï¼ˆä¸åŒ…æ‹¬å‘½ä»¤ä¸­çš„commitï¼‰ï¼š\ngit log git rebase -i ç‰ˆæœ¬ ç‰ˆæœ¬ä¸å‚ä¸åˆå¹¶ï¼Œæ–‡ä»¶ä¸­æœ€ä¸Šè¾¹çš„commitä¸éœ€è¦ä¿®æ”¹sã€‚\nå¯ä»¥åˆ é™¤ä¸éœ€è¦çš„commit\nä¹‹åé€‰æ‹©éœ€è¦åˆå¹¶çš„commitçš„å‰é¢çš„pickæ”¹ä¸ºsï¼Œç„¶åä¿å­˜æ¨å‡ºï¼Œæœ‰å†²çªæŒ‰ç…§æç¤ºä¿®æ”¹å³å¯ã€‚\nGitå°†å•ä¸ªcommitæ‹†åˆ†æˆå¤šä¸ªcommit å‚è€ƒï¼šGit : å¦‚ä½•å°†ä¸€ä¸ªcommitæ‹†åˆ†æˆå¤šä¸ª | ä¸€ä¸ªç¨‹åºå‘˜çš„è‡ªæˆ‘ä¿®å…»\nGitæŸ¥çœ‹æŸæ¬¡æäº¤çš„å†…å®¹ 1 git show commitId æŸ¥çœ‹æŸä¸ªæ–‡ä»¶æŸæ¬¡æäº¤çš„å†…å®¹:\n1 git show commitId fileName git åˆ†æ”¯æ“ä½œ æ¸¸æˆå­¦ä¹ åˆ†æ”¯æ“ä½œï¼šhttps://learngitbranching.js.org/?locale=zh_CN\nHEADè¡¨ç¤ºå½“å‰çš„åˆ†æ”¯èŠ‚ç‚¹ï¼š\nä½¿ç”¨ ^ å‘ä¸Šç§»åŠ¨ 1 ä¸ªæäº¤è®°å½• ä½¿ç”¨ ~\u0026lt;num\u0026gt; å‘ä¸Šç§»åŠ¨å¤šä¸ªæäº¤è®°å½•ï¼Œå¦‚ ~3 æˆ‘ä½¿ç”¨ç›¸å¯¹å¼•ç”¨æœ€å¤šçš„å°±æ˜¯ç§»åŠ¨åˆ†æ”¯ã€‚å¯ä»¥ç›´æ¥ä½¿ç”¨ -f é€‰é¡¹è®©åˆ†æ”¯æŒ‡å‘å¦ä¸€ä¸ªæäº¤ã€‚ä¾‹å¦‚:\ngit branch -f main HEAD~3 ä¸Šé¢å°†mainåˆ†æ”¯ç§»åŠ¨åˆ°å½“å‰èŠ‚ç‚¹çš„å‰ä¸‰ä¸ªæäº¤ã€‚\ncloneæŒ‡å®šåˆ†æ”¯ï¼š\n1 git clone -b master http://gitslab.yiqing.com/declare/about.git æ›´æ–°è¿œç¨‹åˆ†æ”¯ï¼š\n1 git remote update origin --prune rebaseçš„å‘\næ’¤é”€æ“ä½œï¼š\nè™½ç„¶åœ¨ä½ çš„æœ¬åœ°åˆ†æ”¯ä¸­ä½¿ç”¨ git reset å¾ˆæ–¹ä¾¿ï¼Œä½†æ˜¯è¿™ç§â€œæ”¹å†™å†å²â€çš„æ–¹æ³•å¯¹å¤§å®¶ä¸€èµ·ä½¿ç”¨çš„è¿œç¨‹åˆ†æ”¯æ˜¯æ— æ•ˆçš„å“¦ï¼\nä¸ºäº†æ’¤é”€æ›´æ”¹å¹¶åˆ†äº«ç»™åˆ«äººï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ git revertã€‚æ¥çœ‹æ¼”ç¤ºï¼š\nè¿™é‡Œè¦æ³¨æ„ä¸‹ï¼Œå¦‚æœä½ çš„remote branchä¸æ˜¯åœ¨originä¸‹ï¼ŒæŒ‰ä½ å¾—æŠŠoriginæ¢æˆä½ çš„åå­—ã€‚\nåˆå¹¶åˆ†æ”¯åˆ°æ­¤åˆ†æ”¯:\n1 2 # åˆå¹¶masteråˆ†æ”¯åˆ°æ­¤åˆ†æ”¯ git merge master åˆå¹¶åˆ°ç›®æ ‡åˆ†æ”¯ï¼š\n1 2 # åˆå¹¶æ­¤åˆ†æ”¯åˆ°masteråˆ†æ”¯ git rebase master åˆ—å‡ºæ‰€æœ‰åˆ†æ”¯ï¼š\n# åˆ—å‡ºæœ¬åœ°æ‰€æœ‰åˆ†æ”¯ git branch # åˆ—å‡ºæœ¬åœ°å’Œè¿œç¨‹æ‰€æœ‰åˆ†æ”¯ git branch -a åˆ é™¤åˆ†æ”¯ï¼š\n# åˆ é™¤åˆ†æ”¯ $ git branch -d [branch-name] # åˆ é™¤è¿œç¨‹åˆ†æ”¯ $ git push origin --delete [branch-name] $ git branch -dr [remote/branch] æ–°å»ºå’Œåˆ‡æ¢åˆ†æ”¯ï¼š\n1 2 3 4 5 6 7 8 9 10 # åˆ›å»ºdevåˆ†æ”¯ git branch dev # åˆ‡æ¢åˆ°devåˆ†æ”¯ git checkout dev # åˆ›å»ºdevåˆ†æ”¯å¹¶ä¸”åˆ‡æ¢åˆ°è¯¥åˆ†æ”¯ git checkout -b dev # æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼ŒæŒ‡å‘æŒ‡å®šcommit git branch [branch] [commit] # åˆ‡æ¢åˆ°ä¸Šä¸€ä¸ªåˆ†æ”¯ git checkout - é‡å‘½ååˆ†æ”¯ï¼ˆæœ¬åœ°ä¸å­˜åœ¨feature/onesåˆ†æ”¯ï¼‰ï¼š\n# æŠŠè¿œç«¯feature/onesåˆ†æ”¯åç§°é‡å‘½åä¸ºfeature/12345/ones git checkout -b feature/ones origin/feature/ones git pull é‡å‘½åfeature/onesåˆ†æ”¯\ngit branch -m feature/ones feature/12345/ones æäº¤åˆ†æ”¯ æäº¤åˆ°feature/12345/onesåˆ†æ”¯\ngit push origin feature/12345/ones åˆ é™¤è¿œç«¯åˆ†æ”¯ åˆ é™¤è¿œç«¯feature/onesåˆ†æ”¯\ngit push -d feature/ones åˆå¹¶åˆ†æ”¯ å°†æ–‡ä»¶åˆå¹¶åˆ°masterï¼Œå³åˆå¹¶devåˆ†æ”¯åˆ°masterä¸­å»\ngit merge dev æ‹‰å–è¿œç¨‹åˆ†æ”¯ï¼š\n1 2 3 4 # æ‹‰å–è¿œç¨‹åˆ†æ”¯å¹¶åˆ›å»ºæœ¬åœ°åˆ†æ”¯ git checkout -b æœ¬åœ°åˆ†æ”¯åx origin/è¿œç¨‹åˆ†æ”¯åx # æ‹‰å–è¿œç¨‹åˆ†æ”¯ï¼Œä½†æ˜¯ä¸åˆ‡æ¢åˆ°è¯¥åˆ†æ”¯ git fetch origin è¿œç¨‹åˆ†æ”¯åx:æœ¬åœ°åˆ†æ”¯åx æŸ¥çœ‹æœ¬åœ°åˆ†æ”¯ä¸è¿œç¨‹åˆ†æ”¯çš„æ˜ å°„å…³ç³»\n1 git branch -vv å»ºç«‹å½“å‰åˆ†æ”¯ä¸è¿œç¨‹åˆ†æ”¯çš„æ˜ å°„å…³ç³»:\n1 2 git branch -u origin/addFile git branch --set-upstream-to origin/addFile æ’¤é”€æœ¬åœ°åˆ†æ”¯ä¸è¿œç¨‹åˆ†æ”¯çš„æ˜ å°„å…³ç³»:\n1 2 git branch --unset-upstream ref:git upstream\n\u0026lt;++\u0026gt;\nä»£ç å›æ»š å†²çªè§£å†³ ç”Ÿæˆå‘å¸ƒå‹ç¼©åŒ…\ngit archive æ ‡ç­¾ä½¿ç”¨ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 # åˆ—å‡ºæ‰€æœ‰tag $ git tag # æ–°å»ºä¸€ä¸ªtagåœ¨å½“å‰commit $ git tag [tag] # æ–°å»ºä¸€ä¸ªtagåœ¨æŒ‡å®šcommit $ git tag [tag] [commit] # åˆ é™¤æœ¬åœ°tag $ git tag -d [tag] # åˆ é™¤è¿œç¨‹tag $ git push origin :refs/tags/[tagName] # æŸ¥çœ‹tagä¿¡æ¯ $ git show [tag] # æäº¤æŒ‡å®štag $ git push [remote] [tag] # æäº¤æ‰€æœ‰tag $ git push [remote] --tags # æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼ŒæŒ‡å‘æŸä¸ªtag $ git checkout -b [branch] [tag] Gitè§„èŒƒ åˆ†æ”¯å‘½å master åˆ†æ”¯\nmaster ä¸ºä¸»åˆ†æ”¯ï¼Œä¹Ÿæ˜¯ç”¨äºéƒ¨ç½²ç”Ÿäº§ç¯å¢ƒçš„åˆ†æ”¯ï¼Œç¡®ä¿masteråˆ†æ”¯ç¨³å®šæ€§\nmaster åˆ†æ”¯ä¸€èˆ¬ç”±developä»¥åŠhotfixåˆ†æ”¯åˆå¹¶ï¼Œä»»ä½•æ—¶é—´éƒ½ä¸èƒ½ç›´æ¥ä¿®æ”¹ä»£ç \ndevelop åˆ†æ”¯\ndevelop ä¸ºå¼€å‘åˆ†æ”¯ï¼Œå§‹ç»ˆä¿æŒæœ€æ–°å®Œæˆä»¥åŠbugä¿®å¤åçš„ä»£ç \nä¸€èˆ¬å¼€å‘çš„æ–°åŠŸèƒ½æ—¶ï¼Œfeatureåˆ†æ”¯éƒ½æ˜¯åŸºäºdevelopåˆ†æ”¯ä¸‹åˆ›å»ºçš„\nfeature åˆ†æ”¯\nå¼€å‘æ–°åŠŸèƒ½æ—¶ï¼Œä»¥developä¸ºåŸºç¡€åˆ›å»ºfeatureåˆ†æ”¯\nåˆ†æ”¯å‘½å: feature/ å¼€å¤´çš„ä¸ºç‰¹æ€§åˆ†æ”¯ï¼Œ å‘½åè§„åˆ™: feature/user_moduleã€ feature/cart_module\nreleaseåˆ†æ”¯\nrelease ä¸ºé¢„ä¸Šçº¿åˆ†æ”¯ï¼Œå‘å¸ƒææµ‹é˜¶æ®µï¼Œä¼šreleaseåˆ†æ”¯ä»£ç ä¸ºåŸºå‡†ææµ‹ å½“æœ‰ä¸€ç»„featureå¼€å‘å®Œæˆï¼Œé¦–å…ˆä¼šåˆå¹¶åˆ°developåˆ†æ”¯ï¼Œè¿›å…¥ææµ‹æ—¶ï¼Œä¼šåˆ›å»ºreleaseåˆ†æ”¯ã€‚\nå¦‚æœæµ‹è¯•è¿‡ç¨‹ä¸­è‹¥å­˜åœ¨bugéœ€è¦ä¿®å¤ï¼Œåˆ™ç›´æ¥ç”±å¼€å‘è€…åœ¨releaseåˆ†æ”¯ä¿®å¤å¹¶æäº¤ã€‚\nå½“æµ‹è¯•å®Œæˆä¹‹åï¼Œåˆå¹¶releaseåˆ†æ”¯åˆ°masterå’Œdevelopåˆ†æ”¯ï¼Œæ­¤æ—¶masterä¸ºæœ€æ–°ä»£ç ï¼Œç”¨ä½œä¸Šçº¿ã€‚\nå¤åˆ¶ä»£ç \nhotfix åˆ†æ”¯\nåˆ†æ”¯å‘½å: hotfix/ å¼€å¤´çš„ä¸ºä¿®å¤åˆ†æ”¯ï¼Œå®ƒçš„å‘½åè§„åˆ™ä¸ feature åˆ†æ”¯ç±»ä¼¼\nçº¿ä¸Šå‡ºç°ç´§æ€¥é—®é¢˜æ—¶ï¼Œéœ€è¦åŠæ—¶ä¿®å¤ï¼Œä»¥masteråˆ†æ”¯ä¸ºåŸºçº¿ï¼Œåˆ›å»ºhotfixåˆ†æ”¯ï¼Œä¿®å¤å®Œæˆåï¼Œéœ€è¦åˆå¹¶åˆ°masteråˆ†æ”¯å’Œdevelopåˆ†æ”¯\næ—¥å¿—è§„èŒƒ å½“å‰ä¸šç•Œåº”ç”¨çš„æ¯”è¾ƒå¹¿æ³›çš„æ˜¯ Angular Git Commit Guidelines\nCommit messageæ ¼å¼ï¼š\næ¯æ¬¡æäº¤ï¼ŒCommit message éƒ½åŒ…æ‹¬ä¸‰ä¸ªéƒ¨åˆ†ï¼šheaderï¼Œbody å’Œ footerã€‚\n\u0026lt;type\u0026gt;(\u0026lt;scope\u0026gt;): \u0026lt;subject\u0026gt; \u0026lt;BLANK LINE\u0026gt; \u0026lt;body\u0026gt; \u0026lt;BLANK LINE\u0026gt; \u0026lt;footer\u0026gt; å…¶ä¸­ï¼Œheader æ˜¯å¿…éœ€çš„ï¼Œbody å’Œ footer å¯ä»¥çœç•¥ã€‚\ntype: æœ¬æ¬¡ commit çš„ç±»å‹ï¼Œè¯¸å¦‚ bugfix docs style ç­‰\nscope: æœ¬æ¬¡ commit æ³¢åŠçš„èŒƒå›´\nsubject: ç®€æ˜æ‰¼è¦çš„é˜è¿°ä¸‹æœ¬æ¬¡ commit çš„ä¸»æ—¨ï¼Œåœ¨åŸæ–‡ä¸­ç‰¹æ„å¼ºè°ƒäº†å‡ ç‚¹ 1. ä½¿ç”¨ç¥ˆä½¿å¥ï¼Œæ˜¯ä¸æ˜¯å¾ˆç†Ÿæ‚‰åˆé™Œç”Ÿçš„ä¸€ä¸ªè¯ï¼Œæ¥ä¼ é€é—¨åœ¨æ­¤ ç¥ˆä½¿å¥ 2. é¦–å­—æ¯ä¸è¦å¤§å†™ 3. ç»“å°¾æ— éœ€æ·»åŠ æ ‡ç‚¹\nbody: åŒæ ·ä½¿ç”¨ç¥ˆä½¿å¥ï¼Œåœ¨ä¸»ä½“å†…å®¹ä¸­æˆ‘ä»¬éœ€è¦æŠŠæœ¬æ¬¡ commit è¯¦ç»†çš„æè¿°ä¸€ä¸‹ï¼Œæ¯”å¦‚æ­¤æ¬¡å˜æ›´çš„åŠ¨æœºï¼Œå¦‚éœ€æ¢è¡Œï¼Œåˆ™ä½¿ç”¨ |\nfooter: æè¿°ä¸‹ä¸ä¹‹å…³è”çš„ issue æˆ– break changeï¼Œè¯¦è§æ¡ˆä¾‹\nHeaderéƒ¨åˆ†åªæœ‰ä¸€è¡Œï¼ŒåŒ…æ‹¬ä¸‰ä¸ªå­—æ®µï¼štypeï¼ˆå¿…éœ€ï¼‰ã€scopeï¼ˆå¯é€‰ï¼‰å’Œsubjectï¼ˆå¿…éœ€ï¼‰ã€‚\nfeat: æ·»åŠ æ–°ç‰¹æ€§ fix: ä¿®å¤bug docs: ä»…ä»…ä¿®æ”¹äº†æ–‡æ¡£ style: ä»…ä»…ä¿®æ”¹äº†ç©ºæ ¼ã€æ ¼å¼ç¼©è¿›ã€éƒ½å¥½ç­‰ç­‰ï¼Œä¸æ”¹å˜ä»£ç é€»è¾‘ refactor: ä»£ç é‡æ„ï¼Œæ²¡æœ‰åŠ æ–°åŠŸèƒ½æˆ–è€…ä¿®å¤bug perf: å¢åŠ ä»£ç è¿›è¡Œæ€§èƒ½æµ‹è¯• test: å¢åŠ æµ‹è¯•ç”¨ä¾‹ chore: æ”¹å˜æ„å»ºæµç¨‹ã€æˆ–è€…å¢åŠ ä¾èµ–åº“ã€å·¥å…·ç­‰ ä½¿ç”¨gitmojiï¼šğŸ”¨ [git]: Write better commits with Gitmoji - DEV Community\næœ€ä½³å®è·µ æœ¬åœ°ä»£ç åŒåˆ†æ”¯ï¼Œä¸€ä¸ªæäº¤åˆ†æ”¯ï¼Œä¸€ä¸ªå¼€å‘åˆ†æ”¯ã€‚\nå‡å¦‚ä»è¿œç¨‹ä»“åº“é‚£è¾¹æ‹‰å–çš„åˆ†æ”¯æ˜¯\ngit commit \u0026ndash;amendä¿®æ”¹pushåˆ°è¿œç¨‹åˆ†æ”¯çš„æäº¤\nhttps://blog.csdn.net/ecjtuhq/article/details/80358656\nå‚è€ƒï¼š\nhttps://blog.csdn.net/ivan820819/article/details/78816578\nhttps://segmentfault.com/a/1190000007748862\nhttps://www.jianshu.com/p/964de879904a\nhttps://blog.csdn.net/huangjhai/article/details/109557946\nhttps://juejin.cn/post/6844903635533594632\nhttps://segmentfault.com/a/1190000009048911\nhttps://www.cnblogs.com/jiuyi/p/7690615.html\nhttps://www.ruanyifeng.com/blog/2015/12/git-cheat-sheet.html\n","description":"è®°å½•gitçš„å¸¸ç”¨æ“ä½œå’Œä¸€äº›å®é™…é‡åˆ°çš„é—®é¢˜ã€‚","id":8,"section":"posts","tags":["git","å¼€å‘æ–¹æ³•è®º"],"title":"gitä½¿ç”¨ç¬”è®°","uri":"https://hugo.jiahongw.com/zh/posts/dev/git-note/"},{"content":" Youtubeä¸­çš„ä¸€ä¸ªéå¸¸æœ‰æ„æ€çš„è§†é¢‘æ´»åŠ¨ã€‚åœ¨èŠåŠ å“¥çš„å¤§è¡—ä¸Šï¼Œçœ‹çœ‹è·¯äººèƒ½å¦è§£å†³ä¸€äº›åˆçº§çš„ç¼–ç¨‹é—®é¢˜ï¼Œè§£å†³é—®é¢˜çš„èƒ½å¤Ÿå¾—åˆ°100ç¾å…ƒï¼Œéå¸¸æœ‰æ„æ€ã€‚å¯¹äºæˆ‘ä»¬æ¥è¯´è¿™äº›é—®é¢˜éå¸¸çš„ç®€å•ï¼Œä½†æ˜¯å¯¹äºæ™®é€šäººæ¥è¯´ï¼Œè¿˜æ˜¯æœ‰ä¸€å®šçš„éš¾åº¦çš„ã€‚ä¼¼ä¹åœ¨èŠåŠ å“¥çš„è¡—å¤´ä¸Šä¹Ÿä¼šç¼–ç¨‹çš„ä¹Ÿä¸æ˜¯æŒºå¤šäººï¼Œæˆ–è€…ï¼Œç¨‹åºçŒ¿éƒ½åœ¨ä¸Šç­å§ğŸ¶ã€‚\nåœ¨ç¬¬äºŒæœŸçš„é—®é¢˜å˜å¾—æ¯”è¾ƒéš¾ä¸€ç‚¹ï¼Œæ˜¯collegeæ°´å¹³çš„ï¼Œè§£å†³é—®é¢˜çš„èƒ½å¤Ÿå¾—åˆ°200ç¾å…ƒã€‚åé¢é‚£ä¸ªç†Ÿæ‚‰çš„åˆ¤æ–­å›æ–‡ä¸²ğŸ˜„ã€‚\næƒ³è±¡è¿™ä¸ªæ´»åŠ¨è¦æ˜¯åœ¨ä¸­å›½è¯•ä¸€è¯•ï¼Œæ„Ÿè§‰è¡—å¤´å¾ˆå¤šäººèƒ½å¤Ÿåšå‡ºæ¥ï¼Œå› ä¸ºä¸­å›½çš„ç¨‹åºå‘˜è¶Šæ¥è¶Šå¤šäº†ã€‚\n","description":"Youtubeä¸­çš„ä¸€ä¸ªéå¸¸æœ‰æ„æ€çš„è§†é¢‘æ´»åŠ¨ã€‚åœ¨èŠåŠ å“¥çš„å¤§è¡—ä¸Šï¼Œçœ‹çœ‹è·¯äººèƒ½å¦å§å§ä¸€äº›åˆçº§çš„ç¼–ç¨‹é—®é¢˜ã€‚","id":9,"section":"posts","tags":["ç¼–ç¨‹","youtube"],"title":"è¡—å¤´ä»£ç ç¼–ç¨‹","uri":"https://hugo.jiahongw.com/zh/posts/see/code-problem-solving-onstreet/"},{"content":"æåŒ–ç¼–ç çš„åŸºæœ¬æ€æƒ³æ˜¯ï¼šåªåœ¨$Z\\left( W_{N}^{\\left( i \\right)} \\right)$è¿‘äº0çš„åæ ‡ä¿¡é“$W_{N}^{\\left( i \\right)}$ä¸Šå‘é€æ•°æ®æ¯”ç‰¹ã€‚æåŒ–ç å…·æœ‰ä¸€èˆ¬çš„äºŒå…ƒçº¿æ€§åˆ†ç»„ç çš„åŸºæœ¬ç¼–ç è¦ç´ ï¼Œå› è€Œå¯ä»¥é€šè¿‡æ˜¾ç¤ºåœ°å†™å‡ºå…¶ç”ŸæˆçŸ©é˜µæ¥å®Œæˆç¼–ç ï¼š\n$$\nx_{1}^{N}=u_{1}^{N}{G_{N}}\n$$\nå…¶ä¸­ï¼Œç¼–ç ç”ŸæˆçŸ©é˜µ${G_{N}}\\text{=}{B_{N}}{F^{\\otimes n}}$ï¼Œ$B_{N}$æ˜¯æ’åºçŸ©é˜µï¼Œå®Œæˆæ¯”ç‰¹çš„ååºæ“ä½œï¼Œ$F^{\\otimes n}$è¡¨ç¤ºçŸ©é˜µ$F$è¿›è¡Œ$n$æ¬¡$Kronecker$ç§¯æ“ä½œï¼Œæœ‰é€’å½’å…¬å¼${F^{\\otimes n}}=F\\otimes {F^{\\otimes \\left( n-1 \\right)}}$ä¸”${F^{\\otimes 1}}\\text{=}F=\\left[ \\begin{matrix}\n1 \u0026amp; 0 \\\n1 \u0026amp; 1 \\\n\\end{matrix} \\right]$ã€‚\nä¸»è¦çš„æ­¥éª¤ä¸ºï¼š\nå¯é æ€§ä¼°è®¡ å¯é æ€§ä¼°è®¡å°±æ˜¯æåŒ–ç çš„æ„é€ ï¼Œè¿™ä¸ªè¿‡ç¨‹æˆ‘ä»¬é€‰å‡ºä¿¡é“å®¹é‡é«˜çš„å­ä¿¡é“è¿›è¡Œä¼ è¾“ï¼Œä¿¡é“å®¹é‡ä½çš„å­ä¿¡é“ä¼ è¾“å†»ç»“æ¯”ç‰¹ã€‚\nå¸¸è§çš„å‡ ç§å¯é æ€§ä¼°è®¡çš„æ–¹æ³•ï¼ˆæåŒ–ç æ„é€ æ–¹æ³•ï¼‰æœ‰ï¼š\nå·´å£«å‚æ•°ä¼°è®¡æ³•ã€‚\nè’™ç‰¹å¡æ´›æ³•ã€‚\nå¯†åº¦è¿›åŒ–æ³•ã€‚\né«˜æ–¯è¿‘ä¼¼æ³•ã€‚\næ¯”ç‰¹æ··åˆ å‡è®¾é€šè¿‡é”™è¯¯æ¦‚ç‡è¿›è¡ŒæåŒ–ç æ„é€ ä¹‹åå¾—åˆ°æåŒ–åºåˆ—ä¸º$\\left{ 3,5,6,7,0,1,2,4 \\right}$ ï¼Œé€‰æ‹©å‰é¢Kä¸ªä¿¡é“å³$A=\\left{ 3,5,6,7\\right}$å‘é€ä¿¡æ¯æ¯”ç‰¹ï¼›å¦å¤–çš„ä¿¡é“é›†åˆ${A^{c}}=\\left{ 0,1,2,4\\right}$ä½œä¸ºå›ºå®šæ¯”ç‰¹ä¼ è¾“ã€‚è®¾ä¿¡æ¯æ¯”ç‰¹é›†åˆä¸º$\\left( {i_{0}},{i_{1}},{i_{2}},{i_{3}} \\right)=\\left( 1,1,1,1 \\right)$ï¼Œå›ºå®šæ¯”ç‰¹è®¾ç½®ä¸º0ï¼Œåˆ™æœ€ç»ˆå¾—åˆ°å¾…ç¼–ç çš„ä¿¡æ¯æ¯”ç‰¹ï¼š\n$$\nu_{0}^{7}=\\left[ 0,0,0,{i_{0}},0,{i_{1}},{i_{2}},{i_{3}} \\right]=\\left[ 0,0,0,1,0,1,1,1 \\right]\n$$\nç»è¿‡ä¸Šé¢çš„è¿‡ç¨‹æˆ‘ä»¬å°±å®Œæˆäº†å¯¹ä¿¡æ¯ä½å’Œå†»ç»“ä½çš„æ¯”ç‰¹æ··åˆã€‚\næ„é€ ç”ŸæˆçŸ©é˜µ é¦–å…ˆæˆ‘ä»¬æ±‚å‡ºæ’åºçŸ©é˜µ$B_{N}$ï¼Œå…¶æœ‰é€’å½’å¼ï¼š\n$$\n{B_{N}}={R_{N}}\\left( {I_{2}}\\otimes {B_{N/{2};}} \\right)\n$$\n$$\n{B_{2}}={I_{2}}\n$$\næˆ‘ä»¬å¾—åˆ°æ’åºçŸ©é˜µ$B_{N}$ï¼Œå¯¹è¾“å…¥åºåˆ—å®Œæˆå¥‡åºå…ƒç´ å’Œå¶åºå…ƒç´ çš„åˆ†ç¦»ï¼Œå³å…ˆæ’å¥‡åºå…ƒç´ ï¼Œå†æ’å¶åºå…ƒç´ ï¼Œå…¶ä½œä¸ºæ•ˆæœå¦‚ä¸‹:\n$$\n\\left( {u_{1}},{u_{2}},{u_{3}},{u_{4}},\u0026hellip;,u{}{N} \\right)\\times {R {N}}=\\left( {u_{1}},{u_{3}},{u_{5}},\u0026hellip;,{u_{N-1}},{u_{2}},{u_{4}},{u_{6}},\u0026hellip;,{u_{N}} \\right)\n$$\n$F$çŸ©é˜µæˆ‘ä»¬å¯ä»¥æ ¹æ®ä¸‹é¢çš„é€’å½’å¼è¿›è¡Œæ±‚è§£ï¼š\n$$\n{F^{\\otimes n}}=F\\otimes {F^{\\otimes \\left( n-1 \\right)}}\n$$\n$$\nF=\\left[ \\begin{matrix}\n1 \u0026amp; 0 \\\n1 \u0026amp; 1 \\\n\\end{matrix} \\right]\n$$\næœ€åï¼Œæˆ‘ä»¬å°†æ±‚å¾—çš„æ’åºçŸ©é˜µå’Œ$F$çŸ©é˜µç›¸ä¹˜ï¼Œå¾—åˆ°ç”ŸæˆçŸ©é˜µ$G_{N}$ï¼š\n$$\n{G_{N}}={B_{N}}{F^{\\otimes n}}\n$$\nå‡è®¾æˆ‘ä»¬æ±‚å¾—çš„ç”ŸæˆçŸ©é˜µæ˜¯ï¼š\nç”ŸæˆæåŒ–ç  å°†ä¿¡æ¯æ¯”ç‰¹ä¸ç”ŸæˆçŸ©é˜µ$G_{N}$ç›¸ä¹˜å¾—åˆ°æœ€ç»ˆç¼–ç åçš„æåŒ–ç ï¼Œä¾‹å¦‚ï¼š\nå‚è€ƒï¼š\nPolar Codeï¼ˆ2ï¼‰ç¼–ç åŸç† | Marshall - Comm. Tech. Blog ","description":"æåŒ–ç çš„ç¼–ç å°±æ˜¯ä¸€äº›ç®€å•çš„çº¿æ€§è¿ç®—ï¼Œé€šè¿‡çŸ©é˜µè¿›è¡Œç®€åŒ–å¤šç»´çš„è¿ç®—ï¼Œå½’æ ¹åˆ°åº•è¿˜æ˜¯åŸºäºåŸºæœ¬çš„å¼‚æˆ–æ“ä½œã€‚","id":10,"section":"posts","tags":["æåŒ–ç "],"title":"æåŒ–ç -ç¼–ç ","uri":"https://hugo.jiahongw.com/zh/posts/polarcode/polar-code-encode/"},{"content":"åŸºæœ¬æ¦‚å¿µ ä¿¡å™ªæ¯” ä¿¡å™ªæ¯”ï¼Œè‹±æ–‡åç§°å«åšSNRï¼ˆSIGNAL-NOISE RATIO )ï¼Œæ˜¯æŒ‡ä¸€ä¸ªç”µå­è®¾å¤‡æˆ–è€…ç”µå­ç³»ç»Ÿä¸­ä¿¡å·ä¸å™ªå£°çš„æ¯”ä¾‹ã€‚ä¿¡å™ªæ¯”çš„è®¡ç®—å¯ä»¥ä¸ºæœ‰ç”¨ä¿¡å·åŠŸç‡ä¸å™ªå£°åŠŸç‡çš„æ¯” ï¼š\n$$\nSNR = \\frac {P_{signal}} {P_{noise}}\n$$\nå®ƒçš„å•ä½ä¸€èˆ¬ä½¿ç”¨åˆ†è´ï¼Œå…¶å€¼ä¸ºåå€å¯¹æ•°ä¿¡å·ä¸å™ªå£°åŠŸç‡æ¯”:\n$$\nSNR(dB) = 10\\log_{10}(\\frac {P_{sibnal}} {P_{noise}})\n$$\nå…¶ä¸­ï¼Œ$P_{signal}$ä¸ºä¿¡å·åŠŸç‡ï¼Œ$P_{noise}$ä¸ºå™ªå£°åŠŸç‡ã€‚\nè½¬ç§»æ¦‚ç‡ ä¸€ä¸ªäºŒè¿›åˆ¶è¾“å…¥ç¦»æ•£æ— è®°å¿†ä¿¡é“ï¼ˆB-DMCï¼‰å¯è¡¨ç¤ºä¸º$W:X\\to Y$ï¼Œ$X$æ˜¯è¾“å…¥ç¬¦å·é›†åˆï¼Œ$Y$æ˜¯è¾“å‡ºç¬¦å·é›†åˆï¼Œè½¬ç§»æ¦‚ç‡ä¸º$W\\left( y|x \\right),x\\in X,y\\in Y$ã€‚ç”±äºä¿¡é“æ˜¯äºŒè¿›åˆ¶è¾“å…¥ï¼Œé›†åˆ$X=\\left{ 0,1 \\right}$ï¼›$Y$å’Œ$W\\left( y|x \\right)$æ˜¯ä»»æ„å€¼ã€‚å¯¹ä¿¡é“$W$çš„$N$æ¬¡ä½¿ç”¨åçš„ä¿¡é“å¯è¡¨ç¤ºä¸º${W^{N}}$ï¼Œåˆ™ä¿¡é“${W^{N}}:{X^{N}}\\to {Y^{N}}$çš„è½¬ç§»æ¦‚ç‡ä¸ºï¼š\n$$\n{W^{N}}\\left( y_1^{N}|x_{1}^{N} \\right)=\\prod\\nolimits_{i=1}^{N}{W\\left( y|x \\right)}\n$$\nå¯¹ç§°å®¹é‡ å¯¹ç§°å®¹é‡æ˜¯å¯¹ä¿¡é“é€Ÿç‡çš„åº¦é‡ï¼Œè®°ä½œ$I(W)$ï¼Œè¡¨ç¤ºä¿¡é“$W$åœ¨ç­‰æ¦‚ç‡è¾“å…¥ä¸‹çš„å¯é ä¼ è¾“æ—¶çš„æœ€å¤§é€Ÿç‡,è®¡ç®—å…¬å¼å¦‚ä¸‹ï¼š\n$$\nI\\left( W \\right)\\triangleq \\sum\\limits_{y\\in Y}{\\sum\\limits_{x\\in X}{\\frac{1}{2}}}W\\left( y|x \\right)\\log \\frac{W\\left( y|x \\right)}{\\frac{1}{2}W\\left( y|0 \\right)+\\frac{1}{2}W\\left( y|1 \\right)}\n$$\nå½“ç é•¿$N$è¶‹è¿‘äºæ— ç©·çš„æ—¶å€™ï¼Œä¿¡é“å®¹é‡è¶‹è¿‘äº1çš„åˆ†è£‚ä¿¡é“æ¯”ä¾‹çº¦ä¸º$K=NÃ—I(W)$ï¼Œè¿™éƒ¨åˆ†æ˜¯ç”¨æ¥ä¼ è¾“ä¿¡æ¯æ¯”ç‰¹çš„ä¿¡é“æ•°é‡ï¼Œè€Œä¿¡é“å®¹é‡è¶‹è¿‘äº0çš„æ¯”ä¾‹çº¦ä¸º$NÃ—(1âˆ’I(W))$ï¼Œè¿™éƒ¨åˆ†è¡¨ç¤ºå†»ç»“æ¯”ç‰¹çš„ä¿¡é“æ•°é‡ã€‚å¯¹äºä¿¡é“å®¹é‡ä¸º1çš„å¯é ä¿¡é“ï¼Œå¯ä»¥ç›´æ¥æ”¾ç½®æ¶ˆæ¯æ¯”ç‰¹è€Œä¸é‡‡ç”¨ä»»ä½•ç¼–ç ï¼Œå³ç›¸å½“äºç¼–ç é€Ÿç‡ä¸º$R=1$ï¼›è€Œå¯¹äºä¿¡é“å®¹é‡ä¸º0çš„ä¸å¯é ä¿¡é“ï¼Œå¯ä»¥æ”¾ç½®å‘é€ç«¯å’Œæ¥æ”¶ç«¯éƒ½äº‹å…ˆå·²çŸ¥çš„å†»ç»“æ¯”ç‰¹ï¼Œå³ç›¸å½“äºç¼–ç é€Ÿç‡ä¸º$R=0$ã€‚é‚£ä¹ˆå½“ç é•¿$N \\to\\infty$æ—¶ï¼ŒæåŒ–ç çš„å¯è¾¾ç¼–ç é€Ÿç‡$R= \\frac {K}{N}= \\frac {NÃ—I(W)}{N}=I(W)$ï¼Œå³åœ¨ç†è®ºä¸Šï¼ŒæåŒ–ç å¯ä»¥è¢«è¯æ˜æ˜¯å¯è¾¾ä¿¡é“å®¹é‡çš„ã€‚\nä¿¡é“æåŒ– ä¿¡é“æåŒ–åˆ†ä¸ºä¿¡é“è”åˆå’Œä¿¡é“åˆ†è£‚ä¸¤ä¸ªé˜¶æ®µã€‚å¯¹äºé•¿åº¦ä¸º$N={2^{n}}$ï¼ˆ$n$ä¸ºä»»æ„æ•´æ•°ï¼‰çš„æåŒ–ç ï¼Œå®ƒåˆ©ç”¨ä¿¡é“$W$çš„$N$ä¸ªç‹¬ç«‹å‰¯æœ¬ï¼Œè¿›è¡Œä¿¡é“è”åˆå’Œä¿¡é“åˆ†è£‚ï¼Œå¾—åˆ°æ–°çš„$N$ä¸ªå­ä¿¡é“$\\left{ W_{N}^{\\left( 1 \\right)},W_{N}^{\\left( 2 \\right)},\u0026hellip;,W_{N}^{\\left( N \\right)} \\right}$ã€‚éšç€ç é•¿çš„å¢åŠ ï¼Œåˆ†è£‚ä¹‹åçš„ä¿¡é“å°†å‘ä¸¤ä¸ªæç«¯å‘å±•ï¼šå…¶ä¸­ä¸€éƒ¨åˆ†åˆ†è£‚ä¿¡é“ä¼šè¶‹è¿‘äºå®Œç¾ä¿¡é“ï¼Œå³ä¿¡é“å®¹é‡è¶‹è¿‘äº1çš„æ— å™ªå£°ä¿¡é“ï¼›è€Œå¦ä¸€éƒ¨åˆ†åˆ†è£‚ä¿¡é“ä¼šè¶‹è¿‘äºå®Œå…¨å™ªå£°ä¿¡é“ï¼Œå³ä¿¡é“å®¹é‡è¶‹è¿‘äº0çš„ä¿¡é“ã€‚\næˆ‘ä»¬ä¸»è¦ç ”ç©¶äºŒè¿›åˆ¶ç¦»æ•£æ— è®°å¿†ä¿¡é“ï¼Œå°†ä¸Šé¢çš„ä¿¡é“æ¨¡å‹ï¼ˆåŒ…æ‹¬BECã€BSCã€AWGNï¼‰è¿›è¡ŒæŠ½è±¡ï¼Œæˆ‘ä»¬å¯ä»¥å¾—å‡ºä¸‹é¢çš„ä¿¡é“ä¼ è¾“æ¨¡å‹ï¼š\nå›¾ä¸­çš„Wå¯ä»¥æ˜¯BECä¿¡é“ï¼Œä¹Ÿå¯ä»¥æ˜¯BSCä¿¡é“æˆ–è€…AWGNä¿¡é“ï¼Œå…¶ä¸­I(W)ä¸ºä¿¡é“å®¹é‡ã€‚\nä¿¡é“è”åˆ ä¿¡é“è”åˆæ˜¯å°†å¤šä¸ªå­ä¿¡é“è¿›è¡Œè¶å½¢çš„å¼‚æˆ–æ“ä½œçš„è¿‡ç¨‹ã€‚å¯¹äºç é•¿ä¸ºN=2çš„æåŒ–ç ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹é¢çš„è¶å½¢å¼‚æˆ–æ“ä½œå°†ä¸¤ä¸ªä¿¡é“è¿›è¡Œæ··åˆï¼š\nç”±ä¸Šå›¾å¯ä»¥å‘ç°ï¼Œè¿›è¡Œä¿¡é“è”åˆä¹‹åï¼Œåæ ‡ä¸åŒä¿¡é“çš„ä¿¡é“å®¹é‡å‘ç”Ÿäº†æåŒ–ç°è±¡ï¼Œæœ‰ä¸€ä¸ªæ¯”ç‰¹çš„ä¿¡é“ä¿¡é“å®¹é‡$I(W)$å¢åŠ äº†ï¼Œå¦å¤–ä¸€ä¸ªæ¯”ç‰¹çš„ä¿¡é“å®¹é‡$I(W)$å‡å°‘äº†ã€‚ä¿¡é“å®¹é‡å°çš„ï¼Œæˆ‘ä»¬ç§°ä¸ºå·®ä¿¡é“ï¼Œä¿¡é“å®¹é‡å¤§çš„ï¼Œæˆ‘ä»¬ç§°ä¸ºå·å¥½ä¿¡é“ã€‚å› ä¸ºè¿›è¡Œäº†ä¿¡é“è”åˆä¹‹åï¼Œå› ä¸ºè¦æ±‚å¾—å·¦è¾¹çš„ä¿¡é“$u1$ï¼Œå¿…é¡»æ˜¯åœ¨å³è¾¹çš„ä¿¡é“$y1$å’Œ$y2$åŒæ—¶éƒ½æ”¶åˆ°çš„æƒ…å†µä¸‹æ‰èƒ½å¤Ÿå¾—å‡º$u1$ï¼Œæ‰€ä»¥$u1$çš„ä¿¡é“å®¹é‡å°±æ˜¯ä¿¡é“$y1$å’Œ$y2$çš„ä¿¡é“å®¹é‡ä¹˜ç§¯ï¼›ç›¸åº”çš„ï¼Œå¯¹äºä¿¡é“$u2$ï¼Œåªæœ‰$y1$å’Œ$y2$éƒ½æ”¶ä¸åˆ°çš„æƒ…å†µä¸‹ï¼Œæ‰æ¥æ”¶ä¸åˆ°ä¿¡é“ï¼Œæ‰€ä»¥å®ƒçš„ä¿¡é“å®¹é‡$I(W)$ä¸º$2*0.5 - 0.5^{2}$ã€‚\næˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸€ä¸ªäºŒç»´è¡¨æ ¼æ¥è®¡ç®—å®ƒä»¬ä¼ è¾“çš„æ¦‚ç‡ï¼š\ny1 y2 u1 u2 âˆš âˆš âˆš âˆš âˆš x x âˆš x âˆš x âˆš x x x x ç”±è¡¨æ ¼1å¯ä»¥å‘ç°ï¼Œå¯¹äºæ¥æ”¶æ–¹æ”¶åˆ°çš„ä¿¡å·y1å’Œy2ï¼Œæ€»å…±æœ‰4ç§æƒ…å†µï¼ŒXè¡¨ç¤ºè¯¥ä¿¡é“å‘ç”Ÿé”™è¯¯ï¼Œæœªæ”¶åˆ°ä¿¡é“ï¼›âˆšè¡¨ç¤ºè¯¥ä¿¡é“æ”¶åˆ°äº†ä¿¡é“ã€‚å¯¹äºå­ä¿¡é“u1ï¼Œåœ¨å››ç§æƒ…å†µä¸­ï¼Œåªæœ‰ä¸€ç§æƒ…å†µèƒ½å¤Ÿæ¥å—å¾—åˆ°u1ï¼Œä¹Ÿå°±æ˜¯åŒæ—¶æ¥æ”¶åˆ°y1å’Œy2çš„æƒ…å†µ,æ‰€ä»¥ä¿¡é“å®¹é‡ä¸º1/4ï¼›è€Œå¯¹äºu2,åªè¦èƒ½å¤Ÿæ”¶åˆ°y1æˆ–y2çš„ä»»æ„ä¸€ä¸ªå®ƒå°±èƒ½å¤Ÿè§£å‡ºæ¥,æ ¹æ®ä¿¡é“æåŒ–ç†è®ºï¼Œæˆ‘ä»¬åœ¨è¿›è¡ŒæåŒ–çš„è¿‡ç¨‹ä¸­ï¼Œå°±å·²ç»çŸ¥é“ä¿¡é“u1çš„ä¿¡é“å®¹é‡æ¯”è¾ƒå°ï¼Œæˆ‘ä»¬ä¼šæŠŠå®ƒä½œä¸ºå†»ç»“æ¯”ç‰¹ï¼Œå¡«å……ä¸º0ï¼Œä¸ä¼ è¾“ä¿¡æ¯æ¯”ç‰¹ï¼Œä»…ä¼ è¾“å†»ç»“æ¯”ç‰¹ï¼Œæ‰€ä»¥åœ¨æ²¡æœ‰æ¥æ”¶åˆ°y2çš„æƒ…å†µä¸‹æˆ‘ä»¬ä¹Ÿèƒ½å¤Ÿå¾—å‡ºu2ã€‚\nå¯¹äºN=4çš„ç é•¿ï¼Œæˆ‘ä»¬å¯ä»¥é€’å½’çš„è¿›è¡Œä¿¡é“è”åˆï¼Œå¦‚å›¾ï¼Œåªä¸è¿‡ç›¸æ¯”äºN=2çš„ç é•¿çš„æåŒ–ç ï¼Œæˆ‘ä»¬éœ€è¦å¢åŠ ä¸€æ¬¡çš„ä¿¡é“è”åˆè¿‡ç¨‹ï¼š\næŒ‰ç…§è¿™æ ·ä¸æ–­çš„é€’å½’ä¸‹å»ï¼Œåˆ°nçº§ä¹‹åï¼Œå¯ä»¥å¾—åˆ°é€’å½’çš„ä¸€èˆ¬å¼ï¼š${W_{N/{2};}}$çš„2ä¸ªç‹¬ç«‹å‰¯æœ¬è”åˆäº§ç”Ÿä¿¡é“${W_{N}}$ï¼Œæˆ‘ä»¬å¯ä»¥çš„åˆ°ä»»æ„ç é•¿ä¸º$N=2^{n}$çš„æåŒ–ç ã€‚\nä¿¡é“åˆ†è£‚ ä¿¡é“åˆ†è£‚ä½“ç°åœ¨ä¿¡é“è”åˆä¹‹ä¸­ ï¼Œå‚è€ƒæ–‡çŒ®ä¸­å¯¹äºä¿¡é“åˆ†è£‚çš„è§£é‡Šï¼Œå…¶å¤§è‡´è¿‡ç¨‹æ˜¯å°†ä¸¤ä¸ªä¿¡é“$W_{N/2}$è”åˆæˆä¸€ä¸ªä¿¡é“$W_N$ä¹‹åï¼Œå†å°†è”åˆçš„ä¿¡é“$W_N$åˆ†è£‚æˆä¸¤ä¸ªå­ä¿¡é“$W_{N/2}$ï¼Œæ­¤æ—¶ï¼Œè¿™ä¸¤ä¸ªå­ä¿¡é“çš„è½¬ç§»æ¦‚ç‡ä¹Ÿæ”¹å˜äº†ï¼Œè¿™æ ·æåŒ–ç å°±å®Œæˆäº†ä¿¡é“åˆ†è£‚ã€‚æ›´å…·ä½“çš„æ¥è¯´ï¼Œå®ƒå­˜åœ¨ä»¥ä¸‹ä¸¤ä¸ªé€’æ¨å…¬å¼è®¡ç®—å­ä¿¡é“çš„è½¬ç§»æ¦‚ç‡ï¼š\n$$\nW_{N}^{\\left( 2i-1 \\right)}\\left( y_{1}^{N},u_{1}^{2i-2}|{u_{2i-1}} \\right)=\\sum\\limits_{u_{2i}}{\\frac{1}{2}W_{N/{2};}^{\\left( i \\right)}\\left( y_{1}^{N/{2};},u_{1,o}^{2i-2}\\oplus u_{1,e}^{2i-2}|{u_{2i-1}}\\oplus {u_{2i}} \\right)\\cdot W_{N/{2};}^{\\left( i \\right)}\\left( y_{N/{2};+1}^{N},u_{1,e}^{2i-2}|{u_{2i}} \\right)}\n$$\n$$\nW_{N}^{\\left( 2i \\right)}\\left( y_{1}^{N},u_{1}^{2i-1}|{u_{2i}} \\right)=\\frac{1}{2}W_{N/{2};}^{\\left( i \\right)}\\left( y_{1}^{N/{2};},u_{1,o}^{2i-2}\\oplus u_{1,e}^{2i-2}|{u_{2i-1}}\\oplus {u_{2i}} \\right)\\cdot W_{N/{2};}^{\\left( i \\right)}\\left( y_{N/{2};+1}^{N},u_{1,e}^{2i-2}|{u_{2i}} \\right)\n$$\nå‚è€ƒï¼š\nã€Šâ€œå¤ªææ··ä¸€â€â€”â€”æåŒ–ç åŸç†åŠ5Gåº”ç”¨ã€‹ ","description":"ä»‹ç»å…³äºæåŒ–ç çš„ä¸€äº›åŸºæœ¬çš„æ•°å­¦ä¸è®¡ç®—åŸç†ï¼ŒåŒ…æ‹¬å¦‚ä½•è¿›è¡Œæ¦‚ç‡çš„è½¬ç§»çš„ã€‚","id":11,"section":"posts","tags":["æåŒ–ç "],"title":"æåŒ–ç -åŸºæœ¬åŸç†","uri":"https://hugo.jiahongw.com/zh/posts/polarcode/polar-code-fundamentals/"},{"content":"åœ¨é€šä¿¡è¿‡ç¨‹ä¸­ï¼Œç‰©ç†å±‚ä¼ è¾“çš„å°±æ˜¯ç”µä¿¡å·ï¼Œå‡å¦‚æˆ‘ä»¬åªç”¨0å’Œ1ä¼ è¾“ä¿¡å·ï¼Œå¹¶ä¸”è¿™äº›ä¿¡é“äº’ç›¸éƒ½æ²¡æœ‰å…³ç³»ï¼Œæˆ‘ä»¬ç§°ä¸ºäºŒè¿›åˆ¶ç¦»æ•£æ— è®°å¿†ä¿¡é“ã€‚ä¿¡é“æ¨¡å‹æ˜¯ç ”ç©¶ä¿¡é“ç¼–ç çš„åŸºç¡€ï¼Œå¸¸è§çš„å‡ ç§ä¿¡é“æ¨¡å‹åˆ†åˆ«æœ‰ï¼šäºŒè¿›åˆ¶åˆ é™¤ä¿¡é“ï¼ˆBECï¼‰ã€äºŒè¿›åˆ¶å¯¹ç§°ä¿¡é“ï¼ˆBSCï¼‰ã€é«˜æ–¯ä¿¡é“ï¼ˆAWGNï¼‰ã€‚è®¾ä¿¡é“çš„è¾“å…¥å’Œè¾“å‡ºåˆ†åˆ«æ˜¯é•¿ä¸ºNçš„åºåˆ—ï¼Œè¾“å…¥æ˜¯xï¼Œè¾“å‡ºæ˜¯yï¼Œå…¶ä¿¡é“çš„è½¬ç§»æ¦‚ç‡æ»¡è¶³ï¼š\n$$\np\\left( {y|x} \\right) = \\sum_{i=1}^N p\\left( {y_{i} | x_{i}} \\right)\n$$\næ— æŸä¿¡é“ æ— è®ºå‘é€ä»»ä½•æ¶ˆæ¯ï¼Œæ¥å—æ–¹éƒ½èƒ½å¤Ÿå‡†ç¡®æ— è¯¯çš„æ¥æ”¶åˆ°ï¼Œå¹¶ä¸”ä¸ä¼šå‘ç”Ÿé”™è¯¯ï¼Œé‚£ä¹ˆè¿™ä¸ªä¿¡é“å°±å¯ä»¥è¯´æ˜¯ä¸€ä¸ªæ— æŸä¿¡é“ã€‚æœ€ç®€å•çš„çš„å°±æ˜¯ä¸‹é¢è¿™ä¸ªæ¨¡å‹ï¼Œä¸ç®¡å‘é€è€…å‘é€çš„æ˜¯0è¿˜æ˜¯1ï¼Œæ¥æ”¶è€…æ¥å—çš„éƒ½æ˜¯ä¸€è‡´çš„ã€‚\nå‡å¦‚æˆ‘ä»¬éšæœºè¿›è¡Œä¼ è¾“0æˆ–è€…1çš„æ•°æ®ï¼Œå…¶ä¼ è¾“çš„æ•°å€¼å›¾ä¸ºä¸‹é¢ï¼š\näºŒè¿›åˆ¶åˆ é™¤ä¿¡é“ äºŒè¿›åˆ¶åˆ é™¤ä¿¡é“ï¼Œç®€è®°ä¸ºBECï¼ˆBinary Erasure Channel ï¼‰ã€‚Ïµç§°ä¸ºåˆ é™¤æ¦‚ç‡ï¼Œè¡¨ç¤ºæœ‰Ïµçš„æ¦‚ç‡è¿™ä¸ªä¿¡å·ä¼šä¸¢å¤±ã€‚å½“æ¥æ”¶æ–¹å¾—åˆ°ä¸€ä¸ªä½ï¼Œå®ƒæ˜¯100%ç¡®å®šçš„ä½æ˜¯æ­£ç¡®çš„ã€‚åªæœ‰å½“ä½è¢«æ“¦é™¤æ—¶ï¼Œæ‰ä¼šå‡ºç°å”¯ä¸€çš„æ··æ·†ã€‚å¯¹äºäºŒè¿›åˆ¶ç¦»æ•£æ— è®°å¿†ä¿¡é“ï¼Œæˆ‘ä»¬æœ‰Ïµçš„æ¦‚ç‡ä¸¢å¤±0æˆ–è€…1çš„æ¯”ç‰¹ä½ã€‚\nBECçš„ä¿¡é“å®¹é‡ä¸ºï¼š\n$$\nC= 1 - \\epsilon\n$$\näºŒè¿›åˆ¶å¯¹ç§°ä¿¡é“ äºŒè¿›åˆ¶å¯¹ç§°ä¿¡é“ï¼Œç®€è®°ä¸ºBSCï¼ˆBinary Symmetric Channel ï¼‰ã€‚pç§°ä¸ºäº¤å‰æ¦‚ç‡ï¼Œè¡¨ç¤ºæœ‰pçš„æ¦‚ç‡ä¼šå¯¼è‡´ä¼ è¾“è¿‡ç¨‹ä¸­0ä¿¡å·å’Œ1ä¿¡å·çš„é”™ä¹±ã€‚ï¼ˆé”™ä¹±çš„æ„æ€æ˜¯å‘é€0ï¼Œæ”¶åˆ°å´æ˜¯1ï¼›æˆ–è€…å‘é€1ï¼Œæ”¶åˆ°å´æ˜¯0ï¼‰\nBSCçš„ä¿¡é“å®¹é‡ä¸ºï¼š\n$$\nC = \\log n + q\\log q + (1-q) \\log \\frac {1-q}{n-1}\n$$\nåŠ æ€§é«˜æ–¯ç™½å™ªå£°ä¿¡é“ é«˜æ–¯ä¿¡é“ï¼Œå¸¸æŒ‡åŠ æƒé«˜æ–¯ç™½å™ªå£°ï¼ˆAWGNï¼‰ä¿¡é“ã€‚è¿™ç§å™ªå£°å‡è®¾ä¸ºåœ¨æ•´ä¸ªä¿¡é“å¸¦å®½ä¸‹åŠŸç‡è°±å¯†åº¦ï¼ˆPDFï¼‰ä¸ºå¸¸æ•°ï¼Œå¹¶ä¸”æŒ¯å¹…ç¬¦åˆé«˜æ–¯æ¦‚ç‡åˆ†å¸ƒã€‚\nä¸€èˆ¬æ¥è¯´ï¼Œé«˜æ–¯ä¿¡é“éœ€è¦é…åˆBPSKæœºåˆ¶è¿›è¡Œè°ƒåˆ¶ï¼Œåœ¨ä¼ è¾“ä¹‹å‰ï¼Œæˆ‘ä»¬å¯¹0å’Œ1æ¯”ç‰¹è¿›è¡Œå˜æ¢ï¼Œæ¯”ç‰¹0ä¼šå˜æˆ1ï¼Œæ¯”ç‰¹1å˜æˆ-1ï¼Œè€Œè¿™ä¸ªå°†æ¯”ç‰¹è¿›è¡Œè½¬æ¢çš„è¿‡ç¨‹å°±æ˜¯BPSKè°ƒåˆ¶ï¼Œæœ€ååœ¨BPSKè°ƒåˆ¶åå†åŠ ä¸Šé«˜æ–¯å™ªå£°ï¼Œå®é™…çš„æ¨¡å‹å¦‚ä¸‹ï¼šã€‚\né€šè¿‡BPSKè°ƒåˆ¶ä¹‹å0æ¯”ç‰¹å’Œ1æ¯”ç‰¹éƒ½ä¼šå‘1å’Œ-1è¿™ä¸¤ä¸ªä¸´ç•Œçº¿é ç»ï¼Œåœ¨è¿™ä¸ªæƒ…å†µä¸‹ä¼ å…¥é«˜æ–¯ä¿¡é“ï¼Œå³ä½¿å­˜åœ¨é«˜æ–¯å™ªå£°è¿›è¡Œå½±å“ï¼Œæˆ‘ä»¬ä¹Ÿèƒ½å¤Ÿå‡å°å®ƒçš„å½±å“ï¼Œåœ¨è§£ç ç«¯å¯¹ç å­—è¿›è¡ŒBPSKè§£è°ƒï¼Œèƒ½å¤Ÿå¾—åˆ°è¾ƒé«˜çš„å‡†ç¡®ç‡ã€‚\nç”±å›¾å¯ä»¥å‘ç°ï¼Œå€¼é è¿‘1çš„ä¿¡å·è¡¨ç¤ºåŸæ¥çš„ä¿¡å·æ˜¯0ï¼Œå€¼é è¿‘-1çš„ä¿¡å·è¡¨ç¤ºåŸæ¥çš„ä¿¡å·æ˜¯1ã€‚è¿™æ ·çš„å¥½å¤„æ˜¯åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­å‡å°‘é«˜æ–¯å™ªå£°çš„å¹²æ‰°ï¼Œè®©ä¼ è¾“çš„ä¿¡å·æ›´åŠ ç¨³å®šã€‚\nç‰¹åˆ«çš„ï¼Œ5Gæ ‡å‡†è¦æ±‚ä¿¡é“ç¼–ç è‡³å°‘èƒ½å¤Ÿåœ¨åŠ æ€§é«˜æ–¯ç™½å™ªå£°ä¿¡é“ï¼ˆAWGNï¼‰ä¸‹è¿›è¡Œä¼ è¾“ã€‚\n","description":"åœ¨ä¿¡æ¯è®ºä¸­ï¼Œä¿¡é“æ˜¯æŒ‡ä¿¡æ¯ä¼ è¾“çš„é€šé“ã€‚æˆ‘ä»¬åœ¨å®é™…é€šä¿¡ä¸­æ‰€åˆ©ç”¨çš„å„ç§ç‰©ç†é€šé“æ˜¯ä¿¡é“çš„æœ€å…¸å‹çš„ä¾‹å­ï¼Œå¦‚ç”µç¼†ã€å…‰çº¤ã€ç”µæ³¢ä¼ å¸ƒçš„ç©ºé—´ã€è½½æ³¢çº¿è·¯ç­‰ç­‰ã€‚ä½†æ˜¯æåŒ–ç çš„ä¿¡é“æ¨¡å‹å°†ä»–ä»¬è¿›è¡Œäº†æŠ½è±¡ï¼Œå°†ä¿¡é“åˆ†æˆäº†å‡ ç±»ï¼šBECã€BSCã€AWGNã€‚","id":12,"section":"posts","tags":["æåŒ–ç ","ä¿¡é“æ¨¡å‹"],"title":"æåŒ–ç -ä¿¡é“æ¨¡å‹","uri":"https://hugo.jiahongw.com/zh/posts/polarcode/polar-code-channel-model/"},{"content":"ArÄ±kanæ•™æˆåœ¨æ–‡çŒ®[1]æå‡ºäº†ä¸²è¡ŒæŠµæ¶ˆSCè¯‘ç ç®—æ³•ã€‚SCè¯‘ç ç®—æ³•ç±»ä¼¼ä¸€ä¸ªæ·±åº¦ä¼˜å…ˆæœç´¢çš„ç®—æ³•ï¼Œå…¶æ ¹æ®ä¸¤ä¸ªåˆ¤å†³å‡½æ•°è¿›è¡Œè¿­ä»£è®¡ç®—æœ€å¤§ä¼¼ç„¶å¯¹æ•°æ¯”LLRï¼Œä¸¤ä¸ªåˆ¤å†³å‡½æ•°åˆ†åˆ«å«åšfå‡½æ•°å’Œgå‡½æ•°ã€‚ä¸‹é¢æ˜¯è¿™ä¸¤ä¸ªå…¬å¼çš„è®¡ç®—æ–¹æ³•ï¼š\n$$\n\\begin{align}\nf\\left( a,b \\right)=\\ln \\left( \\frac{1+{ {e}^{a+b}}}{ { {e}^{a}}+{ {e}^{b}}} \\right)\n\\end{align}\n$$\n$$\n\\begin{align}\ng\\left( a,b,{ {u}{s}} \\right)={ {\\left( -1 \\right)}^{ { {u} {s}}}}a+b\n\\end{align}\n$$\nå…¶ä¸­ï¼Œ$a,b\\in R,{ {u}_{s}}\\in \\left{ 0,1 \\right}$ã€‚LLRçš„é€’å½’è¿ç®—å€ŸåŠ©å‡½æ•°få’Œgè¡¨ç¤ºå¦‚ä¸‹ï¼š\n$$\n\\begin{align}\nL_{N}^{\\left( 2i-1 \\right)}\\left( y_{1}^{N},\\hat{u}{1}^{2i-2} \\right)=f\\left( L {N/2}^{\\left( i \\right)}\\left( y_{1}^{ {N}/{2};},\\hat{u}{1,o}^{2i-2}\\oplus \\hat{u} {1,e}^{2i-2} \\right),L_{N/2}^{\\left( i \\right)}\\left( y_{ {N}/{2};+1}^{N},\\hat{u}_{1,e}^{2i-2} \\right) \\right)\n\\end{align}\n$$\n$$\n\\begin{align}\nL_{N}^{\\left( 2i \\right)}\\left( y_{1}^{N},\\hat{u}{1}^{2i-1} \\right)=g\\left( L {N/2}^{\\left( i \\right)}\\left( y_{1}^{ {N}/{2};},\\hat{u}{1,o}^{2i-2}\\oplus \\hat{u} {1,e}^{2i-2} \\right),L_{N/2}^{\\left( i \\right)}\\left( y_{ {N}/{2};+1}^{N},\\hat{u}{1,e}^{2i-2} \\right),{ { {\\hat{u}}} {2i-1}} \\right)\n\\end{align}\n$$\né€’å½’çš„ç»ˆæ­¢æ¡ä»¶ä¸ºå½“$N=1$æ—¶ï¼Œå³åˆ°è¾¾äº†ä¿¡é“$W$ç«¯ï¼Œæ­¤æ—¶$L_{1}^{\\left( 1 \\right)}\\left( { {y}{j}} \\right)=\\ln \\frac{W\\left( { {y}{j}}|0 \\right)}{W\\left( { {y}_{j}}|1 \\right)}$ã€‚\nSCè¯‘ç ç®—æ³•ä¾é ä¸€ä¸ªè¶å½¢å•å…ƒï¼Œå¦‚å›¾10ï¼Œåœ¨è®¡ç®—çš„æ—¶å€™ä¸æ–­è¿›è¡Œé€’å½’ï¼Œä½†æ˜¯å¿…é¡»æ˜¯å…ˆè®¡ç®—å‡ºè¶å½¢å•å…ƒçš„ä¸Šè¡Œæ¯”ç‰¹ï¼Œæ‰èƒ½å¤Ÿè°ƒç”¨gå‡½æ•°æ±‚å‡ºä¸‹è¡Œæ¯”ç‰¹ã€‚å³å›¾10ä¸­å¿…é¡»ä½¿ç”¨få‡½æ•°è®¡ç®—å‡ºu1ï¼Œä¹‹åæ‰èƒ½å¤Ÿé€šè¿‡gå‡½æ•°æ±‚å‡ºu2ã€‚åœ¨å®é™…çš„è®¡ç®—è¿‡ç¨‹ä¸­ï¼Œä»æ¥æ”¶çš„æ¯”ç‰¹è¿›è¡Œé€’å½’æ‰§è¡Œfå‡½æ•°å’Œgå‡½æ•°ï¼Œå…¶ä¸­å‡å¦‚ç¼–ç æ¯æ¬¡è¿›è¡Œä¸€æ¬¡æåŒ–ï¼Œåœ¨è¯‘ç é˜¶æ®µéƒ½ä¼šå¤šä¸€æ¬¡é€’å½’çš„è®¡ç®—ï¼Œä¸­é—´çš„è®¡ç®—å€¼å°±æ˜¯è¿›è¡ŒæåŒ–çš„ä¸´æ—¶å€¼ï¼Œåœ¨ä¸€æ•´ä¸ªè¶å½¢ç»“æ„ä¸­ä½“ç°ï¼Œæ˜¯ä¸€ä¸ªæ·±åº¦ä¼˜å…ˆçš„ç®—æ³•ã€‚\nSCLè¯‘ç ç®—æ³•[3]ç±»ä¼¼æ ‘çš„å¹¿åº¦ä¼˜å…ˆéå†ï¼Œå®ƒçš„å¥½å¤„å°±æ˜¯èƒ½å¤Ÿè¿›è¡Œå‰ªææ“ä½œï¼Œä¸ç”¨è®¡ç®—æ‰€æœ‰çš„èŠ‚ç‚¹ã€‚å®ƒä»æ ¹èŠ‚ç‚¹å¼€å§‹å¾€æ ‘åº•éƒ¨è¿›è¡Œå¹¿åº¦éå†æœç´¢ï¼Œæ¯ä¸€å±‚ä¼šè®¡ç®—å‡ºä¸€ä¸ªä¼°è®¡æ¯”ç‰¹ï¼Œç„¶ååœ¨è¿™ä¸ªä¼°è®¡æ¯”ç‰¹çš„åŸºç¡€ä¸Šå¾€ä¸‹è¿›è¡Œä¼°è®¡ä¸‹ä¸€ä¸ªæ¯”ç‰¹çš„å€¼ï¼Œå¦å¤–ï¼ŒSCLè¯‘ç ç®—æ³•è¿˜å¢åŠ äº†æƒ©ç½šå› å­ï¼Œå¯¹äºæƒ©ç½šå› å­è¿‡é«˜çš„èŠ‚ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥è·³è¿‡å®ƒä»¥åŠå®ƒå­èŠ‚ç‚¹çš„è®¡ç®—ï¼Œå› ä¸ºå®ƒæ˜¯æ­£ç¡®çš„ç çš„å¯èƒ½æ€§æä½ï¼Œè¿™æ ·æ’é™¤äº†ä¸å¯èƒ½çš„è·¯å¾„ï¼ŒåŒæ—¶ï¼Œè¿™ä¹Ÿèƒ½è¾¾åˆ°å¯¹æ ‘è¿›è¡Œå‰ªæçš„æ•ˆæœï¼Œæé«˜è¯‘ç çš„é€Ÿåº¦ã€‚å›¾11å±•ç¤ºäº†è¿›è¡ŒSCLè¯‘ç çš„åŸºæœ¬è¿‡ç¨‹ï¼š\n","description":"è¯‘ç å’Œç¼–ç ç±»ä¼¼ï¼ŒåŸºäºé€’å½’çš„ç»“æ„ã€‚","id":13,"section":"posts","tags":["æåŒ–ç "],"title":"æåŒ–ç -è¯‘ç ","uri":"https://hugo.jiahongw.com/zh/posts/polarcode/polar-code-decode/"},{"content":"å‡ºå‘å‰çš„å‡†å¤‡ å†²é”‹è¡£ï¼ˆé˜²é£ï¼Œé˜²æ™’ï¼Œé˜²é›¨ï¼Œé˜²å¯’ï¼‰ ç™»å±±é‹æˆ–è€…è¶Šé‡é‹ ç™»å±±æ– å¸½å­ é˜²æ™’éœœ ä¸€æ¬¡æ€§å†…è£¤å’Œä¸€æ¬¡æ€§é›¨è¡£ ç›¸æœº åšçš„è¡£æœ å£ç½© å­¦ç”Ÿè¯ èº«ä»½è¯ é©¾é©¶è¯ åŸºæœ¬è·¯çº¿ å°ç¯çº¿+ç¨»åŸäºšä¸\nå·è¥¿ç¾æ™¯ åˆç…§ some word å¤§å­¦å››å¹´ä¸€ä¸‹å°±è¿‡å»äº†ï¼Œå¾ˆé«˜å…´é‡è§äº†ä¸€ç¾¤å¾ˆæ£’çš„æœ‹å‹ã€‚å¸Œæœ›æœªæ¥çš„æˆ‘ä»¬ä¹Ÿæ›´åŠ ä¼˜ç§€ï¼æ—…æ¸¸çœŸæ˜¯ä¸€ä»¶åˆç´¯åˆè®©äººé‡æ–°è®¤è¯†ä¸–ç•Œäº‹æƒ…å•Šï¼\n","description":"åœ¨å¤§å­¦çš„æœ€åä¸€æ¬¡å’Œæœ‹å‹çš„æ—…è¡Œ......","id":14,"section":"posts","tags":["ç”Ÿæ´»"],"title":"æ¯•ä¸šæ—…è¡Œ-å·è¥¿","uri":"https://hugo.jiahongw.com/zh/posts/life/biyeluxing/"},{"content":"å·è¥¿æ¯•ä¸šæ—…è¡Œçš„å›¾ç‰‡ã€‚\n","description":"å·è¥¿æ¯•ä¸šæ—…è¡Œ","id":15,"section":"gallery","tags":null,"title":"å·è¥¿æ—…è¡Œ","uri":"https://hugo.jiahongw.com/zh/gallery/chuanxi/"},{"content":"5Gä¸‹çš„æåŒ–ç  è¿™ä¸ªä¸“æ ä»‹ç»æåŒ–ç çš„ç›¸å…³åŸç†ï¼Œä¸€æ–¹é¢æ˜¯å› ä¸ºæˆ‘ç›®å‰çš„æ¯•ä¸šè®¾è®¡æ˜¯å…³äº5GæåŒ–ç æ–¹å‘çš„ï¼Œå¦ä¸€æ–¹é¢æˆ‘æƒ³å°†è‡ªå·±æ‰€å­¦çš„ä¸€äº›çŸ¥è¯†è®°å½•æˆ–è€…åˆ†äº«èµ·æ¥ã€‚\né¦–å…ˆï¼Œæˆ‘æƒ³è¦è¯´çš„æ˜¯ï¼ŒæåŒ–ç æ˜¯ä¸€ç§ç¼–ç æ–¹å¼ï¼Œå®ƒçš„ç›®çš„æ˜¯ä¸ºäº†ä½¿å¾—åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­ä¼ è¾“æ›´å¤šæœ‰æ•ˆçš„æ¶ˆæ¯ï¼Œä¹Ÿå¯ä»¥ç†è§£ä¸ºè®©ä¼ è¾“æ›´å¯é çš„ç¼–ç æ–¹å¼ã€‚å½“ç„¶ï¼Œå¯¹äºä¿¡é“ç¼–ç æ¥è®²ï¼Œé‚£æœ€ä¸»è¦çš„å°±æ˜¯ç¼–ç å’Œè§£ç è¿™ä¸¤ä¸ªæ¿å—ã€‚é‚£ä»€ä¹ˆæ˜¯ä¿¡é“ç¼–ç å‘¢ï¼Ÿå¯ä»¥è¿™æ ·ç†è§£ï¼šå‘é€æ–¹å…ˆå¯¹å‘é€çš„ä¿¡æ¯è¿›è¡Œç¼–ç ï¼Œé€šè¿‡ä¿¡é“è¿›è¡Œä¼ è¾“ï¼Œç„¶ååœ¨æ¥å—æ–¹é‚£è¾¹è¿›è¡Œè§£ç ï¼Œå¾—åˆ°æ¶ˆæ¯ï¼Œè¿™å°±æ˜¯ä¿¡é“ç¼–ç çš„åŸºæœ¬è¿‡ç¨‹ã€‚æˆ‘ä¼šåœ¨ä¹‹åçš„æ–‡ç« ä¸­åˆ†æè¿™äº›è¿‡ç¨‹ã€‚\nä¸»è¦åˆ†ä¸ºå¦‚ä¸‹å‡ ä¸ªæ¿å—ï¼š\nä¿¡é“æ¨¡å‹ æåŒ–ç åŸºæœ¬åŸç† æåŒ–ç çš„ç¼–ç  æåŒ–ç çš„è¯‘ç  æåŒ–ç çš„æ„é€ ï¼ˆä¿¡é“çš„é€‰æ‹©ï¼‰ æåŒ–ç å®ç° ","description":"æåŒ–ç å·²ç»å…¥é€‰5Gçš„æ ‡å‡†ï¼Œæ˜¯å”¯ä¸€ä¸€ä¸ªè¢«è¯æ˜å¯ä»¥è¾¾åˆ°é¦™å†œæé™çš„ä¸€ç§ç¼–ç æ–¹å¼ã€‚","id":16,"section":"posts","tags":["PolarCode"],"title":"5Gä¸‹çš„æåŒ–ç ","uri":"https://hugo.jiahongw.com/zh/posts/polarcode/polar-code-intro/"},{"content":"éœ€è¦ä» UGameViewportClient ç±»ç»§æ‰¿ ä¿®æ”¹è¿”å›å€¼ä¸ºtrue,è·¯å¾„ï¼š\\Source\\Runtime\\Engine\\Private\\GameViewportClient.h\n1 virtual bool RequiresHitProxyStorage() override { return true; } åœ¨FViewportClientç±»ä¸­æ–°å»ºDrawHitProxyå‡½æ•° æ–‡ä»¶UnrealClient.h\nåœ¨GameViewportClientç±»ä¸­å£°æ˜å¹¶ä¸”å®ç° å£°æ˜ï¼š\\Source\\Runtime\\Engine\\Private\\GameViewportClient.h\nå°†GameViewportClientç±»ä¸­çš„å‡½æ•°Draw()å†…å®¹å¤åˆ¶åˆ°è¯¥å‡½æ•°DrawHitProxyï¼Œä¿®æ”¹ä¸‹é¢çš„çš„åœ°æ–¹ï¼š\nä¿®æ”¹FViewportç±»ä¸­çš„GetRawHitProxyDataå‡½æ•° åœ¨GetRawHitProxyDataå‡½æ•°ä¸­è¿›è¡Œä»¥ä¸‹çš„ä¿®æ”¹ï¼šEngine\\Source\\Runtime\\Engine\\Private\\UnrealClient.cpp\nè°ƒç”¨\u0026ndash;è·å–å±å¹•åæ ‡Hitproxy ç›¸å…³ç±»å‹ HHitProxyï¼šç”¨äºæ£€æµ‹ç”¨æˆ·ç•Œé¢å‘½ä¸­çš„åŸºç±»\nFHitProxyMapï¼šä»2Dåæ ‡åˆ°ç¼“å­˜å‘½ä¸­ä»£ç†çš„åœ°å›¾ã€‚\nå‚è€ƒï¼š\nHow to select an actor in-game using GetHitProxy? UE4 ç¼–è¾‘å™¨çš„å…‰æ ‡æ‹¾å– ç¼–è¾‘å™¨Viewportçª—å£ä¸­çš„é¼ æ ‡æ‹¾å–åŸç† åœºæ™¯åŸºæœ¬å¯¹è±¡ æ¸²æŸ“æ€»æµç¨‹ https://docs.unrealengine.com/zh-CN/Programming/Rendering/MeshDrawingPipeline/index.html Unreal Mesh Drawingæºç åˆ†æ ç™½è¢ç¬‘é“ ","description":"","id":18,"section":"posts","tags":["c++","UE4","æ¸¸æˆå¼•æ“"],"title":"UEç¼–è¾‘å™¨ä¸‹æ¨¡æ‹Ÿä½¿ç”¨HitProxy","uri":"https://hugo.jiahongw.com/zh/posts/ue/ue-hitproxy/"},{"content":"åœ¨UE4ä¸­è·å–æ·±åº¦ç¼“å­˜ï¼Œè°ƒç”¨æ¸²æŸ“å‘½ä»¤è¯»å–ã€‚\nè·å–æ·±åº¦ç¼“å­˜ æ·±åº¦åƒç´ æ ¼å¼ é”®å…¥å‘½ä»¤vis scenedepthz uv0ä»¥æŸ¥çœ‹å®é™…ä½¿ç”¨çš„æ·±åº¦ç¼“å†²åŒºã€‚UE4å¯¹åœºæ™¯ä½¿ç”¨â€œåå‘â€æ·±åº¦ç¼“å†²åŒºã€‚\nWay1ï¼šç›´æ¥ä½¿ç”¨ENQUEUE_RENDER_COMMANDå‘½ä»¤è·å–(æ•ˆç‡è¾ƒä½) åœ¨ä»»æ„tickå‡½æ•°æˆ–è€…å…¶ä»–å‡½æ•°æ·»åŠ ä»¥ä¸‹çš„å‘½ä»¤ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 struct DepthPixel\t//å®šä¹‰æ·±åº¦åƒç´ ç»“æ„ä½“ { float depth; char stencil; char unused1; char unused2; char unused3; }; float* cpuDataPtr;\t// Textureæ·±åº¦å€¼æ•°ç»„é¦–åœ°å€ TArray\u0026lt;DepthPixel\u0026gt; mydata;\t//æœ€ç»ˆè·å–è‰²æ·±åº¦å€¼æ•°æ® FIntPoint buffsize;\t//æ·±åº¦é•¿å®½å¤§å°Xå’ŒY ENQUEUE_RENDER_COMMAND(ReadSurfaceFloatCommand)(\t// å°†è¯»å–æ·±åº¦æ•°æ®çš„å‘½ä»¤æ¨ç»™æ¸²æŸ“çº¿ç¨‹è¿›è¡Œæ‰§è¡Œ [\u0026amp;cpuDataPtr, \u0026amp;mydata, \u0026amp;buffsize](FRHICommandListImmediate\u0026amp; RHICmdList) //\u0026amp;cpuDataPtr, \u0026amp;mydata, \u0026amp;buffsizeä¸ºä¼ å…¥çš„å¤–éƒ¨å‚æ•° { FSceneRenderTargets::Get(RHICmdList).AdjustGBufferRefCount(RHICmdList, 1); FTexture2DRHIRef uTex2DRes = FSceneRenderTargets::Get(RHICmdList).GetSceneDepthSurface();\tbuffsize = uTex2DRes-\u0026gt;GetSizeXY(); uint32 sx = buffsize.X; uint32 sy = buffsize.Y; mydata.AddUninitialized(sx * sy); uint32 Lolstrid = 0; cpuDataPtr = (float*)RHILockTexture2D(uTex2DRes,0,RLM_ReadOnly,Lolstrid,true);\t// åŠ é” è·å–å¯è¯»depth Textureæ·±åº¦å€¼æ•°ç»„é¦–åœ°å€ memcpy(mydata.GetData(), cpuDataPtr, sx * sy * sizeof(DepthPixel));\t//å¤åˆ¶æ·±åº¦æ•°æ® RHIUnlockTexture2D(uTex2DRes, 0, true);\t//è§£é” FSceneRenderTargets::Get(RHICmdList).AdjustGBufferRefCount(RHICmdList, -1);\t}); FlushRenderingCommands();\t//ç­‰å¾…æ¸²æŸ“çº¿ç¨‹æ‰§è¡Œ mydata; //æœ€ç»ˆè·å–æ·±åº¦æ•°æ® æœ€ç»ˆè¿”å›çš„mydataæ•°æ®å°±æ˜¯æœ€ç»ˆçš„æ·±åº¦å€¼æ•°ç»„ï¼Œå…¶ä¸­æ¯ä¸ªæ·±åº¦å€¼çš„ç»“æ„æ˜¯DepthPixelï¼Œå…¶ä¸­ä¸€ä¸ªæˆå‘˜ä¸ºdepthï¼Œå¦å¤–å››ä¸ªä¸ä¸ä½¿ç”¨ã€‚å…¶ä¸­ä½¿ç”¨ä¸Šé¢çš„å‡ ä¸ªå‘½ä»¤éœ€è¦æ·»åŠ \u0026quot;RHI.h\u0026ldquo;å¤´æ–‡ä»¶\nWay2ï¼šå†™ä¸ªè¯·æ±‚ç±»è¯»å– UMLå›¾ï¼š\næµç¨‹å›¾ï¼š\n1. é¦–å…ˆåœ¨é¡¹ç›®çš„build.csæ–‡ä»¶æ·»åŠ ï¼š æ·»åŠ å¼•æ“æºç åœ°å€\n1 2 3 4 5 6 7 8 9 // æ·»åŠ å¼•æ“æºç åœ°å€ string EnginePath = \u0026#34;C:/Program Files (x86)/UE4+VS2017/UnrealEngine/\u0026#34;; PrivateIncludePaths.AddRange( new string[] { EnginePath + \u0026#34;Source/Runtime/Renderer/Private\u0026#34;, EnginePath + \u0026#34;Source/Runtime/Renderer/Private/CompositionLighting\u0026#34;, EnginePath + \u0026#34;Source/Runtime/Renderer/Private/PostProcess\u0026#34; } ); æ·»åŠ å¼•ä¾èµ–é¡¹\n2. ç±»å®ç° å°†ä¸‹é¢ç±»ä»£ç å¤åˆ¶åˆ°PostProcessing.hæ–‡ä»¶ä»»æ„ä½ç½®ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 /*****************************************Get Depth Class*******************************************************/ /*\tå­˜å‚¨ä¸€ä¸ªåƒç´ çš„ç¼“å­˜ depth æ·±åº¦ç¼“å­˜ stencil ï¼ˆæŠ å›¾ç¼“å­˜ï¼‰*/ struct DepthPixel { float depth; char stencil; char unused1; char unused2; char unused3; }; /*\tå­˜å‚¨æ•´ä¸ªè§†çª—çš„ç¼“å­˜ data\tåƒç´ ç¼“å­˜æ•°ç»„ bufferSizeX\tç¼“å­˜å¤§å°X bufferSizeY\tç¼“å­˜å¤§å°Y pixelSizeBytes\tåƒç´ ç¼“å­˜å­—èŠ‚æ•°*/ struct DepthResult { TArray\u0026lt;DepthPixel\u0026gt; data; int bufferSizeX; int bufferSizeY; int pixelSizeBytes; }; /*\tè·å–æ·±åº¦ç¼“å­˜çš„ç±»\t*/ class RENDERER_API DepthCapture { public: /*\té™æ€æˆå‘˜ï¼Œå½“ç”¨æˆ·å‘å‡ºä¸€ä¸ªè·å–æ·±åº¦ç¼“å­˜çš„è¯·æ±‚åï¼ŒwaitForCaptureé•¿åº¦åŠ 1ï¼Œæ–°å¢DepthResultå†…å®¹ä¸ºç©º å½“ç³»ç»Ÿå®Œæˆä¸€ä¸ªæ·±åº¦ç¼“å­˜çš„è¯·æ±‚åï¼ŒwaitForCaptureé•¿åº¦å‡ä¸€ */ static TQueue\u0026lt;DepthResult *, EQueueMode::Mpsc\u0026gt; waitForCapture; /*\té™æ€æˆå‘˜ï¼Œå½“ç³»ç»Ÿå®Œæˆä¸€ä¸ªæ·±åº¦ç¼“å­˜çš„è¯·æ±‚åï¼ŒfinishedCaptureé•¿åº¦åŠ 1ï¼Œ æ–°å¢DepthResultå«æœ‰æ·±åº¦ç¼“å­˜ä¿¡æ¯\t*/ static TQueue\u0026lt;DepthResult *, EQueueMode::Mpsc\u0026gt; finishedCapture; public: /*ç”¨æˆ·å‘å‡ºä¸€ä¸ªè·å–æ·±åº¦ç¼“å­˜çš„è¯·æ±‚æ—¶è°ƒç”¨*/ static void AddCapture() { waitForCapture.Enqueue(new DepthResult()); } /*ç³»ç»Ÿå®Œæˆä¸€ä¸ªæ·±åº¦ç¼“å­˜è¯·æ±‚åè°ƒç”¨*/ static void FinishedCapture(DepthResult *result) { finishedCapture.Enqueue(result); } /*è¿”å›æ˜¯å¦å­˜åœ¨å·²ç»å®Œæˆçš„è¯·æ±‚*/ static bool HasFinishedCapture() { return !finishedCapture.IsEmpty(); } /*å¦‚æœå­˜åœ¨å·²å®Œæˆçš„è¯·æ±‚ï¼Œè¿”å›ä¸€ä¸ªæ·±åº¦ç»“æœ*/ static DepthResult* GetIfExistFinished() { DepthResult* result = NULL; if (!finishedCapture.IsEmpty()) { finishedCapture.Dequeue(result); } return result; } /*è¿”å›æ˜¯å¦å­˜åœ¨ç­‰å¾…ç³»ç»Ÿæ‰§è¡Œçš„è¯·æ±‚*/ static bool HasCaptureRequest() { return !waitForCapture.IsEmpty(); } /*å¦‚æœå­˜åœ¨å¾…å®Œæˆçš„è¯·æ±‚ï¼Œè¿”å›ä¸€ä¸ªæ·±åº¦ç»“æœï¼ˆä¸ºç©ºï¼‰*/ static DepthResult* GetIfExistRequest() { DepthResult* result = NULL; if (!waitForCapture.IsEmpty()) { waitForCapture.Dequeue(result); } return result; } //friend void AddPostProcessingPasses(FRDGBuilder\u0026amp; GraphBuilder, const FViewInfo\u0026amp; View, const FPostProcessingInputs\u0026amp; Inputs); }; /*****************************************end******************************************************/ å°†ä¸‹é¢ç±»ä¸­é™æ€æˆå‘˜åˆå§‹åŒ–å’Œæ·»åŠ æ‰§è¡Œè·å–ä»£ç ä»£ç å¤åˆ¶åˆ°PostProcessing.cppæ–‡ä»¶ä»»æ„ä½ç½®ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 /*ç±»é™æ€æˆå‘˜çš„å®šä¹‰*/ TQueue\u0026lt;DepthResult *, EQueueMode::Mpsc\u0026gt; DepthCapture::waitForCapture; TQueue\u0026lt; DepthResult *, EQueueMode::Mpsc\u0026gt; DepthCapture::finishedCapture; /*è·å–æ·±åº¦ç¼“å­˜*/ void AddDepthInspectorPass(FRDGBuilder\u0026amp; GraphBuilder, const FViewInfo\u0026amp; View, DepthResult* result) { RDG_EVENT_SCOPE(GraphBuilder, \u0026#34;DepthInspector\u0026#34;); { // è·å–æ¸²æŸ“å¯¹è±¡ FSceneRenderTargets\u0026amp; renderTargets = FSceneRenderTargets::Get(GRHICommandList.GetImmediateCommandList()); // å®šä¹‰æ‹·è´å‚æ•° uint32 striped = 0; FIntPoint size = renderTargets.GetBufferSizeXY(); result-\u0026gt;bufferSizeX = size.X; result-\u0026gt;bufferSizeY = size.Y; result-\u0026gt;data.AddUninitialized(size.X * size.Y); // è·å–è§†çª—æŸä¸€å¸§çš„æ·±åº¦ç¼“å­˜å¯¹è±¡ FRHITexture2D* depthTexture = (FRHITexture2D *)renderTargets.SceneDepthZ-\u0026gt;GetRenderTargetItem().TargetableTexture.GetReference(); // æ‰§è¡Œæ‹·è´æ·±åº¦ç¼“å­˜æ“ä½œï¼Œå°†GPUæ˜¾å­˜ä¸­çš„ç¼“å­˜ä¿¡æ¯æ‹·è´åˆ°CPUå†…å­˜ä¸­ï¼Œè¿”å›æŒ‡å‘è¿™å—CPUå†…å­˜çš„é¦–åœ°å€ void* buffer = RHILockTexture2D(depthTexture, 0, EResourceLockMode::RLM_ReadOnly, striped, true); // å°†ç¼“å­˜ç»“æœæ‹·è´åˆ°resultï¼Œç”¨äºè¾“å‡º memcpy(result-\u0026gt;data.GetData(), buffer, size.X * size.Y * 8); // å¿…é¡»æ‰§è¡Œè§£é”è¯­å¥ï¼Œå¦åˆ™è¢«é”ä½çš„GPUç¼“å­˜ä¿¡æ¯å°†ä¸èƒ½é‡Šæ”¾ RHIUnlockTexture2D(depthTexture, 0, true); // æ‹·è´ç»“æœå…¥é˜Ÿ DepthCapture::FinishedCapture(result); } } //////////////////////////////////////// PostProcessing.cppä¸­è¯¥ä½ç½®æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š\nä»£ç å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 // Capture depth bufferï¼Œotherwise the buffer will be changed if (DepthCapture::HasCaptureRequest()) { DepthResult *reuslt; reuslt = DepthCapture::GetIfExistRequest(); if (reuslt) { AddDepthInspectorPass(GraphBuilder, View, reuslt); } } 3. è°ƒç”¨ ä½¿ç”¨ä»¥ä¸‹çš„ä»£ç å¯ä»¥è·å–æ·±åº¦å€¼ï¼Œè·å–çš„ç»“æœä¸ºresultï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 int tickcount = 0; // Called every frame void ATestPawn::Tick(float DeltaTime) { tickcount++; if (tickcount % 2 == 0)\t// è®¾è®¡å‡ å¸§è°ƒç”¨ DepthCapture::AddCapture(); // å®šæ—¶å‘å‡ºè·å–æ·±åº¦ç¼“å­˜çš„è¯·æ±‚ // å¦‚æœå­˜åœ¨å·²å®Œæˆçš„æ·±åº¦ç¼“å­˜è¯·æ±‚ if (DepthCapture::HasFinishedCapture()) { DepthResult *result; // è·å–å·²å®Œæˆçš„æ·±åº¦ç¼“å­˜ç»“æœ result = DepthCapture::GetIfExistFinished(); if (result) { int n = result-\u0026gt;data.Num(); //this is test GEngine-\u0026gt;AddOnScreenDebugMessage(-1, -1, FColor::Blue, FString::Printf(TEXT(\u0026#34;Get Depth Size: %d \u0026#34;), n)); } } } ","description":"","id":19,"section":"posts","tags":["c++","UE4","æ¸¸æˆå¼•æ“"],"title":"UE4è·å–æ·±åº¦å€¼","uri":"https://hugo.jiahongw.com/zh/posts/ue/ue-depth/"},{"content":"æ¢ç´¢UE4æ¸¸æˆçº¿ç¨‹çš„è¿›å…¥\næ¸¸æˆçº¿ç¨‹ \u0026amp; æ¸²æŸ“çº¿ç¨‹ UE4æ¸¸æˆçº¿ç¨‹å¯åŠ¨ æ¸¸æˆçº¿ç¨‹æ¯ä¸€å¸§æ›´æ–°æ‰€æœ‰å†…å®¹ã€‚\nè¿™ä¸ªtickæ˜¯å“ªé‡Œæ‰“å¼€çš„ï¼Ÿ\nå¤´æ–‡ä»¶ï¼šEngine\\Source\\Runtime\\Launch\\Private\\Launch.cpp\nLauch.cppå®šä¹‰äº†ä¸€ä¸ªå…¨å±€çš„å˜é‡FEngineLoop GEngineLoop;\nè¯¥ç±»è·¯å¾„ï¼šEngine\\Source\\Runtime\\Launch\\Public\\LaunchEngineLoop.hï¼Œç»§æ‰¿ä¸€ä¸ªæ¥å£ç±»IEngineLoopï¼Œå®šä¹‰å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 /** * Implements the main engine loop.\t*/ class FEngineLoop #if WITH_ENGINE : public IEngineLoop #endif { public: /** Default constructor. */ FEngineLoop(); virtual ~FEngineLoop() { } public: /** * Pre-Initialize the main loop, and generates the commandline from standard ArgC/ArgV from main(). * * @param ArgC The number of strings in ArgV. * @param ArgV The command line parameters (ArgV[0] is expected to be the executable name). * @param AdditionalCommandLine Optional string to append to the command line (after ArgV is put together). * @return Returns the error level, 0 if successful and \u0026gt; 0 if there were errors. */ int32 PreInit(int32 ArgC, TCHAR* ArgV[], const TCHAR* AdditionalCommandline = nullptr); /** * Pre-Initialize the main loop - parse command line, sets up GIsEditor, etc. * * @param CmdLine The command line. * @return The error level; 0 if successful, \u0026gt; 0 if there were errors. */ int32 PreInit(const TCHAR* CmdLine); /** First part of PreInit. */ int32 PreInitPreStartupScreen(const TCHAR* CmdLine); /** Second part of PreInit. */ int32 PreInitPostStartupScreen(const TCHAR* CmdLine); /** Load all modules needed before Init. */ void LoadPreInitModules(); /** Load core modules. */ bool LoadCoreModules(); /** Clean up PreInit context. */ void CleanupPreInitContext(); #if WITH_ENGINE /** Load all core modules needed at startup time. */ bool LoadStartupCoreModules(); /** Load all modules needed at startup time. */ bool LoadStartupModules(); /** * Initialize the main loop (the rest of the initialization). * * @return The error level; 0 if successful, \u0026gt; 0 if there were errors. */ virtual int32 Init() override; /** Initialize the timing options from the command line. */ void InitTime(); /** Performs shut down. */ void Exit(); /** Whether the engine should operate in an idle mode that uses no CPU or GPU time. */ bool ShouldUseIdleMode() const; // Advances the main loop.æ¨è¿›ä¸»å¾ªç¯ virtual void Tick() override; /** Removes references to any objects pending cleanup by deleting them. */ virtual void ClearPendingCleanupObjects() override; #endif // WITH_ENGINE /** RHI post-init initialization */ static void PostInitRHI(); /** Pre-init HMD device (if necessary). */ static void PreInitHMDDevice(); public: /** Initializes the application. */ static bool AppInit(); /** * Prepares the application for shutdown. * * This function is called from within guarded exit code, only during non-error exits. */ static void AppPreExit(); /** * Shuts down the application. * * This function called outside guarded exit code, during all exits (including error exits). */ static void AppExit(); private: /** Utility function that processes Slate operations. */ void ProcessLocalPlayerSlateOperations() const; protected: /** Holds a dynamically expanding array of frame times in milliseconds (if FApp::IsBenchmarking() is set). */ TArray\u0026lt;float\u0026gt; FrameTimes; /** Holds the total time spent ticking engine. */ double TotalTickTime; /** Holds the maximum number of seconds engine should be ticked. */ double MaxTickTime; /** Holds the maximum number of frames to render in benchmarking mode. */ uint64 MaxFrameCounter; /** Holds the number of cycles in the last frame. */ uint32 LastFrameCycles; #if WITH_ENGINE /** Holds the objects which need to be cleaned up when the rendering thread finishes the previous frame. */ FPendingCleanupObjects* PendingCleanupObjects; #endif //WITH_ENGINE private: #if WITH_ENGINE /** Holds the engine service. */ FEngineService* EngineService; /** Holds the application session service. */ TSharedPtr\u0026lt;ISessionService\u0026gt; SessionService; #endif // WITH_ENGINE FPreInitContext PreInitContext; }; è¯¥æ–‡ä»¶åªéœ€#include \u0026quot;CoreMinimal.h\u0026quot;ï¼Œæœ€å¤šåŠ ä¸Š#include \u0026quot;UnrealEngine.h\u0026quot;\næ¥å£ç±»ï¼Œä½äºè·¯å¾„Engine\\Source\\Runtime\\Engine\\Public\\UnrealEngine.hï¼š\n1 2 3 4 5 6 7 8 9 /** Public interface to FEngineLoop so we can call it from editor or editor code */ class IEngineLoop { public: virtual int32 Init() = 0; virtual void Tick() = 0; /** Removes references to any objects pending cleanup by deleting them. */ virtual void ClearPendingCleanupObjects() = 0; }; å¼€å¯Tickå‡½æ•°ä¹‹å‰éœ€è¦åˆå§‹åŒ–ï¼Œåˆå§‹åŒ–å‡½æ•°åœ¨Launch.cppè¿™ä¸ªæ–‡ä»¶ä¸­ï¼š\n1 2 3 4 5 6 /* Inits the engine loop */ int32 EngineInit() { int32 ErrorLevel = GEngineLoop.Init(); return( ErrorLevel ); } GEngineLoop.Init()å‡½æ•°ï¼š\nå…¶ä¸­ä¼šåˆ¤æ–­æ˜¯è¿›å…¥é‚£ç§å¼•æ“æ¨¡å¼ï¼Œåˆ†ä¸ºGameæ¨¡å¼ä¸Editoræ¨¡å¼ã€‚\nç»“æŸå¼•æ“çš„å‡½æ•°ä¸ºï¼š\n1 2 3 4 5 6 7 8 9 10 /** * Shuts down the engine */ void EngineExit( void ) { // Make sure this is set RequestEngineExit(TEXT(\u0026#34;EngineExit() was called\u0026#34;)); GEngineLoop.Exit(); } ä¹Ÿåœ¨Launch.cpp\nLaunch.cppä¸­çš„å‡½æ•°å¤šæ¬¡ä½¿ç”¨GEngineè¿™ä¸ªå¤–éƒ¨å˜é‡ï¼Œè¿™ä¸ªå˜é‡åœ¨ä¸Šé¢çš„åˆå§‹åŒ–å‡½æ•°ä¼šè‡ªå®šè®¾ç½®ä¸ºç›¸åº”çš„å¼•æ“ï¼Œå³Gameå¼•æ“æˆ–è€…Editorå¼•æ“ï¼š\næ‰€åœ¨æ–‡ä»¶Engine.h\nåœ¨FEngineLoop::Tick()å‡½æ•°ä¼šè°ƒç”¨GEngineçš„Tickå‡½æ•°ï¼š\nä¹Ÿå°±æ˜¯æœ¬æ–‡å¼€å§‹çš„é‚£ä¸ªTickå‡½æ•°ã€‚\n","description":"","id":20,"section":"posts","tags":["c++","UE4","æ¸¸æˆå¼•æ“"],"title":"UEæ¸¸æˆã€æ¸²æŸ“çº¿ç¨‹","uri":"https://hugo.jiahongw.com/zh/posts/ue/ue-game-render/"},{"content":"å¤§æ¦‚ä»‹ç»ä»¥ä¸‹UE4çš„ä¸»è¦æ¸²æŸ“è¿‡ç¨‹ã€‚\nUE4æ¸²æŸ“è¿‡ç¨‹ å»¶è¿Ÿæ¸²æŸ“ æ‰€è°“å»¶è¿Ÿæ¸²æŸ“ï¼Œæ˜¯æŒ‡å°†ä¸€ä¸ªåœºæ™¯çš„å‡ ä½•ä½“ï¼ˆ3Dæ¨¡å‹ã€å¤šè¾¹å½¢ï¼‰çš„å…‰ç…§ã€é˜´å½±ã€è´¨æ„Ÿæç½®åˆ°ä¸€æ—ï¼Œå…ˆç€æ‰‹äºç»˜ç”»ï¼Œç„¶ååœ¨ååŠæ®µå†å¯¹å…‰ç…§ã€é˜´å½±ã€è´¨æ„Ÿè¿›è¡Œå¤„ç†çš„å¤„ç†æ–¹å¼ã€‚å³ç»™äººä¸€ç§æŠŠåŸæœ¬çš„å¤šè¾¹å½¢å…ˆç»˜åˆ¶å‡ºæ¥çš„å°è±¡ï¼Œå®é™…ä¸Šä¸ä»…è¦ç»˜åˆ¶å¤šè¾¹å½¢ï¼Œå‰è€…çš„å‚æ•°è¿˜éœ€è¦é…åˆåé¢å…‰ç…§å’Œé˜´å½±çš„å¤„ç†ã€‚å…¶è¾“å‡ºç›®æ ‡ï¼Œåœ¨æˆä¸ºå¤æ•°ç¼“å†²æ—¶å…·æœ‰æ™®éæ€§ï¼Œä½†æ˜¯è¿™é‡Œçš„ç¼“å†²æˆ‘ä»¬ç§°ä¹‹ä¸º\u0026quot;ç‰©ç†ç¼“å†²\u0026quot;ã€‚ç‰©ä½“ç¼“å†²æ˜¯æŒ‡ä½¿ç”¨åç…§æ˜å’Œåå¤„ç†ç‰¹æ•ˆçš„ä¸­é—´è¿‡æ¸¡ç¯èŠ‚\nç›¸å…³æœ¯è¯­ RHI\næ¸²æŸ“ç¡¬ä»¶æ¥å£ï¼Œæ˜¯ä¸ºä¸åŒå¹³å°æŠ½è±¡å‡ºä¸åŒå›¾å½¢APIçš„ä¸€å±‚ã€‚æ‰€æœ‰æ¸²æŸ“å‘½ä»¤å‡é€šè¿‡RHIå±‚ä¼ é€’ï¼Œä»¥è½¬æ¢ä¸ºé€‚ç”¨çš„æ¸²æŸ“å™¨ã€‚\nå»¶è¿Ÿæ¸²æŸ“\nè™šå¹»å¼•æ“4ä¸­çš„é»˜è®¤æ¸²æŸ“å™¨ã€‚å®ƒå› å°†ç…§æ˜/é˜´å½±è®¡ç®—æ¨è¿Ÿåˆ°å…¨å±è¿‡ç¨‹è€Œä¸æ˜¯ç»˜åˆ¶æ¯ä¸ªç½‘æ ¼æ—¶è€Œå¾—åã€‚\né¡¶ç‚¹å·¥å‚\né¡¶ç‚¹å·¥å‚æ˜¯å°è£…é¡¶ç‚¹æ•°æ®æºå¹¶é“¾æ¥åˆ°é¡¶ç‚¹ç€è‰²å™¨ä¸Šçš„è¾“å…¥çš„ç±»ã€‚é™æ€ç½‘æ ¼ç‰©ä½“ï¼Œéª¨æ¶ç½‘æ ¼ç‰©ä½“å’Œè¿‡ç¨‹ç½‘æ ¼ç»„ä»¶å‡ä½¿ç”¨ä¸åŒçš„é¡¶ç‚¹å·¥å‚ã€‚\nç€è‰²å™¨\nåœ¨è™šå¹»å¼•æ“ä¸­ï¼Œç€è‰²å™¨æ˜¯HLSLä»£ç ï¼ˆä»¥.ush / .usfæ–‡ä»¶çš„å½¢å¼ï¼‰å’Œæè´¨å›¾çš„å†…å®¹çš„ç»„åˆã€‚åœ¨Unrealä¸­åˆ›å»ºæè´¨æ—¶ï¼Œå®ƒä¼šæ ¹æ®è®¾ç½®ï¼ˆå¦‚ç€è‰²æ¨¡å¼ï¼‰å’Œç”¨æ³•æ¥ç¼–è¯‘å¤šä¸ªç€è‰²å™¨æ’åˆ—ã€‚\næ¸²æŸ“æ•°æ® ç›¸å…³çš„æ¸²æŸ“çš„æ•°æ®åŒ…æ‹¬æ·±åº¦å€¼åŠä¸€äº›Gbufferï¼Œå¦‚ä¸‹å›¾ï¼š\nå‡ ä¸ªPass Z Pre Pass UE4çš„æ¸²æŸ“ç®¡é“ï¼Œæ˜¯åœ¨Bass Passçš„ç‰©ä½“ç¼“å†²å†™å‡ºæ¥ä¹‹å‰ï¼Œåœ¨ä»…é¢„å¤„ç†æ·±åº¦å€¼ï¼ˆZå€¼ï¼‰ä¹‹åï¼Œè¿è¡ŒZé¢„é˜¶æ®µã€‚\näº‹å…ˆé¢„å¤„ç†æ·±åº¦å€¼çš„ç›®çš„ï¼Œæ˜¯å°†æœ€ç»ˆå½±åƒå’ŒåŒä¸€æ·±åº¦ç¼“å†²çš„å†…å®¹ç»“æœï¼Œåœ¨é€è§†å‰è·å¾—ã€‚Zé¢„é˜¶æ®µä¹‹åçš„Base Passåˆ™æ˜¯ï¼Œå‚è€ƒé¢„å…ˆå¾—å‡ºçš„æ·±åº¦å€¼ç¼“å†²è¿›è¡ŒZé¢„æµ‹è¯•ï¼Œå› æ­¤é€šè¿‡åœ¨æœ€ç»ˆçš„ç”»é¢é‡Œä¸ç•™ä¸‹åƒç´ ç—•è¿¹ï¼ˆå³ç¼–å†™ååˆè¢«æ¶ˆå»çš„åƒç´ ï¼‰ï¼Œä»¥å›é¿åƒç´ ç€è‰²å™¨çš„è¿è¡Œã€‚\nBase Pass\nä½¿ç”¨Base Passè¾“å‡ºç‰©ä½“ç¼“å†²éœ€è¦æ³¨æ„çš„ä¸¤ç‚¹ï¼š\nä¸ç»˜åˆ¶æ²¡è¿›å…¥è§†çº¿çš„å¯¹è±¡\nè¿™ç§\u0026quot;æŠ•å½±å‰”é™¤\u0026quot;ï¼ˆFrustum Cullingï¼‰ï¼Œä¸€èˆ¬æ˜¯é€šè¿‡CPUç«¯æ¥å¤„ç†ï¼›ä¸ºäº†æ•´ä½“è¦†ç›–è¢«ç§°ä¸º\u0026quot;åŒ…å›´çƒ\u0026quot;ï¼ˆBounding sphereï¼‰çš„å„ä¸ª3Då¯¹è±¡ï¼Œå¯¹è±¡æ˜¯å¦åœ¨è§†é‡å†…çš„åˆ¤å®šæ ‡å‡†ï¼Œæ˜¯é€šè¿‡é¢„å…ˆè®¾å®šçš„åŒ…å›´çƒæ¥å®è¡Œçš„ã€‚\nä»€ä¹ˆç¨‹åº¦çš„å‰”é™¤ä¼šæˆåŠŸï¼Œå¯ä»¥é€šè¿‡Statåˆå§‹è§†å›¾ï¼ˆStat InitViewsï¼‰æŒ‡ä»¤çš„\u0026quot;è§†é”¥ä½“è£å‰ªåŸºå…ƒï¼ˆFrustum Culled Primitivesï¼‰\u0026ldquo;è¿›è¡Œç¡®è®¤ã€‚\nä¸è®¡ç®—å¤šä½™çš„åƒç´ \nåœ¨å›¾åƒå¤„ç†çš„æµç¨‹ä¸­ï¼Œä½¿ç”¨åƒç´ ç€è‰²å™¨å®é™…å¤„ç†å‰ï¼Œä¼šæœ‰è¿è¡Œæ·±åº¦æµ‹è¯•ï¼ˆZ æµ‹è¯•ï¼‰çš„\u0026quot;Pre Z æµ‹è¯•\u0026quot;è¿™ä¸€æ­¥éª¤ã€‚ä»è¿™é‡Œç€æ‰‹å¤„ç†çš„åƒç´ ï¼Œä¼šå› ä¸ºè¢«æŸä¸ªä¸œè¥¿æ‰€é®æŒ¡è€Œæ— æ³•ç»˜åˆ¶å‡ºæ¥ï¼Œè¿™æ—¶å¯ä»¥è¿›è¡Œæ’¤é”€å¤„ç†ã€‚\nä½†æ˜¯ï¼ŒåƒåŠé€æ˜å¯¹è±¡è¿™ç§ä¼šä¼´éšÎ±æµ‹è¯•çš„ç»˜åˆ¶ã€è§†å·®é®è”½æ˜ å°„è¿™ç§åƒç´ ç€è‰²å™¨å¤„ç†åä¼šé‡æ–°ç¼–å†™æ·±åº¦å€¼çš„æƒ…å†µï¼Œå°±ä¸è¿›è¡ŒPre Zæµ‹è¯•ï¼Œè€Œé€šè¿‡å¤„ç†å®è¡Œåˆ†è·¯è¿‚å›ã€‚\nUE4 ç»˜åˆ¶ç­–ç•¥DrawingPolicy\nç»˜åˆ¶ç­–ç•¥åœ¨UE4æ¸²æŸ“ä¸­ä½¿ç”¨å¾ˆå¤šï¼Œ ä¸­æ–‡ä¹Ÿä¸å¥½ç¿»è¯‘ã€‚ å…¶å®å°±æ˜¯æ ¹æ®ç­–ç•¥ ä½¿ç”¨äº†å“ªäº› ç€è‰²å™¨ ã€‚\n\u0026hellip;\u0026hellip;\u0026hellip;.\nUE4æ¸²æŸ“ä¸€å¸§ æ¸²æŸ“ç®¡é“ é¦–å…ˆï¼Œè™šå¹»çš„æ¸²æŸ“ç”±ä¸‰ä¸ªçº¿ç¨‹å…±åŒå®Œæˆã€‚åˆ†åˆ«æ˜¯CPUçº¿ç¨‹ï¼ŒDRAWçº¿ç¨‹ï¼Œå’ŒGPUçº¿ç¨‹ã€‚\nçŸ¥ä¹ï¼šhttps://zhuanlan.zhihu.com/p/57158725\nRenderæ¨¡å— è°ƒç”¨Render()å‡½æ•°åœ¨Renderæ¨¡å—RendererModule.hä¸­ï¼Œä»¥ä¸‹å‡½æ•°ï¼š\n1 2 3 4 5 class FRendererModule : public IRendererModule { // å¼€å§‹æ¸²æŸ“è§†å›¾æ— virtual void BeginRenderingViewFamily(FCanvas* Canvas,FSceneViewFamily* ViewFamily) override; } ==è°æœ€ç»ˆè°ƒç”¨äº†Renderï¼Ÿ==\nå®æ—¶æ¸²æŸ“æµç¨‹å›¾ï¼š part1:https://i.loli.net/2020/05/30/qU8vN2WZVbt9hkF.jpg\npart2:https://i.loli.net/2020/05/30/3trKVpOMU5sTQfB.jpg\næ¸²æŸ“å‡½æ•°Render è·¯å¾„ï¼šEngine \\ Source \\ Runtime \\ Renderer \\ Private \\ DeferredShadingRenderer.cppï¼ˆ660ï¼‰\nå‡½æ•°ï¼šFDeferredShadingSceneRenderer :: Renderï¼ˆï¼‰æ¸²æŸ“è·¯å¾„\nå…¨å±€ç³»ç»Ÿçº¹ç†åˆå§‹åŒ– DeferredShadingRenderer.cppï¼ˆ677ï¼‰ GSystemTextures.InitializeTexturesï¼ˆï¼‰ ä¿æŠ¤ å¿…è¦çš„æ¸²æŸ“ç›®æ ‡æ‚¨æ˜¯å¦å·²ç¡®ä¿å¯ä»¥ä¿æŠ¤çš„æœ€å¤§ç›®æ ‡æ•°ç›®ï¼Ÿ DeferredShadingRenderer.cppï¼ˆ680ï¼‰ GSceneRenderTargets.Allocateï¼ˆï¼‰ åˆå§‹åŒ–æ¯ä¸ªè§†å£ è®¾ç½®è§†å£æ˜¾ç¤ºçš„å¯¹è±¡ï¼Œé€‰æ‹©ä½¿ç”¨åŠ¨æ€é˜´å½±æ—¶æ˜¾ç¤ºçš„å¯¹è±¡ï¼Œå¯¹åŠé€æ˜å¯¹è±¡è¿›è¡Œæ’åº DeferredShadingRenderer.cppï¼ˆ683ï¼‰ InitViews()ï¼ˆï¼‰ FXSystemé¢„å¤„ç† GPUç²’å­æ­£åœ¨è¢«ä»¿çœŸ DeferredShadingRenderer.cppï¼ˆ758ï¼‰ FXSystem-\u0026gt; PreRenderï¼ˆï¼‰ å¯ç”¨Z Pre-Passæ—¶æ‰§è¡Œçš„æ—©æœŸZç»˜åˆ¶ ä¸ç»˜åˆ¶Tileæ¸²æŸ“çš„ç¡¬ä»¶ï¼ˆç§»åŠ¨è®¾å¤‡ï¼ŒAndroidæˆ–iOSï¼‰å¯¹äº PCæˆ–PS4ï¼Œå°†ç”Ÿæˆæ·±åº¦ç¼“å†²åŒºå’ŒHiZï¼Œå› æ­¤åç»­ç»˜åˆ¶é€Ÿåº¦å¾ˆå¿«æˆä¸ºï¼Ÿ DeferredShadingRenderer.cppï¼ˆ768ï¼‰ RenderPrePassï¼ˆï¼‰ å®‰å…¨GBuffer DeferredShadingRenderer.cppï¼ˆ774ï¼‰ GSceneRenderTargets.AllocGBufferTargetsï¼ˆï¼‰ é€æ˜å…‰ä¼ æ’­é‡ DeferredShadingRenderer.cppï¼ˆ779ï¼‰ ClearLPVsï¼ˆï¼‰ ä½¿ç”¨DBufferæ—¶ç»˜åˆ¶å»¶æœŸè´´å›¾å•å‡»æ­¤å¤„è·å– DBufferå’Œå»¶æœŸè´´å›¾ DeferredShadingRenderer.cppï¼ˆ796ï¼‰ GCompositionLighting.ProcessBeforeBasePassï¼ˆï¼‰ å¦‚æœ‰å¿…è¦ï¼Œè¯· åœ¨ç»˜åˆ¶çº¿æ¡†å›¾æ—¶æ¸…é™¤GBufferé€æ˜é¢œè‰²ç¼“å†²åŒºï¼Œ æœ‰äº›æ¸¸æˆåœ¨å‘è¡Œæ¸¸æˆæ—¶æ— æ³•æ¸…é™¤GBufferæˆ–å±å¹•ã€‚ DeferredShadingRenderer.cppï¼ˆ805ï¼‰ SetAndClearViewGBufferï¼ˆï¼‰ DeferredShadingRenderer.cppï¼ˆ816ï¼‰ RHICmdList.Clearï¼ˆï¼‰ æ¸²æŸ“ä¸é€æ˜çš„å¯¹è±¡æ¸²æŸ“ é¡¹ç›®ï¼Œè¿™äº›é¡¹ç›®æ ¹æ®å®ƒä»¬æ˜¯Maskedè¿˜æ˜¯Defaultï¼Œæ˜¯å¦æœ‰LightMapç­‰æŒ‰æ¯ç§æ’åºé¡ºåºè¿›è¡Œäº†ç²¾ç»†åˆ†ç±» DeferredShadingRenderer.cppï¼ˆ828ï¼‰ RenderBasePassï¼ˆï¼‰ æ¸…é™¤ GBuffer çš„æœªç»˜åˆ¶éƒ¨åˆ†å¦‚æœäº‹å…ˆæ¸…é™¤GBufferï¼Œåˆ™ä¸å¿…è¦ã€‚ DeferredShadingRenderer.cppï¼ˆ851ï¼‰ ClearGBufferAtMaxZï¼ˆï¼‰ ç»˜åˆ¶ è‡ªå®šä¹‰æ·±åº¦è¯·å‚è§æ­¤å¤„ä»¥è·å–è‡ªå®šä¹‰æ·±åº¦ DeferredShadingRenderer.cppï¼ˆ860ï¼‰ RenderCustomDepthPassï¼ˆï¼‰ åœ¨è¿™é‡Œå†æ¬¡æ¨¡æ‹ŸGPUç²’å­é™¤äº†åœ¨è¿™é‡Œ å¤„ç†ä½¿ç”¨æ·±åº¦ç¼“å†²åŒºæ‰§è¡Œç¢°æ’æ£€æµ‹çš„ ç²’å­å¤–ï¼Œè¿˜å¯¹GPUç²’å­è¿›è¡Œæ’åº DeferredShadingRenderer.cppï¼ˆ865ï¼‰ åœºæ™¯-\u0026gt; FXSystem-\u0026gt; PostRenderOpaqueï¼ˆï¼‰ ä¸ºSceneDepthTextureåˆ›å»ºä¸€ä¸ªåŠåˆ†è¾¨ç‡ï¼ˆæ¯ä¸ªæ–¹é¢ä¸º1/4åˆ†è¾¨ç‡ï¼‰çš„ç¼“å†²åŒº DeferredShadingRenderer.cppï¼ˆ875ï¼‰ UpdateDownsampledDepthSurfaceï¼ˆï¼‰ æ‰§è¡Œé˜»å¡æµ‹è¯• HZBçš„æ„å»ºï¼Œæ‰§è¡Œæäº¤ çš„HZB Attotempkinderçš„è¿™ç¯‡æ–‡ç« æŒ‡ DeferredShadingRenderer.cppï¼ˆ881ï¼‰ BeginOcclusionTestsï¼ˆï¼‰ å¼€å§‹å†™ å› ä¸ºæœ‰ç‚¹å¤æ‚ï¼Œæ‰€ä»¥è¦å†™ä¸€äº›ç»†èŠ‚ DeferredShadingRenderer.cppï¼ˆ890ï¼‰ ä¸ä½¿ç”¨DBufferç»˜åˆ¶å»¶è¿Ÿçš„è´´å›¾ CompositionLighting.cppï¼ˆ293ï¼‰ AddDeferredDecalsBeforeLightingï¼ˆï¼‰ åœ¨å±å¹•ç©ºé—´ä¸­ç»˜åˆ¶ç¯å¢ƒå…‰é®æŒ¡ CompositionLighting.cppï¼ˆ300ï¼‰ AddPostProcessingAmbientOcclusionï¼ˆï¼‰ åæœŸå¤„ç†ç¯å¢ƒç«‹æ–¹ä½“è´´å›¾ CompositionLighting.cppï¼ˆ305ï¼‰ AddPostProcessingAmbientCubemapï¼ˆï¼‰ åˆ°è¿™é‡Œä¸ºæ­¢çš„ä¸€ç³»åˆ—å¤„ç† DeferredShadingRenderer.cppï¼ˆ904ï¼‰ GCompositionLighting.ProcessAfterBasePassï¼ˆï¼‰ é€æ˜çš„ä½“ç§¯å…‰ç¼“å†²æ¶²å¯æé«˜é€æ˜åº¦ DeferredShadingRenderer.cppï¼ˆ908ï¼‰ ClearTranslucentVolumeLightingï¼ˆï¼‰ ä»æ­¤å¤„å¼€å§‹çš„ä¸»è¦ç…§æ˜è®¾å¤‡ æ”¶é›†è¦ç»˜åˆ¶çš„ç¯å…‰å¹¶å°†å…¶æ’åº ä¸è¦æŠ•å½±ï¼Œä¸ä½¿ç”¨ç¯å…‰åŠŸèƒ½çš„ç¯å…‰å°†ä½¿ç”¨â€œ åŸºäºå›¾å—â€ ç»˜åˆ¶ï¼ˆå¦‚æœå¯èƒ½ï¼‰å¦‚æœä¸èƒ½ä½¿ç”¨â€œ åŸºäºå›¾å—â€å…³äºå»¶è¿Ÿæ¸²æŸ“ï¼Œè¿™æ˜¯å‘³oï¼Œä½†è¯·å‚è§æ­¤å¤„ LightRendering.cppï¼ˆ312-348ï¼‰ LightRendering.cppï¼ˆ423ï¼‰ RenderTiledDeferredLightingï¼ˆï¼‰ LightRendering.cppï¼ˆ429ï¼‰ RenderSimpleLightsStandardDeferredï¼ˆï¼‰ å®ƒä¸ä¼šé˜´å½±ï¼Œä¹Ÿä¸ä¼šä½¿ç”¨ç¯å…‰åŠŸèƒ½ï¼Œä½†æ˜¯ä¼¼ä¹æ— æ³•ä½¿ç”¨TBDRç»˜åˆ¶çš„ç¯å…‰ è¢«ç§°ä¸ºæ ‡å‡†å»¶è¿Ÿç¯å…‰ã€‚ LightRendering.cppï¼ˆ445ï¼‰ RenderLightï¼ˆï¼‰ å¦‚æœç”¨äºåŠé€æ˜çš„ä½“ç§¯å…‰æ˜¯æœ‰æ•ˆçš„ï¼Œåˆ™å°†æ¯ä¸ªå…‰æ³¨å…¥åˆ°ä½“ç§¯å…‰ä¸­ ï¼Œä»è€Œåœ¨3Dçº¹ç†ä¸Šç»˜åˆ¶å…‰æ•ˆæœã€‚ LightRendering.cppï¼ˆ455ï¼‰ InjectTranslucentVolumeLightingArrayï¼ˆï¼‰ LightRendering.cppï¼ˆ461ï¼‰ InjectSimpleTranslucentVolumeLightingArrayï¼ˆï¼‰ ä½¿ç”¨ç¯å…‰åŠŸèƒ½æŠ•å°„é˜´å½±çš„ç¯å…‰å°†å•ç‹¬å¤„ç† LightRendering.cppï¼ˆ468-552ï¼‰ é¦–å…ˆï¼Œæˆ‘åœ¨æŠ•å°„é˜´å½±æ—¶ ç»˜åˆ¶äº†ä¸€ä¸ªé˜´å½±è´´å›¾ï¼›åœ¨è¿™é‡Œæˆ‘è¿˜ç»˜åˆ¶äº†ä¸€ä¸ª åŠé€æ˜çš„é˜´å½±è´´å›¾ï¼›æˆ‘è®°å¾—åŠé€æ˜çš„å½“ç„¶æ˜¯å‚…ç«‹å¶ä¸é€æ˜åº¦è´´å›¾ã€‚ LightRendering.cppï¼ˆ495ï¼‰ RenderTranslucentProjectedShadowsï¼ˆï¼‰ LightRendering.cppï¼ˆ497ï¼‰ RenderProjectedShadowsï¼ˆï¼‰ ä½¿ç”¨LPVæ—¶ç»˜åˆ¶åå°„é˜´å½±è´´å›¾ LightRendering.cppï¼ˆ508ï¼‰ RenderReflectiveShadowMapsï¼ˆï¼‰ ç¯å…‰åŠŸèƒ½å›¾ é˜´å½±æŒ‡ç¤ºå™¨å›¾ LightRendering.cppï¼ˆ515ï¼‰ RenderLightFunctionï¼ˆï¼‰ LightRendering.cppï¼ˆ522ï¼‰ RenderPreviewShadowsIndicatorï¼ˆï¼‰ è¡°å‡ç¼“å†²å™¨ä¸­çš„åˆ†è¾¨ å…‰çš„è¡°å‡ä¿¡æ¯æ˜¯å¦æ›¾ç»è¢«å¸å…¥å¦ä¸€ä¸ªç¼“å†²å™¨ä¸­ï¼Ÿ LightRendering.cppï¼ˆ534ï¼‰ GSceneRenderTargets.FinishRenderingLightAttenuationï¼ˆï¼‰ æ³¨å…¥ä½“ç§¯å…‰ä»¥è·å¾—åŠé€æ˜ LightRendering.cppï¼ˆ541ï¼‰ InjectTranslucentVolumeLightingï¼ˆï¼‰ è¿™ æ˜¯ä½¿ç”¨å…‰åŠŸèƒ½æŠ•å°„é˜´å½±çš„å…‰å¤„ç†çš„ç»“æŸã€‚ LightRendering.cppï¼ˆ550ï¼‰ RenderLightï¼ˆï¼‰ è¿™ æ˜¯æ¯ä¸ªå…‰çš„LPV çš„ä¸»è¦æ³¨å…¥ç…§æ˜è¿‡ç¨‹çš„ç»“å°¾ LightRendering.cppï¼ˆ561-593ï¼‰ Lpv-\u0026gt; InjectLightDirectï¼ˆï¼‰ æ³¨å…¥ä½“ç§¯å…‰ä»¥å®ç°ç¯å¢ƒç«‹æ–¹ä½“è´´å›¾çš„åŠé€æ˜ DeferredShadingRenderer.cppï¼ˆ916ï¼‰ InjectAmbientCubemapTranslucentVolumeLightingï¼ˆï¼‰ è¿‡æ»¤ä½“ç§¯å…‰ä»¥è·å¾—åŠé€æ˜ DeferredShadingRenderer.cppï¼ˆ919ï¼‰ FilterTranslucentVolumeLightingï¼ˆï¼‰ LPVä¼ è¾“è¿‡ç¨‹ æ­¤å¤–ï¼Œç¬¬921è¡Œçš„æ³¨é‡Šä¸Šå†™æœ‰â€œ copypimisâ€ï¼Œä¾‹å¦‚â€œ Clear LPV bufferâ€ã€‚ DeferredShadingRenderer.cppï¼ˆ924ï¼‰ PropagateLPVsï¼ˆï¼‰ åŠ¨æ€å¤©å…‰ç»˜å›¾ DeferredShadingRenderer.cppï¼ˆ928ï¼‰ RenderDynamicSkyLightingï¼ˆï¼‰ å»¶è¿Ÿçš„åå°„å›¾å½¢ æ•è·çš„åå°„å›¾å½¢è€Œä¸æ˜¯å±å¹•ç©ºé—´ DeferredShadingRenderer.cppï¼ˆ931ï¼‰ RenderDeferredReflectionsï¼ˆï¼‰ LPVçš„GIç»˜å›¾ CompositionLighting.cppï¼ˆ344ï¼‰ AddPostProcessingLpvIndirectï¼ˆï¼‰ å±å¹•ç©ºé—´æ¬¡è¡¨é¢æ•£å°„ï¼ˆSSSSSï¼‰çš„åå¤„ç† CompositionLighting.cppï¼ˆ347-376ï¼‰ å¦‚æœå¯ç”¨äº†â€œå…‰è½´â€ï¼Œåˆ™ç»˜åˆ¶â€œå…‰è½´é®æŒ¡â€ DeferredShadingRenderer.cppï¼ˆ953ï¼‰ RenderLightShaftOcclusionï¼ˆï¼‰ å¤§æ°”é›¾å›¾ DeferredShadingRenderer.cppï¼ˆ977ï¼‰ RenderAtmosphereï¼ˆï¼‰ ç»˜å›¾é›¾ è¿™æ˜¯é«˜åº¦é›¾å—ï¼Ÿ DeferredShadingRenderer.cppï¼ˆ986ï¼‰ RenderFogï¼ˆï¼‰ ç”»ä¸€ä¸ªåŠé€æ˜çš„ç‰©ä½“ åœ¨è¿™é‡Œä¹Ÿç”»ä¸€ä¸ªå•ç‹¬çš„åŠé€æ˜çš„ä¸œè¥¿ DeferredShadingRenderer.cppï¼ˆ1000ï¼‰ RenderTranslucencyï¼ˆï¼‰ æŠ˜å°„å˜å½¢å¤„ç† DeferredShadingRenderer.cppï¼ˆ1008ï¼‰ RenderDistortionï¼ˆï¼‰ å…‰è½´çš„èµ·éœœå¤„ç† DeferredShadingRenderer.cppï¼ˆ1013ï¼‰ RenderLightShaftBloomï¼ˆï¼‰ è·ç¦»åœºAOå¤„ç†ä¸èƒ½åœ¨ å½“å‰ä¸æ”¯æŒå¤šä¸ªè§†å£ çš„åˆ†å±æ¸¸æˆä¸­ä½¿ç”¨å—ï¼Ÿ DeferredShadingRenderer.cppï¼ˆ1019ï¼‰ RenderDistanceFieldAOSurfaceCacheï¼ˆï¼‰ å®ƒåªæ˜¯åœ¨æŸ¥çœ‹ç½‘æ ¼çš„â€œè·ç¦»åœºâ€çš„å¯è§†åŒ–å¤„ç†ç»“æœå—ï¼Ÿ DeferredShadingRenderer.cppï¼ˆ1024ï¼‰ RenderMeshDistanceFieldVisualizationï¼ˆï¼‰ ç”±äºé€Ÿåº¦æ¨¡ç³Šè€Œç»˜åˆ¶è¿åŠ¨å¯¹è±¡çš„é€Ÿåº¦ DeferredShadingRenderer.cppï¼ˆ1034ï¼‰ RenderVelocitiesï¼ˆï¼‰ ä»è¿™é‡Œåˆ°æœ€åçš„å‘å¸ƒè¿‡ç¨‹ï¼Œ è¿™ä¹Ÿå¾ˆå¤æ‚è€Œä¸”å¾ˆé•¿ DeferredShadingRenderer.cppï¼ˆ1047ï¼‰ GPostProcessing.Processï¼ˆï¼‰ ä½¿ç”¨BeforeTranslucencyè®¾ç½®ç»˜åˆ¶åå¤„ç†ææ–™ PostProcessing.cppï¼ˆ878ï¼‰ AddPostProcessMaterialï¼ˆï¼‰ æ™¯æ·±å¤„ç† é€šè¿‡é«˜æ–¯æ¨¡ç³Šè¿›è¡ŒDOF å¤„ç†ä¹‹åï¼Œæ­£åœ¨æ‰§è¡Œæ•£ç„¦å¤„ç†ï¼ˆä½¿ç”¨æŒ‡å®šçš„å…‰åœˆå½¢çŠ¶çš„çº¹ç†è¿›è¡Œç»˜åˆ¶ï¼‰ï¼Œ åœ¨æ­¤é˜¶æ®µä¼¼ä¹åˆå¹¶äº†å•ç‹¬çš„åŠé€æ˜ç¼“å†²åŒº PostProcessing.cppï¼ˆ888ï¼‰ AddPostProcessDepthOfFieldGaussianï¼ˆï¼‰ PostProcessing.cppï¼ˆ898ï¼‰ AddPostProcessDepthOfFieldBokehï¼ˆï¼‰ PostProcessing.cppï¼ˆ905ï¼‰ FRCPassPostProcessBokehDOFRecombine ï¼ˆå¦‚æœæœªå¯ç”¨æ¨¡ç³Šï¼‰ ä½¿ç”¨BeforeTonemappingè®¾ç½®ç»˜åˆ¶åå¤„ç†ææ–™ PostProcessing.cppï¼ˆ913ï¼‰ AddPostProcessMaterialï¼ˆï¼‰ å¦‚æœè¦ä½¿ç”¨TemporalAA ï¼Œè¯·åœ¨æ­¤å¤„ç»˜åˆ¶ï¼Œå¦‚æœä½¿ç”¨FXAAï¼Œè¯·ç¨åå†ç»˜åˆ¶ PostProcessing.cppï¼ˆ921ï¼‰ AddTemporalAAï¼ˆï¼‰ PostProcessing.cppï¼ˆ928ï¼‰ AddTemporalAAï¼ˆï¼‰ ï¼ˆå¦‚æœä¸ä½¿ç”¨é€Ÿåº¦ç¼“å†²åŒºï¼Œè¯·å•å‡»æ­¤å¤„ï¼‰ è¿åŠ¨æ¨¡ç³Šå¤„ç† è®¾ç½®ï¼Œåˆ†è¾¨ç‡ä¸‹é‡‡æ ·ï¼Œé«˜æ–¯æ¨¡ç³Šï¼Œè¿åŠ¨æ¨¡ç³Šç»˜åˆ¶ï¼Œç»„åˆå¤„ç† PostProcessing.cppï¼ˆ932-994ï¼‰ FRCPassPostProcessMotionBlurSetup FRCPassPostProcessDownsample RenderGaussianBlurï¼ˆï¼‰ FRCPassPostProcessMotionBlur FRCPassPostProcessMotionBlurRecombine SceneColorä¸‹é‡‡æ · PostProcessing.cppï¼ˆ1000ï¼‰ FRCPassPostProcessDownsample ç›´æ–¹å›¾ PostProcessing.cppï¼ˆ1006-1040ï¼‰ FRCPassPostProcessHistogram FRCPassPostProcessHistogramReduce æ­¤å¤„éœ€è¦çœ¼ç›é€‚åº”å›¾ç›´æ–¹å›¾ PostProcessing.cppï¼ˆ1046ï¼‰ AddPostProcessEyeAdaptationï¼ˆï¼‰ å¸ƒå¢å§†ç»˜å›¾ PostProcessing.cppï¼ˆ1057ï¼‰ AddBloomï¼ˆï¼‰ PostProcessing.cppï¼ˆ1060-1148ï¼‰ ï¼ˆå¯¹äºç§»åŠ¨è®¾å¤‡ï¼Œè¯·å•å‡»æ­¤å¤„ï¼‰ è‰²è°ƒæ˜ å°„ ä»…æ›¿æ¢ReplacecingTonemapperè®¾ç½®å·¥ç¨‹å›¾çš„ä¸€ç§åå¤„ç†ææ–™ï¼Œä½†æ˜¯ å¦‚æœå­˜åœ¨è¯¥ææ–™ï¼Œåˆ™æ‰§è¡Œé»˜è®¤è‰²è°ƒæ˜ å°„ PostProcessing.cppï¼ˆ1155ï¼‰ AddSinglePostProcessMaterialï¼ˆï¼‰ PostProcessing.cppï¼ˆ1171ï¼‰ AddTonemapperï¼ˆï¼‰ ï¼ˆé»˜è®¤è‰²è°ƒæ˜ å°„ï¼‰ å¦‚æœå¯ç”¨äº†FXAAï¼Œè¯·åœ¨æ­¤å¤„å¤„ç† PostProcessing.cppï¼ˆ1177ï¼‰ AddPostProcessAAï¼ˆï¼‰ ç»˜åˆ¶ä¸€äº›ç¼–è¾‘å™¨ï¼ˆå¦‚é€‰å®šçš„è½®å»“ï¼‰ï¼Œ ç„¶åä½¿ç”¨AfterTonemappingè®¾ç½®ç»˜åˆ¶åæœŸå¤„ç†ææ–™ PostProcessing.cppï¼ˆ1244ï¼‰ AddPostProcessMaterialï¼ˆï¼‰ ç”¨äºåœ°ä¸‹å’ŒGBufferçš„å¯è§†åŒ– è°ƒè¯• PostProcessing.cppï¼ˆ1246-1254ï¼‰ ç”¨äºHMDçš„åå¤„ç† Oculusæˆ–Morpheus PostProcessing.cppï¼ˆ1256-1277ï¼‰ FRCPassPostProcessHMD FRCPassPostProcessMorpheus ä¹‹åï¼Œè°ƒè¯•å’Œé«˜åˆ†è¾¨ç‡å±å¹•æˆªå›¾åŠŸèƒ½ç­‰ã€‚ ä¹‹åï¼Œè¿›è¡Œåå¤„ç†å¹¶ç»“æŸï¼ è°¢è°¢ï¼ PostProcessing.cppï¼ˆ1279-ï¼‰ å“¦ï¼Œå¾ˆé•¿ã€‚\nå‚è€ƒé“¾æ¥ï¼š\nå¦‚ä½•åœ¨C ++ä¸­ä»UTexture2Dè¯»å–æ•°æ®\nhttps://forums.unrealengine.com/development-discussion/c-gameplay-programming/1422920-casting-converting-frhitexture-to-utexture\nUnrealæ¸²æŸ“ç›¸å…³çš„ç¼“å†²åŒº\nhttps://qiita.com/mechamogera/items/a0c369a3b853a3042cae\nhttps://answers.unrealengine.com/questions/17862/access-color-and-depth-buffer-of-each-frame.html\nhttps://segmentfault.com/a/1190000012737548\nGbuffæ•°æ®\næ¸²æŸ“ç³»ç»Ÿæ¦‚è¿° å›¾ç‰‡\n","description":"","id":21,"section":"posts","tags":["c++","UE4","æ¸¸æˆå¼•æ“"],"title":"UE4æ¸²æŸ“è¿‡ç¨‹","uri":"https://hugo.jiahongw.com/zh/posts/ue/ue4-render/"},{"content":"RSAç®—æ³• RSAåŠ å¯†ç®—æ³•æ˜¯ä¸€ç§éå¯¹ç§°åŠ å¯†ç®—æ³•ï¼Œåœ¨å…¬å¼€å¯†é’¥åŠ å¯†å’Œç”µå­å•†ä¸šä¸­è¢«å¹¿æ³›ä½¿ç”¨ã€‚\nå¯¹æå¤§æ•´æ•°åšå› æ•°åˆ†è§£çš„éš¾åº¦å†³å®šäº† RSA ç®—æ³•çš„å¯é æ€§ã€‚æ¢è¨€ä¹‹ï¼Œå¯¹ä¸€æå¤§æ•´æ•°åšå› æ•°åˆ†è§£æ„ˆå›°éš¾ï¼ŒRSA ç®—æ³•æ„ˆå¯é ã€‚å‡å¦‚æœ‰äººæ‰¾åˆ°ä¸€ç§å¿«é€Ÿå› æ•°åˆ†è§£çš„ç®—æ³•çš„è¯ï¼Œé‚£ä¹ˆç”¨ RSA åŠ å¯†çš„ä¿¡æ¯çš„å¯é æ€§å°±ä¼šæåº¦ä¸‹é™ã€‚ä½†æ‰¾åˆ°è¿™æ ·çš„ç®—æ³•çš„å¯èƒ½æ€§æ˜¯éå¸¸å°çš„ã€‚ä»Šå¤©åªæœ‰çŸ­çš„ RSA é’¥åŒ™æ‰å¯èƒ½è¢«å¼ºåŠ›æ–¹å¼ç ´è§£ã€‚åˆ°å½“å‰ä¸ºæ­¢ï¼Œä¸–ç•Œä¸Šè¿˜æ²¡æœ‰ä»»ä½•å¯é çš„æ”»å‡»RSAç®—æ³•çš„æ–¹å¼ã€‚åªè¦å…¶é’¥åŒ™çš„é•¿åº¦è¶³å¤Ÿé•¿ï¼Œç”¨RSAåŠ å¯†çš„ä¿¡æ¯å®é™…ä¸Šæ˜¯ä¸èƒ½è¢«ç ´è§£çš„ã€‚\nå…¬é’¥/åŒå¯†é’¥/éå¯¹ç§° åŠ å¯† æ¶‰åŠåˆ°ä¸¤ä¸ªå¯†é’¥çš„ä½¿ç”¨:\nä¸€ä¸ªå…¬é’¥, å¯ä»¥è¢«ä»»ä½•äººçŸ¥é“ï¼Œç”¨äºåŠ å¯†æ¶ˆæ¯å’ŒéªŒè¯ç­¾å ä¸€ä¸ªç§é’¥, åªæœ‰æ¥æ”¶æ–¹æ‰çŸ¥é“ï¼Œç”¨äºè§£å¯†æ¶ˆæ¯å’Œåˆ›é€ ç­¾å RSAå®ç°è¿‡ç¨‹ 1. å…¬é’¥ä¸ç§é’¥çš„äº§ç”Ÿ ç”Ÿæˆå…¬é’¥eå’Œç§é’¥dçš„æ­¥éª¤å¦‚ä¸‹ï¼š\néšæ„é€‰æ‹©ä¸¤ä¸ªå¤§çš„è´¨æ•°$p$å’Œ$q$ï¼Œ$p$ä¸ç­‰äº$q$ï¼Œè®¡ç®—$n=pq$ã€‚ æ ¹æ®æ¬§æ‹‰å‡½æ•°ï¼Œæ±‚$r = \\varphi (N) = \\varphi (p)\\varphi (q) = (p - 1)(q - 1)$ é€‰æ‹©ä¸€ä¸ªå°äº$r$çš„æ•´æ•°$e$ï¼Œä½¿$e$ä¸$r$äº’è´¨ã€‚å¹¶æ±‚å¾—$e$å…³äº$r$çš„æ¨¡åå…ƒç´ ï¼Œå‘½åä¸º$d$(æ±‚$d$ä»¤$ed \\equiv 1(\\bmod ;r)$)ã€‚(æ¨¡åå…ƒç´ å­˜åœ¨ï¼Œå½“ä¸”ä»…å½“$e$ä¸$r$äº’è´¨) å°†$p$å’Œ$q$çš„è®°å½•é”€æ¯ ç»è¿‡ä¸Šé¢å››ä¸ªæ­¥éª¤æœ€ç»ˆå¯ä»¥å¾—åˆ°å…¬é’¥$(n,e)$å’Œç§é’¥$(n,d)$ã€‚\næ¥æ”¶æ¶ˆæ¯çš„äººå°†è‡ªå·±çš„å…¬é’¥$(n,e)$å‘é€ç»™å‘é€æ¶ˆæ¯çš„äºº,å‘é€çš„äººä½¿ç”¨è¿™ä¸ªå…¬é’¥åŠ å¯†ä¿¡æ¯å‘é€ç»™æ¥æ”¶æ–¹ï¼Œè€Œæ¥æ”¶æ–¹å°†ç§é’¥$(n,d)$ä¿å­˜èµ·æ¥ç”¨äºè§£å¯†ã€‚\nä¸‹é¢å®ç°RSAç±»\nå‚è€ƒèµ„æ–™ï¼š\nç±³å‹’-æ‹‰å®¾ç´ æ€§æ£€éªŒ RSAåŠ å¯†ç®—æ³• C++å®ç° å®éªŒæ­¥éª¤ä¸ç»“æœ 1.å®ç°å¤§æ•´æ•°ç±» å› ä¸ºè¯¥åŠ å¯†ç®—æ³•æ¶‰åŠçš„æ•°å¯èƒ½å¾ˆå¤§ï¼Œè€ŒC++ä¸­å¹¶æ²¡æœ‰åƒJavaä¸€æ ·ï¼Œå†…ç½®å¤§æ•´æ•°ç±»BigIntegerï¼Œæ•…éœ€è‡ªå·±å®ç°ï¼Œè¿™é‡Œæˆ‘å‚è€ƒäº†ç½‘ä¸Šçš„ä¸€äº›èµ„æ–™è®¾è®¡äº†BigIntegerç±»ï¼Œå®ç°äº†åŠ å‡ä¹˜é™¤ä»¥åŠæ¨¡å¹‚ç­‰è¿ç®—ï¼Œä¹Ÿå®ç°äº†è¿ç®—ç¬¦é‡è½½ï¼Œå…·ä½“å‚è€ƒå®ç°çš„æ–¹æ³•å¦‚ä¸‹ï¼š\n2. è®¾è®¡RSAç±» ç¼–å†™rsa.hå¤´æ–‡ä»¶ï¼Œå®šä¹‰RSAç±»ï¼Œå…¶ä¸­åŒ…å«çš„æˆå‘˜ä»¥åŠæˆå‘˜å‡½æ•°å¦‚ä¸‹ï¼š\nä¸‹é¢åˆ†åˆ«å®ç°ä¸Šè¿°çš„å„ä¸ªæ–¹æ³•\né¦–å…ˆè¦ç”Ÿæˆå¯†é’¥å¯¹ï¼Œå³ç”Ÿæˆå…¬é’¥å’Œç§é’¥ï¼Œé‚£ä¹ˆï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦ç”Ÿæˆä¸¤ä¸ªå¤§ç´ æ•°på’Œq,æ˜¾ç„¶ï¼Œç´ æ•°æ˜¯ä¸å¯èƒ½æ˜¯å¶æ•°çš„ï¼Œæ•…å®šä¹‰ä¸€ä¸ªç”Ÿæˆéšæœºå¥‡æ•°çš„å‡½æ•°BigInteger createOddNum(unsigned len)å‚æ•°ä¸ºå¥‡æ•°çš„é•¿åº¦ã€‚\nä½¿ç”¨16è¿›åˆ¶çš„éšæœºå­—æ¯ï¼Œç„¶åéšæœºé€‰å–å…¶ä¸­çš„len/4ä¸ªå¾—åˆ°ä¸€ä¸ªéšæœºçš„å¤§å¥‡æ•°ï¼Œåªéœ€è¦æœ«å°¾é‚£ä¸ªæ•°ä¸ºå¥‡æ•°å³å¯ï¼Œæœ€åè¿”å›BigIntegerç±»å‹çš„å¥‡æ•°å¤§æ•´æ•°ï¼Œå…³é”®ä»£ç å¦‚ä¸‹ï¼š\nç„¶åå®šä¹‰ä¸€ä¸ªç”Ÿæˆç´ æ•°çš„å‡½æ•°ï¼Œå…¶ä¸­ç”¨åˆ°ç±³å‹’-æ‹‰å®¾ç´ æ€§æ£€éªŒç®—æ³•åˆ¤æ–­ç”Ÿæˆçš„ç´ æ•°æ˜¯å¦ä¸ºç´ æ•°ç´ æ•°ï¼š\nç±³å‹’-æ‹‰å®¾ç´ æ€§æ£€æµ‹ç®—æ³• åŸºäºä»¥ä¸‹å®šç†ï¼š\nè´¹é©¬å°å®šç† è¦æµ‹è¯•$N$æ˜¯å¦ä¸ºç´ æ•°ï¼Œé¦–å…ˆå°†$Nâˆ’1$åˆ†è§£ä¸º$2^{s}d$ã€‚åœ¨æ¯æ¬¡æµ‹è¯•å¼€å§‹æ—¶ï¼Œå…ˆéšæœºé€‰ä¸€ä¸ªä»‹äº$[1,Nâˆ’1]$çš„æ•´æ•°$a$ï¼Œä¹‹åå¦‚æœå¯¹æ‰€æœ‰çš„$râˆˆ[0,sâˆ’1]$ï¼Œè‹¥${a^d}\\bmod N \\ne 1$ä¸”${a^{{2^r}d}}\\bmod N \\ne - 1$ï¼Œåˆ™$N$æ˜¯åˆæ•°ã€‚å¦åˆ™ï¼Œ$N$æœ‰$3/4$çš„æ¦‚ç‡ä¸ºç´ æ•°ã€‚\nå…³é”®ä»£ç å¦‚ä¸‹ï¼š\nç”Ÿæˆç´ æ•°çš„é€»è¾‘å°±æ˜¯é¦–å…ˆä½¿ç”¨å‡½æ•°createOddNumç”Ÿæˆä¸€ä¸ªå¤§å¥‡æ•°ï¼Œç„¶åè°ƒç”¨isPrimeåˆ¤æ–­æ˜¯å¦ä¸ºä¸€ä¸ªç´ æ•°ï¼Œæ˜¯çš„è¯å°±å¯ä»¥returnï¼Œä¸ç„¶ç»§ç»­å¯»æ‰¾ï¼ŒçŸ¥é“ç”Ÿæˆä¸€ä¸ªç´ æ•°ã€‚\næ¥ä¸‹æ¥è®¡ç®—nå€¼ï¼Œnå€¼çš„è®¡ç®—å¾ˆç®€å•ï¼Œç›´æ¥ä½¿ç”¨$n = p * q$ è¿™ä¸ªå¼å­å°±èƒ½å¤Ÿè®¡ç®—å‡ºæ¥ï¼›è®¡ç®—æ¬§æ‹‰å€¼ä¹Ÿä¸€æ ·ï¼Œå¯ä»¥ä½¿ç”¨$\\varphi(n) = (p-1) * (q-1)$å¾—å‡ºã€‚å…¶ä¸­æ¯”è¾ƒéš¾çš„æ˜¯ç”Ÿæˆçš„ç§é’¥dã€‚\nä¸‹é¢å®šä¹‰ä¸€ä¸ªRSAç±»çš„åˆå§‹åŒ–å‡½æ•°init()â€‹ï¼Œç”Ÿæˆpã€qä»¥åŠå¯†é’¥å¯¹ï¼Œå¦‚ä¸‹ï¼š\nåœ¨åˆ›å»ºå…¬é’¥eå’Œç§é’¥dçš„å‡½æ•°createExponent(eul)ä¸­ï¼Œé¦–å…ˆåˆ›å»ºä¸€ä¸ªæ¯”æ¬§æ‹‰å€¼å°çš„å…¬é’¥eï¼Œå…¶ä¸­eä¸ºä¸€ä¸ªç´ æ•°ï¼Œç›´æ¥è°ƒç”¨å‡½æ•°createPrime()ç”Ÿæˆï¼Œç„¶åä½¿ç”¨å¤§æ•´æ•°ç±»ä¸­çš„æ±‚æ¨¡é€†å…ƒï¼Œå³æ±‚å‡ºç§é’¥dã€‚\næ‰©å±•æ¬§å‡ é‡Œå¾—ç®—æ³• é€†å…ƒ\né€†å…ƒæ˜¯æ¨¡è¿ç®—ä¸­çš„ä¸€ä¸ªæ¦‚å¿µï¼Œæˆ‘ä»¬é€šå¸¸è¯´ A æ˜¯ B æ¨¡ C çš„é€†å…ƒï¼Œå®é™…ä¸Šæ˜¯æŒ‡ A * B = 1 mod Cï¼Œä¹Ÿå°±æ˜¯è¯´ A ä¸ B çš„ä¹˜ç§¯æ¨¡ C çš„ä½™æ•°ä¸º 1ã€‚å¯è¡¨ç¤ºä¸º A = B^(-1) mod Cã€‚\næ‰“ä¸ªæ¯”æ–¹ï¼Œ7 æ¨¡ 11 çš„é€†å…ƒï¼Œå³ï¼š7^(-1) mod 11 = 8ï¼Œè¿™æ˜¯å› ä¸º 7 Ã— 8 = 5 Ã— 11 + 1ï¼Œæ‰€ä»¥è¯´ 7 æ¨¡ 11 çš„é€†å…ƒæ˜¯ 8ã€‚\næ‰©å±•æ¬§å‡ é‡Œå¾—ç®—æ³•æ˜¯æ¬§å‡ é‡Œå¾—ç®—æ³•ï¼ˆåˆå«è¾—è½¬ç›¸é™¤æ³•ï¼‰çš„æ‰©å±•ã€‚å·²çŸ¥æ•´æ•°aã€bï¼Œæ‰©å±•æ¬§å‡ é‡Œå¾—ç®—æ³•å¯ä»¥åœ¨æ±‚å¾—aã€bçš„æœ€å¤§å…¬çº¦æ•°çš„åŒæ—¶ï¼Œèƒ½æ‰¾åˆ°æ•´æ•°xã€yï¼ˆå…¶ä¸­ä¸€ä¸ªå¾ˆå¯èƒ½æ˜¯è´Ÿæ•°ï¼‰ï¼Œä½¿å®ƒä»¬æ»¡è¶³è´ç¥–ç­‰å¼\n$$\nax{\\rm{ }} + {\\rm{ }}by{\\rm{ }} = {\\rm{ }}gcd\\left( {a,b} \\right).\n$$\nåœ¨RSAç®—æ³•ä¸­æ±‚ç§é’¥ä¸­çš„æ•´æ•°dæ—¶ï¼Œéœ€è¦ä½¿å¾— (e * d ) % n = 1ï¼Œè¯¥æ–¹ç¨‹ç­‰ä»·äº e * d = 1 + y * n ï¼ˆyä¸ºæ•´æ•°ï¼‰ï¼Œä¹Ÿç­‰ä»·äº e * d - y * n = 1ã€‚\nå› æ­¤æ±‚è§£dçš„è¿‡ç¨‹å°±æ˜¯æ±‚è§£è¯¥äºŒå…ƒä¸€æ¬¡æ–¹ç¨‹ç»„ï¼ˆeå’Œnå·²çŸ¥ï¼Œæ±‚è§£dï¼‰ï¼Œå³æ±‚eæ¨¡nçš„é€†å…ƒã€‚\nå…³é”®ä»£ç å¦‚ä¸‹ï¼š\næˆ‘ä»¬çŸ¥é“ï¼ŒRSAçš„åŠ å¯†ä¸è§£å¯†å…¶å®å°±æ˜¯ä¸€ä¸ªæ¨¡å¹‚çš„è¿ç®—ï¼Œè€Œè¿™ä¸ªæ¨¡å¹‚çš„è¿ç®—å·²ç»åœ¨å¤§æ•´æ•°ç±»ä¸­å®ç°äº†ï¼Œå¦‚ä¸‹ï¼š\nä½¿ç”¨RSAç±»è¿›è¡ŒåŠ å¯†è§£å¯†çš„å‡½æ•°åªéœ€è¦è°ƒç”¨è¿™ä¸ªæ¨¡å¹‚è¿ç®—å³å¯ï¼Œä¾‹å¦‚ç§é’¥åŠ å¯†å¯ä»¥è¿™æ ·è°ƒç”¨ï¼š\nä»¥ä¸Šå°±è®¾è®¡å®Œäº†RSAç±»çš„ç›¸å…³æ“ä½œï¼Œä¸»è¦æ˜¯åŒ…æ‹¬å¯†é’¥çš„ç”Ÿæˆã€‚ä¸‹é¢å°†RSAåŠ å¯†è§£å¯†çš„æ“ä½œå°è£…åœ¨ä¸€ä¸ªç±»ä¸­ã€‚\n3. è®¾è®¡åŠ å¯†è§£å¯†ç±»EncryptDecrypt ä¸»è¦çš„æ–¹æ³•åŠæˆå‘˜å¦‚ä¸‹ï¼š\nå®ç°RSAåŠ å¯†è§£å¯†å­—ç¬¦ä¸² åŠ å¯†å­—ç¬¦ä¸²çš„é€»è¾‘æ˜¯ï¼Œå…ˆå°†å­—ç¬¦ä¸²ä»¥æ¯ä¸¤ä¸ªå­—ç¬¦ ä¸€ç»„ï¼Œè½¬åŒ–ä¸ºä¸€ä¸ª16è¿›åˆ¶æ•°æ®åºåˆ—ï¼Œä½¿ç”¨vectorå®¹å™¨ä¿å­˜ï¼Œä¹‹åè°ƒç”¨rsaçš„å…¬é’¥åŠ å¯†å‡½æ•°è¿›è¡ŒåŠ å¯†ï¼Œå¦‚ä¸‹æ˜¯å…³é”®ä»£ç ï¼š\nè§£å¯†å‡½æ•°å…¶å®æ˜¯æ¥å—ä¸€ä¸ªåŠ å¯†åçš„16è¿›åˆ¶åºåˆ—ï¼Œç„¶åå¯¹è¿™ä¸ªåºåˆ—è°ƒç”¨RSAçš„ç§é’¥è§£å¯†å‡½æ•°è¿›è¡Œè§£å¯†ï¼Œç„¶åå¾—åˆ°è§£å¯†åçš„16è¿›åˆ¶æ•°æ®åºåˆ—ï¼Œæœ€åè¿˜æœ‰ä¸€æ­¥å°±æ˜¯éœ€è¦å°†è¿™ä¸ª16è¿›åˆ¶åºåˆ—æœ€ç»ˆè½¬åŒ–ä¸ºåŸæ¥çš„å­—ç¬¦ä¸²ï¼Œåªéœ€è¦æ ¹æ®asciiç çš„æ•°å€¼å³å¯å¾—åˆ°ï¼Œè¿™é‡Œç¼–å†™äº†ä¸€ä¸ªhex2stringå‡½æ•°ï¼Œå…³é”®ä»£ç å¦‚ä¸‹ï¼š\nå®ç°æ•ˆæœ\né¦–å…ˆæ˜¾ç¤ºå¯†é’¥ï¼š\nåŠ å¯†å­—ç¬¦ä¸²\nè§£å¯†å­—ç¬¦ä¸²\nå®ç°RSAåŠ å¯†è§£å¯†æ–‡ä»¶ å®ç°RSAåŠ å¯†è§£å¯†æ–‡ä»¶æ—¶åŸºäºRSAåŠ å¯†è§£å¯†å­—ç¬¦ä¸²å®ç°çš„ï¼Œå…¶ä¸­ä¸»è¦çš„åŠ å¯†é€»è¾‘å°±æ˜¯å°†ä¸€ä¸ªæ–‡ä»¶çœ‹ä½œæ˜¯ä¸€è¡Œä¸€è¡Œçš„å­—ç¬¦ä¸²æ–‡æœ¬ï¼Œæ²¡æ¯è¯»å–ä¸€è¡Œï¼Œå°±è°ƒç”¨åŠ å¯†å­—ç¬¦ä¸²çš„å‡½æ•°è¿›è¡ŒåŠ å¯†ï¼Œç„¶åå°†åŠ å¯†å¾—åˆ°çš„16è¿›åˆ¶åºåˆ—å†™å…¥åˆ°å¦å¤–ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œè€Œè¿™ä¸ªæ–‡ä»¶ä¹Ÿå°±æ˜¯åŠ å¯†åçš„æ–‡ä»¶ï¼Œä¸»è¦å…³é”®ä»£ç å¦‚ä¸‹ï¼š\nè§£å¯†æ–‡ä»¶çš„å‡½æ•°ç¨å¾®æœ‰ç‚¹ä¸ä¸€æ ·ï¼Œæ˜¯ä»æ‰“å¼€çš„å¾…è§£å¯†æ–‡ä»¶ä¸­å¾ªç¯è¯»å–æ¯ä¸€ä¸ª16è¿›åˆ¶æ•°æ®ï¼Œç„¶åå¯¹æ¯ä¸€ä¸ª16è¿›åˆ¶æ•°æ®è°ƒç”¨è§£å¯†å‡½æ•°å¾—åˆ°è§£å¯†åçš„16è¿›åˆ¶æ•°æ®ï¼Œå°†16è¿›åˆ¶æ•°æ®è½¬ä¸ºå­—ç¬¦ä¸²åå†ç›¸ç»§çš„å†™åˆ°å¦å¤–ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œå³è§£å¯†åçš„æ–‡ä»¶ï¼Œå…³é”®ä»£ç å¦‚ä¸‹ï¼š\nå®ç°æ•ˆæœ\nåŠ å¯†æ–‡ä»¶\nè§£å¯†æ–‡ä»¶\nåŠ å¯†æ–‡ä»¶è§£å¯†æ–‡ä»¶å¯¹æ¯”\nå®ç°RSAæ•°å­—ç­¾ååŠéªŒè¯ å®ç°æ•°å­—ç­¾åæ–¹æ¡ˆï¼ŒæŒ‰ç…§ä»¥ä¸‹çš„æµç¨‹å›¾è¿›è¡Œæ“ä½œã€‚\né¦–å…ˆéœ€è¦å¯¹æ–‡ä»¶è¿›è¡Œä¿¡æ¯çš„æ‘˜è¦ï¼Œå¾—åˆ°Hashå€¼ï¼Œè¿™é‡Œé€‰æ‹©çš„Hashç®—æ³•æ˜¯SHA512ç®—æ³•ï¼Œå¯ä»¥ç›´æ¥å¯¹æ–‡ä»¶è¿›è¡Œä¿¡æ¯æ‘˜è¦ã€‚\nå¯ä»¥ç›´æ¥include C++ å®ç°çš„\u0026quot;sha512.h\u0026quot;æ–‡ä»¶å¤´ï¼Œç„¶åä½¿ç”¨ä»¥ä¸‹çš„è¯­å¥å°±èƒ½å¤Ÿç”Ÿæˆä¸€ä¸ªé•¿åº¦ä¸º512çš„Hashå€¼ï¼Œå¦‚ä¸‹ï¼š\nå¯ä»¥åœ¨å‘½ä»¤è¡Œè¾“å‡ºæ–‡ä»¶çš„Hashæ‘˜è¦å€¼å¦‚ä¸‹:\næ•°å­—ç­¾åçš„å®ç°ç±»ä¼¼å­—ç¬¦ä¸²åŠ å¯†ï¼Œå¯¹æ–‡ä»¶çš„hashå€¼è¿›è¡ŒåŠ å¯†å¾—åˆ°åé¢çš„16è¿›åˆ¶åºåˆ—ï¼Œç„¶åå°†16è¿›åˆ¶åºåˆ—ä¼´éšæ–‡ä»¶å‘é€å‡ºå»ï¼Œç­¾åçš„å…³é”®ä»£ç å°±æ˜¯å¯¹hashå€¼è¿›è¡ŒåŠ å¯†ï¼Œå¦‚ä¸‹ï¼š\néªŒè¯å‡½æ•°ç›´æ¥å°†16è¿›åˆ¶åºåˆ—è¿›è¡Œè§£å¯†ï¼Œç„¶åè¿˜åŸæˆå­—ç¬¦ä¸²å†ä¸æ”¶åˆ°çš„æ–‡ä»¶çš„hashå€¼è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœç›¸ç­‰ï¼Œé‚£ä¹ˆéªŒè¯æˆåŠŸï¼›å¦åˆ™éªŒè¯å¤±è´¥ï¼Œå…³é”®ä»£ç å¦‚ä¸‹ï¼š\nå®ç°æ•ˆæœ\næ•°å­—ç­¾å\néªŒè¯æ•°å­—ç­¾å\n","description":"","id":22,"section":"posts","tags":["rsa","å¯†ç å­¦"],"title":"RSAåŠ å¯†ç®—æ³•","uri":"https://hugo.jiahongw.com/zh/posts/cryptography/rsa/"},{"content":"AESç®—æ³•æ˜¯ç»§DESä¹‹åæ¯”è¾ƒå¿«ä¸”æ¯”è¾ƒç®€å•çš„åŠ å¯†ç®—æ³•.âš–\nå¯¹ç§°åŠ å¯† å¯¹ç§°åŠ å¯†æ¨¡å‹ å¦‚ä¸‹å›¾ï¼Œå‘é€è€…å’Œæ¥æ”¶è€…å…±äº«ä¸€ä¸ªä¸€æ ·çš„å¯†é’¥ï¼Œç›¸å½“äºç°å®ç”Ÿæ´»ä¸­çš„é”ï¼Œ\nå¯¹ç§°åŠ å¯†çš„ä½¿ç”¨è¦æ±‚ ä¸€ä¸ªå¼ºåŠ å¯†ç®—æ³• åªæœ‰å‘é€å‘å’Œæ¥æ”¶æ–¹çŸ¥é“ç§é’¥ åŠ å¯†ç®—æ³•æ˜¯å…¬å¼€çš„ï¼Œä¸éœ€ä¿å¯†ï¼›å¹¶ä¸”è§£å¯†ç®—æ³•æœ¬è´¨ä¸Šæ˜¯åŠ å¯†ç®—æ³•çš„åå‘æ‰§è¡Œã€‚\nä½†æ˜¯ï¼Œå¦‚ä½•å®‰å…¨çš„åˆ†å‘å®‰å…¨å¯†é’¥å‘¢ï¼Ÿâ€”â€”â€”â€”â€”â€”å®‰å…¨åˆ†å‘ä¸å¯èƒ½å•é å¯¹ç§°åŠ å¯†ç®—æ³•ï¼Œå¸¸å¸¸ä½¿ç”¨çš„æ˜¯éå¯¹ç§°åŠ å¯†ç®—æ³•ã€‚\næ‰€ä»¥ï¼Œå¯¹ç§°åŠ å¯†çš„å®‰å…¨æ€§å–å†³äºå¯†é’¥çš„ä¿å¯†æ€§è€Œéç®—æ³•çš„ä¿å¯†æ€§ï¼Œé€šå¸¸è®¤ä¸ºå·²çŸ¥å¯†æ–‡å’ŒåŠ å¯†/åŠ å¯†ç®—æ³•çš„åŸºç¡€ä¸Šä¸èƒ½å¤Ÿç ´è¯‘ä¿¡æ¯ã€‚\nAESç®—æ³• ç®—æ³•åŸç†ï¼š AESå¯†ç ä¸åˆ†ç»„å¯†ç RijndaelåŸºæœ¬ä¸Šå®Œå…¨ä¸€è‡´ï¼ŒRijndaelåˆ†ç»„å¤§å°å’Œå¯†é’¥å¤§å°éƒ½å¯ä»¥ä¸º128ä½ã€192ä½å’Œ256ä½ã€‚ç„¶è€ŒAESåªè¦æ±‚åˆ†ç»„å¤§å°ä¸º128ä½ï¼Œå› æ­¤åªæœ‰åˆ†ç»„é•¿åº¦ä¸º128Bitçš„Rijndaelæ‰ç§°ä¸ºAESç®—æ³•ã€‚\nä¸‹é¢æ˜¯åˆ†ç»„é•¿åº¦ä¸º128ä½çš„AESç®—æ³•,è€Œkeyä½æ•°å¯ä»¥æ˜¯128/192/256,æœ¬æ¬¡å®éªŒé€‰æ‹©keyçš„å¤§å°ä½128ä½.\nç‰¹ç‚¹ æ˜æ–‡åˆ†ç»„è¢«æè¿°ä¸ºä¸€ä¸ªå­—èŠ‚æ–¹é˜µå¹¶å¤åˆ¶åˆ°çŠ¶æ€æ•°ç»„ï¼Œåœ¨æ¯è½®æ›¿æ¢å’Œç§»ä½æ—¶éƒ½å¹¶è¡Œå¤„ç†æ•´ä¸ªçŠ¶æ€åˆ†ç»„ã€‚ çŸ©é˜µä¸­å­—èŠ‚çš„é¡ºåºæ˜¯æŒ‰åˆ—æ’åºçš„ï¼Œä¾‹å¦‚128æ¯”ç‰¹çš„æ˜æ–‡åˆ†ç»„çš„å‰4ä¸ªå­—èŠ‚å è¾“å…¥çŸ©é˜µçš„ç¬¬ä¸€åˆ—ï¼Œæ¥ä¸‹æ¥çš„4ä¸ªå­—èŠ‚å ç¬¬äºŒåˆ—ï¼Œä¾æ¬¡ç±»æ¨ã€‚æ‰©å±•å­å¯†é’¥æ•°ç»„ä¹Ÿç±»ä¼¼æ“ä½œã€‚ å‡è®¾AESä½¿ç”¨128æ¯”ç‰¹çš„å¯†é’¥ï¼Œå…¶å¯†é’¥è¢«æè¿°ä¸ºä¸€ä¸ªå­—èŠ‚æ–¹é˜µå¹¶å°†æ‰©å±•æˆä¸ºä¸€ä¸ªå­å¯†é’¥æ•°ç»„w[i]ï¼ˆå…·æœ‰44ä¸ª32æ¯”ç‰¹å­—ï¼‰ï¼Œ4ä¸ªä¸åŒçš„å­—ï¼ˆå…±128æ¯”ç‰¹ï¼‰ç”¨ä½œæ¯è½®çš„è½®å¯†é’¥ã€‚ AESåœ¨æ¯è½®è¿ç®—ä¸­å°†è¿›è¡Œ4ä¸ªä¸åŒçš„æ­¥éª¤ï¼Œ1ä¸ªæ˜¯ç§»ä½ï¼Œ3ä¸ªæ˜¯æ›¿æ¢ã€‚ æ•°å­¦çŸ¥è¯† åœ¨AESç®—æ³•ä¸­çš„MixColumnå±‚ä¸­ä¼šç”¨åˆ°ä¼½ç½—ç“¦åŸŸä¸­çš„ä¹˜æ³•è¿ç®—ï¼Œè€Œä¼½ç½—ç“¦åŸŸçš„è¿ç®—æ¶‰åŠä¸€äº›æ•°å­¦çŸ¥è¯†ã€‚\nç´ åŸŸ æœ‰é™åŸŸæœ‰æ—¶ä¹Ÿç§°ä¼½ç½—ç“¦åŸŸï¼Œå®ƒæŒ‡çš„æ˜¯ç”±æœ‰é™ä¸ªå…ƒç´ ç»„æˆçš„é›†åˆï¼Œåœ¨è¿™ä¸ªé›†åˆå†…å¯ä»¥æ‰§è¡ŒåŠ ã€å‡ã€ä¹˜å’Œé€†è¿ç®—ã€‚è€Œåœ¨å¯†ç ç¼–ç å­¦ä¸­ï¼Œæˆ‘ä»¬åªç ”ç©¶æ‹¥æœ‰æœ‰é™ä¸ªå…ƒç´ çš„åŸŸï¼Œä¹Ÿå°±æ˜¯æœ‰é™åŸŸã€‚åŸŸä¸­åŒ…å«å…ƒç´ çš„ä¸ªæ•°ç§°ä¸ºåŸŸçš„é˜¶ã€‚åªæœ‰å½“mæ˜¯ä¸€ä¸ªç´ æ•°å¹‚æ—¶ï¼Œå³$m=p^n$(å…¶ä¸­nä¸ºæ­£æ•´æ•°æ˜¯pçš„æ¬¡æ•°ï¼Œpä¸ºç´ æ•°)ï¼Œé˜¶ä¸ºmçš„åŸŸæ‰å­˜åœ¨ã€‚pç§°ä¸ºè¿™ä¸ªæœ‰é™åŸŸçš„ç‰¹å¾ã€‚\nä¾‹å¦‚ï¼Œæœ‰é™åŸŸä¸­å…ƒç´ çš„ä¸ªæ•°å¯ä»¥æ˜¯11(p=11æ˜¯ä¸€ä¸ªç´ æ•°,n=1)ã€å¯ä»¥æ˜¯81(p=3æ˜¯ä¸€ä¸ªç´ æ•°ï¼Œn=4)ã€ä¹Ÿå¯ä»¥æ˜¯256(p=2æ˜¯ä¸€ä¸ªç´ æ•°ï¼Œn=8)\u0026hellip;..ä½†æœ‰é™åŸŸçš„ä¸­ä¸å¯èƒ½æ‹¥æœ‰12ä¸ªå…ƒç´ ï¼Œå› ä¸º12=2Â·2Â·3ï¼Œå› æ­¤12ä¹Ÿä¸æ˜¯ä¸€ä¸ªç´ æ•°å¹‚ã€‚å› æ­¤æ»¡è¶³pæ˜¯ä¸€ä¸ªç´ æ•°ä¸”æ»¡è¶³$m = p^n$è¿™ä¸ªå…¬å¼ï¼Œmæ‰æ˜¯ä¸€ä¸ªç´ æ•°å¹‚ã€‚\næœ‰é™åŸŸä¸­æœ€ç›´è§‚çš„ä¾‹å­å°±æ˜¯é˜¶ä¸ºç´ æ•°çš„åŸŸï¼Œå³n=1çš„åŸŸã€‚åŸŸGF(p)çš„å…ƒç´ å¯ä»¥ç”¨æ•´æ•°0ã€1ã€\u0026hellip;ã€p-1læ¥è¡¨ç¤ºã€‚åŸŸçš„ä¸¤ç§æ“ä½œå°±æ˜¯æ¨¡æ•´æ•°åŠ æ³•å’Œæ•´æ•°ä¹˜æ³•æ¨¡pã€‚åŠ ä¸Špæ˜¯ä¸€ä¸ªç´ æ•°ï¼Œæ•´æ•°ç¯Zè¡¨ç¤ºä¸ºGF(p)ï¼Œä¹Ÿæˆä¸ºæ‹¥æœ‰ç´ æ•°ä¸ªå…ƒç´ çš„ç´ æ•°åŸŸæˆ–è€…ä¼½ç½—ç“¦åŸŸã€‚GF(p)ä¸­æ‰€æœ‰çš„éé›¶å…ƒç´ éƒ½å­˜åœ¨é€†å…ƒï¼ŒGF(p)å†…æ‰€æœ‰çš„è¿ç®—éƒ½æ˜¯æ¨¡på®ç°çš„ã€‚\nç´ åŸŸå†…çš„ç®—æ•°è¿ç®—è§„åˆ™å¦‚ä¸‹ åŠ æ³•å’Œä¹˜æ³•éƒ½æ˜¯é€šè¿‡æ¨¡på®ç°çš„ï¼› ä»»ä½•ä¸€ä¸ªå…ƒç´ açš„åŠ æ³•é€†å…ƒéƒ½æ˜¯ç”±a+(açš„é€†å…ƒ)=0 mod på¾—åˆ°çš„ï¼› ä»»ä½•ä¸€ä¸ªéé›¶å…ƒç´ açš„ä¹˜æ³•é€†å…ƒå®šä¹‰ä¸ºaÂ·açš„é€†å…ƒ=1ã€‚ ä¸¾ä¸ªä¾‹å­ï¼Œåœ¨ç´ åŸŸGF(5)={0ã€1ã€2ã€3ã€4}ä¸­ï¼Œ2çš„åŠ æ³•é€†å…ƒä¸º3ï¼Œè¿™æ˜¯å› ä¸º2+(3)=5ï¼Œ5mod5=0,æ‰€ä»¥2+3=5mod5=0ã€‚2çš„ä¹˜æ³•é€†å…ƒä¸º3ï¼Œè¿™æ˜¯å› ä¸º2Â·3=6ï¼Œ6mod5=1ï¼Œæ‰€ä»¥2Â·3=6mod5=1ã€‚(åœ¨å¾ˆå¤šåœ°æ–¹açš„åŠ æ³•é€†å…ƒ1ç”¨$-a$è¡¨ç¤ºï¼Œaçš„ä¹˜æ³•é€†å…ƒ2ç”¨$1/a$è¡¨ç¤º)\næ³¨ï¼šGF(2)æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„ç´ åŸŸï¼Œä¹Ÿæ˜¯å­˜åœ¨çš„æœ€å°çš„æœ‰é™åŸŸï¼Œç”±äºGF(2)çš„åŠ æ³•ï¼Œå³æ¨¡2åŠ æ³•ä¸å¼‚æˆ–(XOR)é—¨ç­‰ä»·ï¼ŒGF(2)çš„ä¹˜æ³•ä¸é€»è¾‘ä¸(AND)é—¨ç­‰ä»·ï¼Œæ‰€ä»¥GF(2)å¯¹AESéå¸¸é‡è¦ã€‚\næ¨¡2åŠ æ³•ä¸å¼‚æˆ–(XOR)é—¨ç­‰ä»·:\n$$\n(1 + 0) \\mod 2 = 1\\\\\n(0 + 1) \\mod 2 = 1\\\\\n(0 + 0) \\mod 2 = 0\\\\\n(1 + 1) \\mod 2 = 0\\\\\n$$\nä¹˜æ³•ä¸é€»è¾‘ä¸(AND)é—¨ç­‰ä»·:\n$$\n(1 \\times 0) \\mod 2 = 0\\\\\n(0 \\times 1) \\mod 2 = 0\\\\\n(0 \\times 0) \\mod 2 = 0\\\\\n(1 \\times 1) \\mod 2 = 1\\\\\n$$\næ‰©å±•åŸŸ å¦‚æœæœ‰é™åŸŸçš„é˜¶ä¸æ˜¯ç´ æ•°ï¼Œåˆ™è¿™æ ·çš„æœ‰é™åŸŸå†…çš„åŠ æ³•å’Œä¹˜æ³•è¿ç®—å°±ä¸èƒ½ç”¨æ¨¡æ•´æ•°åŠ æ³•å’Œæ•´æ•°ä¹˜æ³•æ¨¡pè¡¨ç¤ºã€‚è€Œä¸”m\u0026gt;1çš„åŸŸè¢«ç§°ä¸ºæ‰©å±•åŸŸï¼Œä¸ºäº†å¤„ç†æ‰©å±•åŸŸï¼Œæˆ‘ä»¬å°±è¦ä½¿ç”¨ä¸åŒçš„ç¬¦å·è¡¨ç¤ºæ‰©å±•åŸŸå†…çš„å…ƒç´ ï¼Œä½¿ç”¨ä¸åŒçš„è§„åˆ™æ‰§è¡Œæ‰©å±•åŸŸå†…å…ƒç´ çš„ç®—æœ¯è¿ç®—ã€‚\nåœ¨æ‰©å±•åŸŸ$GF(2^m)$ä¸­ï¼Œå…ƒç´ å¹¶ä¸æ˜¯ç”¨æ•´æ•°è¡¨ç¤ºçš„ï¼Œè€Œæ˜¯ç”¨ç³»æ•°ä¸ºåŸŸ$GF(2)$ä¸­å…ƒç´ çš„å¤šé¡¹å¼è¡¨ç¤ºã€‚è¿™ä¸ªå¤šé¡¹å¼æœ€å¤§çš„åº¦(å¹‚)ä¸ºm-1â€‹ï¼Œæ‰€ä»¥æ¯ä¸ªå…ƒç´ å…±æœ‰mä¸ªç³»æ•°ï¼Œåœ¨AESç®—æ³•ä½¿ç”¨çš„åŸŸ$GF(2^8)$ä¸­ï¼Œæ¯ä¸ªå…ƒç´ $AâˆˆGF(2^8)$éƒ½å¯ä»¥è¡¨ç¤ºä¸ºï¼š\n$$\nA(x) = a_7x^7 + a_6x^6 + a_5x^5 + a_4x^4 + a_3x^3 + a_2x^2+a_1x + a_0,x_i \\in GF(2) = 0,1\n$$\næ³¨æ„ï¼šåœ¨åŸŸGF(2^8)ä¸­è¿™æ ·çš„å¤šé¡¹å¼å…±æœ‰256ä¸ªï¼Œè¿™256ä¸ªå¤šé¡¹å¼ç»„æˆçš„é›†åˆå°±æ˜¯æ‰©å±•åŸŸGF(2^8)ã€‚æ¯ä¸ªå¤šé¡¹å¼éƒ½å¯ä»¥æŒ‰ä¸€ä¸ª8ä½é¡¹é“¾çš„æ•°å€¼å½¢å¼å­˜å‚¨ï¼š\n$$\nA = (a_7,a_6,a_5,a_4,a_3,a_2,a_1,a_0)\n$$\nåƒ$x^7$ã€$x^6$ç­‰å› å­éƒ½æ— éœ€å­˜å‚¨ï¼Œå› ä¸ºä»ä½çš„ä½ç½®å°±å¯ä»¥æ¸…æ¥šåœ°åˆ¤æ–­å‡ºæ¯ä¸ªç³»æ•°å¯¹åº”çš„å¹‚ã€‚\næ‰©å±•åŸŸ$GF(2^m)$å†…çš„åŠ å‡æ³• åœ¨AESç®—æ³•ä¸­çš„å¯†é’¥åŠ æ³•å±‚ä¸­å°±ä½¿ç”¨äº†è¿™éƒ¨åˆ†çš„çŸ¥è¯†ï¼Œä½†æ˜¯ä¸æ˜¯å¾ˆæ˜æ˜¾ï¼Œå› ä¸ºæˆ‘ä»¬é€šå¸¸æŠŠæ‰©å±•åŸŸä¸­çš„åŠ æ³•å½“ä½œå¼‚æˆ–è¿ç®—è¿›è¡Œå¤„ç†äº†ï¼Œå› ä¸ºåœ¨æ‰©å±•åŸŸä¸­çš„åŠ å‡æ³•å¤„ç†éƒ½æ˜¯åœ¨åº•å±‚åŸŸGF(2)å†…å®Œæˆçš„ï¼Œä¸æŒ‰ä½å¼‚æˆ–è¿ç®—ç­‰ä»·ã€‚å‡è®¾$A(x)$ã€$B(x)âˆˆGF(2^m)$ï¼Œè®¡ç®—ä¸¤ä¸ªå…ƒç´ ä¹‹å’Œçš„æ–¹æ³•å°±æ˜¯ï¼š\n$$\nC(x) = A(x) + B(x) = \\sum_{i=0}^{m-1}C_ix^i , c_i = (a_i + b_i) \\mod 2\n$$\nè€Œä¸¤ä¸ªå…ƒç´ ä¹‹å·®çš„è®¡ç®—å…¬å¼å°±æ˜¯ï¼š\n$$\nC(x) = A(x) - B(x) = \\sum_{i=0}^{m-1}C_ix^i , c_i = (a_i - b_i) \\mod 2 = (a_i + b_i) \\mod 2\n$$\næ³¨ï¼šåœ¨å‡æ³•è¿ç®—ä¸­å‡å·ä¹‹æ‰€ä»¥å˜æˆåŠ å·ï¼Œè¿™å°±å’ŒäºŒè¿›åˆ¶å‡æ³•çš„æ€§è´¨æœ‰å…³äº†ï¼Œå¤§å®¶å¯ä»¥è¯•ç€éªŒç®—ä¸‹ã€‚ä»ä¸Šè¿°ä¸¤ä¸ªå…¬å¼ä¸­æˆ‘ä»¬å‘ç°åœ¨æ‰©å±•åŸŸä¸­åŠ æ³•å’Œå‡æ³•ç­‰ä»·ï¼Œå¹¶ä¸”ä¸XORç­‰ä»·(å¼‚æˆ–è¿ç®—ä¹Ÿè¢«ç§°ä½œäºŒè¿›åˆ¶åŠ æ³•)ã€‚\næ‰©å±•åŸŸGF(2^m)å†…çš„ä¹˜æ³• æ‰©å±•åŸŸçš„ä¹˜æ³•ä¸»è¦è¿ç”¨åœ¨AESç®—æ³•çš„åˆ—æ··æ·†å±‚(Mix Column)ä¸­ï¼Œä¹Ÿæ˜¯åˆ—æ··æ·†å±‚ä¸­æœ€é‡è¦çš„æ“ä½œã€‚æˆ‘ä»¬é¡¹è¦å°†æ‰©å±•åŸŸä¸­çš„ä¸¤ä¸ªå…ƒç´ ç”¨å¤šé¡¹å¼å½¢å¼å±•å¼€ï¼Œç„¶åä½¿ç”¨æ ‡å‡†çš„å¤šé¡¹å¼ä¹˜æ³•è§„åˆ™å°†ä¸¤ä¸ªå¤šé¡¹å¼ç›¸ä¹˜ï¼š\nAESæ­¥éª¤è¯¦è§£ AESç®—æ³•ä¸»è¦æœ‰å››ç§æ“ä½œå¤„ç†ï¼Œåˆ†åˆ«æ˜¯å¯†é’¥åŠ æ³•å±‚(ä¹Ÿå«è½®å¯†é’¥åŠ ï¼Œè‹±æ–‡Add Round Key)ã€å­—èŠ‚ä»£æ¢å±‚(SubByte)ã€è¡Œä½ç§»å±‚(Shift Rows)ã€åˆ—æ··æ·†å±‚(Mix Column)ã€‚è€Œæ˜æ–‡xå’Œå¯†é’¥kéƒ½æ˜¯ç”±16ä¸ªå­—èŠ‚ç»„æˆçš„æ•°æ®(å½“ç„¶å¯†é’¥è¿˜æ”¯æŒ192ä½å’Œ256ä½çš„é•¿åº¦)ï¼Œå®ƒæ˜¯æŒ‰ç…§å­—èŠ‚çš„å…ˆåé¡ºåºä»ä¸Šåˆ°ä¸‹ã€ä»å·¦åˆ°å³è¿›è¡Œæ’åˆ—çš„ã€‚è€ŒåŠ å¯†å‡ºçš„å¯†æ–‡è¯»å–é¡ºåºä¹Ÿæ˜¯æŒ‰ç…§è¿™ä¸ªé¡ºåºè¯»å–çš„ï¼Œç›¸å½“äºå°†æ•°ç»„è¿˜åŸæˆå­—ç¬¦ä¸²çš„æ¨¡æ ·äº†ï¼Œç„¶åå†è§£å¯†çš„æ—¶å€™åˆæ˜¯æŒ‰ç…§4Â·4æ•°ç»„å¤„ç†çš„ã€‚AESç®—æ³•åœ¨å¤„ç†çš„è½®æ•°ä¸Šåªæœ‰æœ€åä¸€è½®æ“ä½œä¸å‰é¢çš„è½®å¤„ç†ä¸Šæœ‰äº›è®¸ä¸åŒ(æœ€åä¸€è½®åªæ˜¯å°‘äº†åˆ—æ··æ·†å¤„ç†)ï¼Œåœ¨è½®å¤„ç†å¼€å§‹å‰è¿˜å•ç‹¬è¿›è¡Œäº†ä¸€æ¬¡è½®å¯†é’¥åŠ çš„å¤„ç†ã€‚åœ¨å¤„ç†è½®æ•°ä¸Šï¼Œåªè€ƒè™‘128ä½å¯†é’¥çš„10è½®å¤„ç†ã€‚\nå…¶ä¸­å­—èŠ‚æ’åˆ—æ–¹å¼éœ€è¦æŒ‰ç…§å¦‚ä¸‹è½¬æ¢:\nAESç®—æ³•æµç¨‹å›¾å¦‚ä¸‹:\nå®ç°æ­¥éª¤åŠä»£ç  æŒ‰ç…§AESæµç¨‹å›¾,å¯¹æ¯ä¸€å±‚çš„ä»£ç è¿›è¡Œå®ç°.\nå¯†é’¥åŠ æ³•å±‚ åœ¨å¯†é’¥åŠ æ³•å±‚ä¸­æœ‰ä¸¤ä¸ªè¾“å…¥çš„å‚æ•°ï¼Œåˆ†åˆ«æ˜¯æ˜æ–‡å’Œå­å¯†é’¥k[0]ï¼Œè€Œä¸”è¿™ä¸¤ä¸ªè¾“å…¥éƒ½æ˜¯128ä½çš„ã€‚åœ¨æ‰©å±•åŸŸä¸­åŠ å‡æ³•æ“ä½œå’Œå¼‚æˆ–è¿ç®—ç­‰ä»·ï¼Œæ‰€ä»¥è¿™é‡Œçš„å¤„ç†ä¹Ÿå°±å¼‚å¸¸çš„ç®€å•äº†ï¼Œåªéœ€è¦å°†ä¸¤ä¸ªè¾“å…¥çš„æ•°æ®è¿›è¡ŒæŒ‰å­—èŠ‚å¼‚æˆ–æ“ä½œå°±ä¼šå¾—åˆ°è¿ç®—çš„ç»“æœã€‚\nå¦‚ä¸‹å›¾ï¼š\nä»£ç å¦‚ä¸‹:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 //è½®å¯†é’¥åŠ å˜æ¢ - å°†æ¯ä¸€åˆ—ä¸æ‰©å±•å¯†é’¥è¿›è¡Œå¼‚æˆ– void AddRoundKey(byte mtx[4 * 4], word k[4]) { for (int i = 0; i \u0026lt; 4; ++i) { word k1 = k[i] \u0026gt;\u0026gt; 24; word k2 = (k[i] \u0026lt;\u0026lt; 8) \u0026gt;\u0026gt; 24; word k3 = (k[i] \u0026lt;\u0026lt; 16) \u0026gt;\u0026gt; 24; word k4 = (k[i] \u0026lt;\u0026lt; 24) \u0026gt;\u0026gt; 24; mtx[i] = mtx[i] ^ byte(k1.to_ulong()); mtx[i + 4] = mtx[i + 4] ^ byte(k2.to_ulong()); mtx[i + 8] = mtx[i + 8] ^ byte(k3.to_ulong()); mtx[i + 12] = mtx[i + 12] ^ byte(k4.to_ulong()); } } AESå¯†é’¥ç”Ÿæˆ é¦–å…ˆå®šä¹‰ä½ç½®å˜æ¢å‡½æ•°RotWord(),ä½œç”¨æ˜¯æ¥å—ä¸€ä¸ªå­— $[a0, a1, a2, a3] $ä½œä¸ºè¾“å…¥ï¼Œå¾ªç¯å·¦ç§»ä¸€ä¸ªå­—èŠ‚åè¾“å‡º$ [a1, a2, a3, a0]$,ä»£ç å¦‚ä¸‹:\n1 2 3 4 5 6 word RotWord(const word \u0026amp;w) { word result(0x0); result = (w \u0026lt;\u0026lt; 8) | (w \u0026gt;\u0026gt; 24); return result; } å®šä¹‰Sç›’å˜æ¢å‡½æ•°SubWord()ï¼Œæ¥å—ä¸€ä¸ªå­— $[a0, a1, a2, a3]$ ä½œä¸ºè¾“å…¥ï¼Œç„¶åæ¯ä¸€ä¸ªbyteï¼Œä¾‹å¦‚a0ï¼Œå‰å››ä¸ªå­—èŠ‚ä¸ºè¡Œï¼Œåå››ä¸ªå­—èŠ‚ä¸ºåˆ—ï¼Œä»S_Boxä¸­æŸ¥æ‰¾å¹¶ä¸”è¿”å›å››ä¸ªå…ƒç´ ã€‚ï¼Œä»£ç å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 word SubWord(const word\u0026amp; sw) { word temp; for(int i=0; i\u0026lt;32; i+=8) { int row = sw[i+7]*8 + sw[i+6]*4 + sw[i+5]*2 + sw[i+4]; int col = sw[i+3]*8 + sw[i+2]*4 + sw[i+1]*2 + sw[i]; byte val = S_Box[row][col]; for(int j=0; j\u0026lt;8; ++j) temp[i+j] = val[j]; } return temp; } è½®å¸¸æ•°Rcon[]ä½œä¸ºä¸€ä¸ªå¸¸é‡æ•°ç»„ï¼Œæ¯ä¸€è½®ç”Ÿæˆå¯†é’¥çš„æ—¶å€™éœ€è¦ä½œä¸ºå‚æ•°å¼‚æˆ–\n1 2 3 // è½®å¸¸æ•°ï¼Œå¯†é’¥æ‰©å±•ä¸­ç”¨åˆ°ã€‚ï¼ˆAES-128åªéœ€è¦10è½®ï¼‰ word Rcon[10] = {0x01000000, 0x02000000, 0x04000000, 0x08000000, 0x10000000, 0x20000000, 0x40000000, 0x80000000, 0x1b000000, 0x36000000}; å¯†é’¥æ‹“å±•å‡½æ•°KeyExpansion(),æ¥å—ä¸€ä¸ªå‚æ•°ä¸ºå¤–éƒ¨å¯†é’¥ï¼Œå¦å¤–ä¸€ä¸ªä¸ºéœ€è¦æ‹“å±•çš„è½®å¯†é’¥æ•°ç»„\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 //å¯†é’¥æ‰©å±•å‡½æ•° - å¯¹128ä½å¯†é’¥è¿›è¡Œæ‰©å±•å¾—åˆ° w[4*(Nr+1),Nrä¸ºè½®æ•° void KeyExpansion(byte key[4 * N_key], word w[4 * (N_round + 1)]) { word temp; int i = 0; while (i \u0026lt; N_key)\t//å‰å››ä¸ªwordå°±æ˜¯è¾“å…¥çš„key { w[i] = ToWord(key[4 * i], key[4 * i + 1], key[4 * i + 2], key[4 * i + 3]); ++i; } i = N_key; while (i \u0026lt; 4 * (N_round + 1)) { temp = w[i - 1]; //è®°å½•å‰ä¸€ä¸ªword if (i % N_key == 0) { //tempå…ˆä½ç½®è¡¨æ¢RotWordï¼Œå†Sç›’å˜æ¢ï¼Œç„¶åä¸è½®å¸¸æ•°å¼‚æˆ–ï¼Œæœ€åw[i-N_key] å¼‚æˆ– w[i] = w[i - N_key] ^ SubWord(RotWord(temp)) ^ Rcon[i / N_key - 1]; } else { w[i] = w[i - N_key] ^ temp; } i++; } } å­—èŠ‚æ›¿æ¢å±‚ Sç›’å­—èŠ‚æ›¿æ¢ï¼Œä¸»è¦åŠŸèƒ½å°±æ˜¯è®©è¾“å…¥çš„æ•°æ®é€šè¿‡S_boxè¡¨å®Œæˆä»ä¸€ä¸ªå­—èŠ‚åˆ°å¦ä¸€ä¸ªå­—èŠ‚çš„æ˜ å°„ï¼Œè¯»å–S_boxæ•°æ®çš„æ–¹æ³•å°±æ˜¯è¦å°†è¾“å…¥æ•°æ®çš„æ¯ä¸ªå­—èŠ‚çš„é«˜å››ä½ä½œä¸ºç¬¬ä¸€ä¸ªä¸‹æ ‡ï¼Œç¬¬å››ä½ä½œä¸ºç¬¬äºŒä¸ªä¸‹æ ‡ã€‚ç„¶åè¿”å›æ•°æ®ï¼Œå­—èŠ‚æ›¿æ¢ä¸»è¦æ˜¯ä¸ºäº†æ‰°ä¹±æ•°æ®ã€‚\nSç›’ï¼š\né€†Sç›’ï¼š\nå›¾è§£å¦‚ä¸‹ï¼š\næ­£å‘Sç›’å˜æ¢ä»£ç å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 //Sç›’å˜æ¢ - å‰4ä½ä¸ºè¡Œå·ï¼Œå4ä½ä¸ºåˆ—å· void SubBytes(byte mtx[4 * 4]) { for (int i = 0; i \u0026lt; 16; ++i) { int row = mtx[i][7] * 8 + mtx[i][6] * 4 + mtx[i][5] * 2 + mtx[i][4]; int col = mtx[i][3] * 8 + mtx[i][2] * 4 + mtx[i][1] * 2 + mtx[i][0]; mtx[i] = S_Box[row][col]; } } åå‘Sç›’å˜æ¢ä»£ç å¦‚ä¸‹:\n1 2 3 4 5 6 7 8 9 10 // é€†Sç›’å˜æ¢ void InvSubBytes(byte mtx[4*4]) { for(int i=0; i\u0026lt;16; ++i) { int row = mtx[i][7]*8 + mtx[i][6]*4 + mtx[i][5]*2 + mtx[i][4]; int col = mtx[i][3]*8 + mtx[i][2]*4 + mtx[i][1]*2 + mtx[i][0]; mtx[i] = Inv_S_Box[row][col]; } } è¡Œç§»ä½å±‚ å°†è¾“å…¥æ•°æ®ä½œä¸ºä¸€ä¸ª$4Â·4$çš„å­—èŠ‚çŸ©é˜µè¿›è¡Œå¤„ç†ï¼Œç„¶åå°†è¿™ä¸ªçŸ©é˜µçš„å­—èŠ‚è¿›è¡Œä½ç½®ä¸Šçš„ç½®æ¢ã€‚åœ¨åŠ å¯†æ—¶è¡Œä½ç§»å¤„ç†ä¸è§£å¯†æ—¶çš„å¤„ç†ç›¸åï¼Œæˆ‘ä»¬è¿™é‡Œå°†è§£å¯†æ—¶çš„å¤„ç†ç§°ä½œé€†è¡Œä½ç§»ã€‚å®ƒä¹‹æ‰€ä»¥ç§°ä½œè¡Œä½ç§»ï¼Œæ˜¯å› ä¸ºå®ƒåªåœ¨$4Â·4$çŸ©é˜µçš„è¡Œé—´è¿›è¡Œæ“ä½œï¼Œæ¯è¡Œ4å­—èŠ‚çš„æ•°æ®ã€‚åœ¨åŠ å¯†æ—¶ï¼Œä¿æŒçŸ©é˜µçš„ç¬¬ä¸€è¡Œä¸å˜ï¼Œç¬¬äºŒè¡Œå‘å·¦ç§»åŠ¨8Bit(ä¸€ä¸ªå­—èŠ‚)ã€ç¬¬ä¸‰è¡Œå‘å·¦ç§»åŠ¨2ä¸ªå­—èŠ‚ã€ç¬¬å››è¡Œå‘å·¦ç§»åŠ¨3ä¸ªå­—èŠ‚ã€‚è€Œåœ¨è§£å¯†æ—¶æ°æ°ç›¸åï¼Œä¾ç„¶ä¿æŒç¬¬ä¸€è¡Œä¸å˜ï¼Œå°†ç¬¬äºŒè¡Œå‘å³ç§»åŠ¨ä¸€ä¸ªå­—èŠ‚ã€ç¬¬ä¸‰è¡Œå³ç§»2ä¸ªå­—èŠ‚ã€ç¬¬å››è¡Œå³ç§»3ä¸ªå­—èŠ‚ã€‚æœ€ç»ˆç»“æŸã€‚\næ­£å‘è¡Œç§»ä½å›¾è§£ï¼š\nä»£ç å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 //æ­£å‘è¡Œå˜æ¢ - æŒ‰å­—èŠ‚å¾ªç¯ç§»ä½ void ShiftRows(byte mtx[4 * 4]) { // ç¬¬äºŒè¡Œå¾ªç¯å·¦ç§»ä¸€ä½ byte temp = mtx[4]; for (int i = 0; i \u0026lt; 3; ++i) mtx[i + 4] = mtx[i + 5]; mtx[7] = temp; // ç¬¬ä¸‰è¡Œå¾ªç¯å·¦ç§»ä¸¤ä½ for (int i = 0; i \u0026lt; 2; ++i) { temp = mtx[i + 8]; mtx[i + 8] = mtx[i + 10]; mtx[i + 10] = temp; } // ç¬¬å››è¡Œå¾ªç¯å·¦ç§»ä¸‰ä½ temp = mtx[15]; for (int i = 3; i \u0026gt; 0; --i) mtx[i + 12] = mtx[i + 11]; mtx[12] = temp; } åå‘è¡Œç§»ä½å›¾è§£ï¼š\nä»£ç å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 // é€†è¡Œå˜æ¢ - ä»¥å­—èŠ‚ä¸ºå•ä½å¾ªç¯å³ç§» void InvShiftRows(byte mtx[4*4]) { // ç¬¬äºŒè¡Œå¾ªç¯å³ç§»ä¸€ä½ byte temp = mtx[7]; for(int i=3; i\u0026gt;0; --i) mtx[i+4] = mtx[i+3]; mtx[4] = temp; // ç¬¬ä¸‰è¡Œå¾ªç¯å³ç§»ä¸¤ä½ for(int i=0; i\u0026lt;2; ++i) { temp = mtx[i+8]; mtx[i+8] = mtx[i+10]; mtx[i+10] = temp; } // ç¬¬å››è¡Œå¾ªç¯å³ç§»ä¸‰ä½ temp = mtx[12]; for(int i=0; i\u0026lt;3; ++i) mtx[i+12] = mtx[i+13]; mtx[15] = temp; } åˆ—æ··æ·†å±‚ åˆ—æ··æ·†å­å±‚æ˜¯AESç®—æ³•ä¸­æœ€ä¸ºå¤æ‚çš„éƒ¨åˆ†ï¼Œå±äºæ‰©æ•£å±‚ï¼Œåˆ—æ··æ·†æ“ä½œæ˜¯AESç®—æ³•ä¸­ä¸»è¦çš„æ‰©æ•£å…ƒç´ ï¼Œå®ƒæ··æ·†äº†è¾“å…¥çŸ©é˜µçš„æ¯ä¸€åˆ—ï¼Œä½¿è¾“å…¥çš„æ¯ä¸ªå­—èŠ‚éƒ½ä¼šå½±å“åˆ°4ä¸ªè¾“å‡ºå­—èŠ‚ã€‚è¡Œä½ç§»å­å±‚å’Œåˆ—æ··æ·†å­å±‚çš„ç»„åˆä½¿å¾—ç»è¿‡ä¸‰è½®å¤„ç†ä»¥åï¼ŒçŸ©é˜µçš„æ¯ä¸ªå­—èŠ‚éƒ½ä¾èµ–äº16ä¸ªæ˜æ–‡å­—èŠ‚æˆå¯èƒ½ã€‚\nåœ¨åŠ å¯†çš„æ­£å‘åˆ—æ··æ·†ä¸­ï¼Œæˆ‘ä»¬è¦å°†è¾“å…¥çš„$4Â·4$çŸ©é˜µå·¦ä¹˜ä¸€ä¸ªç»™å®šçš„$4Â·4$çŸ©é˜µã€‚è€Œå®ƒä»¬ä¹‹é—´çš„åŠ æ³•ã€ä¹˜æ³•éƒ½åœ¨æ‰©å±•åŸŸ$GF(2^8)$ä¸­è¿›è¡Œï¼Œ,åœ¨çŸ©é˜µç›¸ä¹˜è®¡ç®—ä¸­ï¼Œå‡ºç°äº†åŠ æ³•å’Œä¹˜æ³•ï¼Œè€Œå‰é¢æåˆ°äº†åœ¨æ‹“å±•åŸŸä¸­åŠ æ³•ç­‰åŒäºå¼‚æˆ–è¿ç®—ï¼Œè€Œå¯¹äºä¹˜æ³•ï¼Œéœ€è¦ç‰¹æ®Šçš„æ–¹å¼è¿›è¡Œå¤„ç†ï¼Œäºæ˜¯å°†+å·æ¢æˆ^å·ï¼Œç„¶åå°†ä¼½ç½—ç“¦åŸŸçš„ä¹˜æ³•å®šä¹‰æˆä¸€ä¸ªæœ‰ä¸¤ä¸ªå‚æ•°çš„å‡½æ•°ï¼Œå¹¶è®©ä»–è¿”å›æœ€åè®¡ç®—ç»“æœï¼Œæœ€ååˆ—æ··æ·†ä»£ç å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 //æ­£å‘åˆ—å˜æ¢ void MixColumns(byte mtx[4*4]) { byte arr[4]; for(int i=0; i\u0026lt;4; ++i) { for(int j=0; j\u0026lt;4; ++j) arr[j] = mtx[i+j*4]; mtx[i] = GFMul(0x02, arr[0]) ^ GFMul(0x03, arr[1]) ^ arr[2] ^ arr[3]; mtx[i+4] = arr[0] ^ GFMul(0x02, arr[1]) ^ GFMul(0x03, arr[2]) ^ arr[3]; mtx[i+8] = arr[0] ^ arr[1] ^ GFMul(0x02, arr[2]) ^ GFMul(0x03, arr[3]); mtx[i+12] = GFMul(0x03, arr[0]) ^ arr[1] ^ arr[2] ^ GFMul(0x02, arr[3]); } } åœ¨è§£å¯†çš„é€†å‘åˆ—æ··æ·†ä¸­ä¸æ­£å‘åˆ—æ··æ·†çš„ä¸åŒä¹‹å¤„åœ¨äºä½¿ç”¨çš„å·¦ä¹˜çŸ©é˜µä¸åŒï¼Œå®ƒä¸æ­£å‘åˆ—æ··æ·†çš„å·¦ä¹˜çŸ©é˜µäº’ä¸ºé€†çŸ©é˜µï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ•°æ®çŸ©é˜µåŒæ—¶å·¦ä¹˜è¿™ä¸¤ä¸ªçŸ©é˜µåï¼Œæ•°æ®çŸ©é˜µä¸ä¼šå‘ç”Ÿä»»ä½•å˜åŒ–ã€‚ä¸‹é¢æ˜¯å›¾è§£ï¼š\næ­£å‘æ··æ·†å¤„ç†ï¼š\né€†å‘æ··æ·†å¤„ç†ï¼š\nåå‘åˆ—å˜æ¢ä»£ç å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 //åå‘åˆ—æ··æ·† void InvMixColumns(byte mtx[4*4]) { byte arr[4]; for(int i=0; i\u0026lt;4; ++i) { for(int j=0; j\u0026lt;4; ++j) arr[j] = mtx[i+j*4]; mtx[i] = GFMul(0x0e, arr[0]) ^ GFMul(0x0b, arr[1]) ^ GFMul(0x0d, arr[2]) ^ GFMul(0x09, arr[3]); mtx[i+4] = GFMul(0x09, arr[0]) ^ GFMul(0x0e, arr[1]) ^ GFMul(0x0b, arr[2]) ^ GFMul(0x0d, arr[3]); mtx[i+8] = GFMul(0x0d, arr[0]) ^ GFMul(0x09, arr[1]) ^ GFMul(0x0e, arr[2]) ^ GFMul(0x0b, arr[3]); mtx[i+12] = GFMul(0x0b, arr[0]) ^ GFMul(0x0d, arr[1]) ^ GFMul(0x09, arr[2]) ^ GFMul(0x0e, arr[3]); } } å¯†é’¥åŠ æ³•å±‚ è¿™ä¸€å±‚ä¸»è¦æ˜¯æ˜æ–‡çŸ©é˜µç›’å­å¯†é’¥çŸ©é˜µè¿›è¡Œå¼‚æˆ–æ“ä½œ,åœ¨å¯†é’¥åŠ æ³•å±‚ä¸­æœ‰ä¸¤ä¸ªè¾“å…¥çš„å‚æ•°ï¼Œåˆ†åˆ«æ˜¯æ˜æ–‡å’Œå­å¯†é’¥ï¼Œè€Œä¸”è¿™ä¸¤ä¸ªè¾“å…¥éƒ½æ˜¯128ä½çš„ã€‚åªéœ€è¦å°†ä¸¤ä¸ªè¾“å…¥çš„æ•°æ®è¿›è¡ŒæŒ‰å­—èŠ‚å¼‚æˆ–æ“ä½œå°±ä¼šå¾—åˆ°è¿ç®—çš„ç»“æœã€‚\nå›¾è§£ï¼š\nä»£ç å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 //è½®å¯†é’¥åŠ å˜æ¢ - å°†æ¯ä¸€åˆ—ä¸æ‰©å±•å¯†é’¥è¿›è¡Œå¼‚æˆ– void AddRoundKey(byte mtx[4*4], word k[4]) { for(int i=0; i\u0026lt;4; ++i) { word k1 = k[i] \u0026gt;\u0026gt; 24; word k2 = (k[i] \u0026lt;\u0026lt; 8) \u0026gt;\u0026gt; 24; word k3 = (k[i] \u0026lt;\u0026lt; 16) \u0026gt;\u0026gt; 24; word k4 = (k[i] \u0026lt;\u0026lt; 24) \u0026gt;\u0026gt; 24; mtx[i] = mtx[i] ^ byte(k1.to_ulong()); mtx[i+4] = mtx[i+4] ^ byte(k2.to_ulong()); mtx[i+8] = mtx[i+8] ^ byte(k3.to_ulong()); mtx[i+12] = mtx[i+12] ^ byte(k4.to_ulong()); } } å®ç°åŠ å¯†å‡½æ•° åŠ å¯†å‡½æ•°æŒ‰ç…§æµç¨‹å›¾,é¦–å…ˆå¼€å§‹æ˜¯å…ˆè¿›è¡Œä¸€æ¬¡è½®å¯†é’¥åŠ ,ç„¶åå¼€å§‹9è½®çš„å­—èŠ‚æ›¿æ¢+è¡Œç§»ä½+åˆ—æ··æ·†+è½®å¯†é’¥åŠ çš„æ“ä½œ,å¾ªç¯ä¹‹åå†åšä¸€æ¬¡å­—èŠ‚æ›¿æ¢+è¡Œç§»ä½+è½®å¯†é’¥åŠ å°±å®ŒæˆåŠ å¯†æ“ä½œäº†.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 void encrypt(byte in[4*4], word w[4*(N_round+1)]) { word key[4]; for(int i=0; i\u0026lt;4; ++i) key[i] = w[i]; AddRoundKey(in, key); for(int round=1; round\u0026lt;N_round; ++round) { SubBytes(in); ShiftRows(in); MixColumns(in); for(int i=0; i\u0026lt;4; ++i) key[i] = w[4*round+i]; AddRoundKey(in, key); } SubBytes(in); ShiftRows(in); for(int i=0; i\u0026lt;4; ++i) key[i] = w[4*N_round+i]; AddRoundKey(in, key); } å®ç°è§£å¯†å‡½æ•° è§£å¯†å‡½æ•°ä¸åŠ å¯†å·®ä¸å¤š,åªä¸è¿‡å°†è¡Œç§»ä½å˜æˆåå‘è¡Œç§»ä½,åˆ—æ··æ·†å˜æˆåå‘åˆ—æ··æ·†,å­—èŠ‚æ›¿æ¢å˜æˆé€†å­—èŠ‚æ›¿æ¢å³å¯.\nä»£ç å¦‚ä¸‹:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 void decrypt(byte in[4*4], word w[4*(N_round+1)]) { word key[4]; for(int i=0; i\u0026lt;4; ++i) key[i] = w[4*N_round+i]; AddRoundKey(in, key); for(int round=N_round-1; round\u0026gt;0; --round) { InvShiftRows(in); InvSubBytes(in); for(int i=0; i\u0026lt;4; ++i) key[i] = w[4*round+i]; AddRoundKey(in, key); InvMixColumns(in); } InvShiftRows(in); InvSubBytes(in); for(int i=0; i\u0026lt;4; ++i) key[i] = w[i]; AddRoundKey(in, key); } æµ‹è¯•åŠ å¯†è§£å¯†å‡½æ•° å¯ä»¥å‘ç°ä¸Šé¢é¢çš„æµ‹è¯•ä¸­æ˜æ–‡ä¸è§£å¯†ä¹‹åçš„æ˜æ–‡æ˜¯å®Œå…¨æ­£ç¡®çš„,è¯´æ˜åŠ å¯†å‡½æ•°ä¸è§£å¯†å‡½æ•°æ­£ç¡®!\næµ‹è¯•ä»£ç å¦‚ä¸‹:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 void Aes_test() { byte key[16] = {0x2b, 0x7e, 0x15, 0x16, 0x28, 0xae, 0xd2, 0xa6, 0xab, 0xf7, 0x15, 0x88, 0x09, 0xcf, 0x4f, 0x3c}; byte plain[16] = {0x32, 0x88, 0x31, 0xe0, 0x43, 0x5a, 0x31, 0x37, 0xf6, 0x30, 0x98, 0x07, 0xa8, 0x8d, 0xa2, 0x34}; // è¾“å‡ºå¯†é’¥ cout \u0026lt;\u0026lt; \u0026#34;Key is : \u0026#34;; for (int i = 0; i \u0026lt; 16; ++i) cout \u0026lt;\u0026lt; hex \u0026lt;\u0026lt; key[i].to_ulong() \u0026lt;\u0026lt; \u0026#34; \u0026#34;; cout \u0026lt;\u0026lt; endl; word w[4 * (N_round + 1)]; KeyExpansion(key, w); // è¾“å‡ºå¾…åŠ å¯†çš„æ˜æ–‡ cout \u0026lt;\u0026lt; endl \u0026lt;\u0026lt; \u0026#34;the plaintext to encrypy:\u0026#34; \u0026lt;\u0026lt; endl; for (int i = 0; i \u0026lt; 16; ++i) { cout \u0026lt;\u0026lt; hex \u0026lt;\u0026lt; plain[i].to_ulong() \u0026lt;\u0026lt; \u0026#34; \u0026#34;; if ((i + 1) % 4 == 0) cout \u0026lt;\u0026lt; endl; } cout \u0026lt;\u0026lt; endl; // åŠ å¯†ï¼Œè¾“å‡ºå¯†æ–‡ encrypt(plain, w); cout \u0026lt;\u0026lt; \u0026#34;cipher : \u0026#34; \u0026lt;\u0026lt; endl; for (int i = 0; i \u0026lt; 16; ++i) { cout \u0026lt;\u0026lt; hex \u0026lt;\u0026lt; plain[i].to_ulong() \u0026lt;\u0026lt; \u0026#34; \u0026#34;; if ((i + 1) % 4 == 0) cout \u0026lt;\u0026lt; endl; } cout \u0026lt;\u0026lt; endl; // è§£å¯†ï¼Œè¾“å‡ºæ˜æ–‡ decrypt(plain, w); cout \u0026lt;\u0026lt; \u0026#34;plain arter decrypt:\u0026#34; \u0026lt;\u0026lt; endl; for (int i = 0; i \u0026lt; 16; ++i) { cout \u0026lt;\u0026lt; hex \u0026lt;\u0026lt; plain[i].to_ulong() \u0026lt;\u0026lt; \u0026#34; \u0026#34;; if ((i + 1) % 4 == 0) cout \u0026lt;\u0026lt; endl; } cout \u0026lt;\u0026lt; endl; } å®ç°åŠ è§£å¯†æ–‡ä»¶ åŠ å¯†æ–‡ä»¶å‡½æ•°,è¿”å›åŠ å¯†åçš„æ–‡ä»¶å:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 string encryptFile(string oname, string suffix, word w[4 * (N_round + 1)]) { string outputfilename = oname + \u0026#34;_cipher.bin\u0026#34;; bitset\u0026lt;128\u0026gt; data; byte plain[16]; cout \u0026lt;\u0026lt; \u0026#34;begining encrypy...........\u0026#34; \u0026lt;\u0026lt; endl; clock_t start = clock(); // å°†æ–‡ä»¶åŠ å¯†åˆ° oname + cipher.bin ä¸­ ifstream in; ofstream out; in.open(oname + suffix, ios::binary); //è¾“å…¥æ–‡ä»¶ out.open(outputfilename, ios::binary); //è¾“å‡ºåŠ å¯†æ–‡ä»¶ while (in.read((char *)\u0026amp;data, sizeof(data))) { divideToByte(plain, data); encrypt(plain, w); data = mergeByte(plain); out.write((char *)\u0026amp;data, sizeof(data)); data.reset(); // ç½®0 } in.close(); out.close(); clock_t end = clock(); cout \u0026lt;\u0026lt; \u0026#34;encrypy finish!\u0026#34; \u0026lt;\u0026lt; endl; cout \u0026lt;\u0026lt; \u0026#34;encrypy cost time : \u0026#34; \u0026lt;\u0026lt; (end - start) \u0026lt;\u0026lt; \u0026#34; ms\u0026#34; \u0026lt;\u0026lt; endl; return outputfilename; //è¿”å›åŠ å¯†ä¹‹åçš„æ–‡ä»¶ } è§£å¯†æ–‡ä»¶å‡½æ•°,è¿”å›è§£å¯†åçš„æ–‡ä»¶å:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 string decryptFile(string filename, string oname, string suffix, word w[4 * (N_round + 1)]) { ifstream in; ofstream out; in.open(filename, ios::binary); string outputfilename = oname + \u0026#34;_decrypt\u0026#34; + suffix; out.open(outputfilename, ios::binary); bitset\u0026lt;128\u0026gt; data; byte plain[16]; cout \u0026lt;\u0026lt; \u0026#34;begining decrypt............\u0026#34; \u0026lt;\u0026lt; endl; clock_t start = clock(); while (in.read((char *)\u0026amp;data, sizeof(data))) { divideToByte(plain, data); decrypt(plain, w); data = mergeByte(plain); out.write((char *)\u0026amp;data, sizeof(data)); data.reset(); // ç½®0 } in.close(); out.close(); clock_t end = clock(); cout \u0026lt;\u0026lt; \u0026#34;decrypt finish!\u0026#34; \u0026lt;\u0026lt; endl; cout \u0026lt;\u0026lt; \u0026#34;decrypt cost time : \u0026#34; \u0026lt;\u0026lt; end - start \u0026lt;\u0026lt; \u0026#34; ms\u0026#34; \u0026lt;\u0026lt; endl; return outputfilename; } å®ç°æ•ˆæœ:\nåŠ å¯†txtæ–‡ä»¶:\nåŠ å¯†jpgæ–‡ä»¶:\nåŠ å¯†mp3æ–‡ä»¶:\nåŠ å¯†docæ–‡ä»¶:\nAESäº”ç§åŠ å¯†æ¨¡å¼ å®ç°äº”ç§åŠ å¯†æ–¹å¼çš„å¯†é’¥æ˜¯ä¸€ä¸ªç½®æ¢è¡¨unsigned char Table[4] = {0x12, 0xb1, 0x53, 0x28};,åŠ å¯†å‡½æ•°æ˜¯åŸæ–‡ä¸å¯†é’¥çš„å¼‚æˆ–.\nECBæ¨¡å¼(ç”µå­å¯†ç æœ¬æ¨¡å¼) åŠ å¯†å‰æ ¹æ®åŠ å¯†å—å¤§å°ï¼ˆå¦‚AESä¸º128ä½ï¼‰åˆ†æˆè‹¥å¹²å—ï¼Œä¹‹åå°†æ¯å—ä½¿ç”¨ç›¸åŒçš„å¯†é’¥å•ç‹¬åŠ å¯†ï¼Œè§£å¯†åŒç†ã€‚\nECBæ¨¡å¼ç”±äºæ¯å—æ•°æ®çš„åŠ å¯†æ˜¯ç‹¬ç«‹çš„å› æ­¤åŠ å¯†å’Œè§£å¯†éƒ½å¯ä»¥å¹¶è¡Œè®¡ç®—ï¼ŒECBæ¨¡å¼æœ€å¤§çš„ç¼ºç‚¹æ˜¯ç›¸åŒçš„æ˜æ–‡å—ä¼šè¢«åŠ å¯†æˆç›¸åŒçš„å¯†æ–‡å—ï¼Œè¿™ç§æ–¹æ³•åœ¨æŸäº›ç¯å¢ƒä¸‹ä¸èƒ½æä¾›ä¸¥æ ¼çš„æ•°æ®ä¿å¯†æ€§ã€‚\næµç¨‹å›¾å¦‚ä¸‹:\nå®ç°ä»£ç :\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 //ç”µå­å¯†ç æœ¬æ¨¡å¼,åˆ†ç»„å¤§å°ä¸º4 unsigned char* ECB(unsigned char *plain, int N) { int gNum = N / groupSize; //åˆ†ç»„æ•°é‡ //å¯†æ–‡ unsigned char *cipher = new unsigned char[N]; int count = 0; for (int i = 0; i \u0026lt; gNum; ++i) { unsigned char temp[groupSize]; for(int j = 0;j \u0026lt; groupSize;++j) temp[j] = plain[count++]; //åŠ å¯† encrypt(temp,groupSize); for(int j = i*4;j \u0026lt; i*4 + 4;++j) cipher[j] = temp[j - i * 4]; } return cipher;//è¿”å›å¯†æ–‡ } è§£å¯†æ–¹æ³•ä¹Ÿæ˜¯è®©å¯†æ–‡ä¸å¯†é’¥è¿›è¡Œå¼‚æˆ–å³å¯,å®ç°æ•ˆæœå¦‚ä¸‹:\nCBCæ¨¡å¼(åˆ†ç»„é“¾æ¥æ¨¡å¼) CBCæ¨¡å¼å¯¹äºæ¯ä¸ªå¾…åŠ å¯†çš„å¯†ç å—åœ¨åŠ å¯†å‰ä¼šå…ˆä¸å‰ä¸€ä¸ªå¯†ç å—çš„å¯†æ–‡å¼‚æˆ–ç„¶åå†ç”¨åŠ å¯†å™¨åŠ å¯†ã€‚ç¬¬ä¸€ä¸ªæ˜æ–‡å—ä¸ä¸€ä¸ªå«åˆå§‹åŒ–å‘é‡çš„æ•°æ®å—å¼‚æˆ–ã€‚\nå¯ç”¨å…¬å¼æ€»ç»“ä¸º:\n$$\nC_i = E_K(P_i XOR C_{i-1}) \\\nC_{-1} = IV\n$$\næµç¨‹å›¾å¦‚ä¸‹:\nCBCæ¨¡å¼ç›¸æ¯”ECBæœ‰æ›´é«˜çš„ä¿å¯†æ€§ï¼Œä½†ç”±äºå¯¹æ¯ä¸ªæ•°æ®å—çš„åŠ å¯†ä¾èµ–ä¸å‰ä¸€ä¸ªæ•°æ®å—çš„åŠ å¯†æ‰€ä»¥åŠ å¯†æ— æ³•å¹¶è¡Œã€‚ä¸ECBä¸€æ ·åœ¨åŠ å¯†å‰éœ€è¦å¯¹æ•°æ®è¿›è¡Œå¡«å……ï¼Œä¸æ˜¯å¾ˆé€‚åˆå¯¹æµæ•°æ®è¿›è¡ŒåŠ å¯†ã€‚\nä»£ç å¦‚ä¸‹:\nåŠ å¯†å‡½æ•°:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 //CCBåŠ å¯†å‡½æ•° unsigned char *CCB(unsigned char *plain, int N) { int gNum = N / groupSize; //åˆ†ç»„æ•°é‡ //å¯†æ–‡ unsigned char *cipher = new unsigned char[N]; //è®¾ç½®åˆå§‹å‘é‡ unsigned char C[groupSize] = {0xe4, 0xa9, 0x5d, 0x99}; int count = 0; for (int i = 0; i \u0026lt; gNum; ++i) { unsigned char temp[groupSize]; for (int j = 0; j \u0026lt; groupSize; ++j) temp[j] = plain[count++]; //åŠ å¯† for (int j = 0; j \u0026lt; groupSize; ++j) //å…ˆä¸åˆå§‹å‘é‡å¼‚æˆ– temp[i] ^= C[i]; encrypt(temp, groupSize); //åŠ å¯† for (int j = i * 4; j \u0026lt; i * 4 + 4; ++j) { cipher[j] = temp[j - i * 4]; C[j - i * 4] = temp[j - i * 4];//è®¾ç½®æ–°å‘é‡ } } return cipher; } è§£å¯†å‡½æ•°:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 //CCBè§£å¯†å‡½æ•° unsigned char *dCCB(unsigned char *cipher, int N) { int gNum = N / groupSize; //åˆ†ç»„æ•°é‡ //æ˜æ–‡ unsigned char *plain = new unsigned char[N]; //è®¾ç½®åˆå§‹å‘é‡ unsigned char C[groupSize] = {0xe4, 0xa9, 0x5d, 0x99}; int count = 0; for (int i = 0; i \u0026lt; gNum; ++i) { unsigned char temp[groupSize]; for (int j = 0; j \u0026lt; groupSize; ++j) temp[j] = cipher[count++]; //è§£å¯† encrypt(temp, groupSize); //å…ˆè§£å¯† for (int j = 0; j \u0026lt; groupSize; ++j) //ç„¶åä¸åˆå§‹å‘é‡å¼‚æˆ– temp[i] ^= C[i]; for (int j = i * 4; j \u0026lt; i * 4 + 4; ++j) { plain[j] = temp[j - i * 4]; C[j - i * 4] = cipher[j];//è®¾ç½®æ–°å‘é‡ } } return plain; } å®ç°æ•ˆæœ:\nCFBæ¨¡å¼(å¯†æ–‡åé¦ˆæ¨¡å¼) ä¸å‰é¢çš„æ¨¡å¼ä¸åŒ,CFBæ¨¡å¼å¯ä»¥å°†æ¶ˆæ¯è¢«å½“æˆæ˜¯æ¯”ç‰¹æµ.å¯ä»¥æ€»ç»“ä¸ºå¦‚ä¸‹çš„å…¬å¼:\n$$\nC_i = P_i XOR E_K(C_{i-1})\\\nC_{-1} = IV\n$$\næµç¨‹å›¾å¦‚ä¸‹:\nåŠ å¯†ä»£ç :\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 //å¯†æ–‡åé¦ˆæ¨¡å¼,åŠ å¯†å‡½æ•° unsigned char *CFB(unsigned char *plain, int N) { int gsize = 2; int gNum = N / gsize; //åˆ†ç»„æ•°é‡,åˆ†æˆ8ç»„,æ¯ç»„å¤§å°ä¸º2 //å¯†æ–‡ unsigned char *cipher = new unsigned char[N]; //è®¾ç½®åˆå§‹å‘é‡ unsigned char C[4] = {0xe4, 0xa9, 0x5d, 0x99}; unsigned char S[2]; //å‰2ä¸ªå­—èŠ‚ int count = 0; for (int i = 0; i \u0026lt; gNum; ++i) { unsigned char temp[gsize]; //åˆ†ç»„æ˜æ–‡,å¤§å°ä¸º2 for (int j = 0; j \u0026lt; gsize; ++j) temp[j] = plain[count++]; //åŠ å¯† //å…ˆå¯¹åˆå§‹å‘é‡è¿›è¡ŒåŠ å¯† encrypt(C,4); //è·å–ç»“æœCçš„å‰ä¸¤ä¸ªbit,ç„¶åå‰2ä¸ªbit Sä¸æ˜æ–‡è¿›è¡Œå¼‚æˆ– for(int j = 0;j \u0026lt; gsize;++j){ temp[j] ^= C[j]; S[j] = temp[j]; //è·å–å¯†æ–‡çš„2bit } //è®¾ç½®å¯†æ–‡ for (int j = i * gsize; j \u0026lt; i * gsize + gsize; ++j) { cipher[j] = temp[j - i * gsize]; } //è®¾ç½®æ–°å‘é‡,æ–°å‘é‡å·¦ç§» for(int j = 0;j \u0026lt; gsize;++j) { C[j] = C[j + gsize]; C[j + gsize] = S[j]; } } return cipher; } è§£å¯†ä»£ç :\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 //å¯†æ–‡åé¦ˆè§£å¯† unsigned char *dCFB(unsigned char *cipher, int N) { int gsize = 2; int gNum = N / gsize; //åˆ†ç»„æ•°é‡,åˆ†æˆ8ç»„,æ¯ç»„å¤§å°ä¸º2 //æ˜æ–‡ unsigned char *plain = new unsigned char[N]; //è®¾ç½®åˆå§‹å‘é‡ unsigned char C[4] = {0xe4, 0xa9, 0x5d, 0x99}; unsigned char S[2]; //å‰2ä¸ªå­—èŠ‚ int count = 0; for (int i = 0; i \u0026lt; gNum; ++i) { unsigned char temp[gsize]; //åˆ†ç»„å¯†æ–‡ for (int j = 0; j \u0026lt; gsize; ++j) temp[j] = cipher[count++]; //è§£å¯† //å…ˆå¯¹åˆå§‹å‘é‡è¿›è¡ŒåŠ å¯† encrypt(C,4); //è·å–ç»“æœCçš„å‰ä¸¤ä¸ªbit,ç„¶åå‰2ä¸ªbit Sä¸æ˜æ–‡è¿›è¡Œå¼‚æˆ– for(int j = 0;j \u0026lt; 2;++j){ S[j] = temp[j]; temp[j] = C[j] ^ temp[j]; } //è®¾ç½®æ˜æ–‡ for (int j = i * gsize; j \u0026lt; i * gsize + gsize; ++j) { plain[j] = temp[j - i * gsize]; } //è®¾ç½®æ–°å‘é‡,æ–°å‘é‡å·¦ç§» for(int j = 0;j \u0026lt; gsize;++j) { C[j] = C[j + gsize]; C[j+gsize] = S[j]; } } return plain; } å®ç°æ•ˆæœ:\nOFBæ¨¡å¼(è¾“å‡ºåé¦ˆæ¨¡å¼) OFBæ˜¯å…ˆç”¨å—åŠ å¯†å™¨ç”Ÿæˆå¯†é’¥æµï¼ˆKeystreamï¼‰ï¼Œç„¶åå†å°†å¯†é’¥æµä¸æ˜æ–‡æµå¼‚æˆ–å¾—åˆ°å¯†æ–‡æµï¼Œè§£å¯†æ˜¯å…ˆç”¨å—åŠ å¯†å™¨ç”Ÿæˆå¯†é’¥æµï¼Œå†å°†å¯†é’¥æµä¸å¯†æ–‡æµå¼‚æˆ–å¾—åˆ°æ˜æ–‡ï¼Œç”±äºå¼‚æˆ–æ“ä½œçš„å¯¹ç§°æ€§æ‰€ä»¥åŠ å¯†å’Œè§£å¯†çš„æµç¨‹æ˜¯å®Œå…¨ä¸€æ ·çš„ã€‚\nOFBä¸CFBä¸€æ ·éƒ½éå¸¸é€‚åˆå¯¹æµæ•°æ®çš„åŠ å¯†ï¼ŒOFBç”±äºåŠ å¯†å’Œè§£å¯†éƒ½ä¾èµ–ä¸å‰ä¸€æ®µæ•°æ®ï¼Œæ‰€ä»¥åŠ å¯†å’Œè§£å¯†éƒ½ä¸èƒ½å¹¶è¡Œã€‚\næµç¨‹å›¾å¦‚ä¸‹:\nåŠ å¯†è§£å¯†ä»£ç :\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 //è¾“å‡ºåé¦ˆæ¨¡å¼,åŠ å¯†è§£å¯†å‡½æ•°ç›¸åŒ unsigned char *OFB(unsigned char *plain, int N) { int gsize = 2; int gNum = N / gsize; //åˆ†ç»„æ•°é‡,åˆ†æˆ8ç»„,æ¯ç»„å¤§å°ä¸º2 //å¯†æ–‡ unsigned char *cipher = new unsigned char[N]; //è®¾ç½®åˆå§‹å‘é‡ unsigned char C[4] = {0xee, 0xa9, 0x5d, 0x99}; unsigned char S[2]; //å‰2ä¸ªå­—èŠ‚ int count = 0; for (int i = 0; i \u0026lt; gNum; ++i) { unsigned char temp[gsize]; //åˆ†ç»„æ˜æ–‡ for (int j = 0; j \u0026lt; gsize; ++j) temp[j] = plain[count++]; //åŠ å¯† //å…ˆå¯¹åˆå§‹å‘é‡è¿›è¡ŒåŠ å¯† encrypt(C,4); //è·å–ç»“æœCçš„å‰ä¸¤ä¸ªbit,ç„¶åå‰2ä¸ªbit Sä¸æ˜æ–‡è¿›è¡Œå¼‚æˆ– for(int j = 0;j \u0026lt; 2;++j){ S[j] = C[j]; //å–å‘é‡åŠ å¯†åçš„å‰ä¸¤ä½ temp[j] ^= C[j]; } //è®¾ç½®å¯†æ–‡ for (int j = i * gsize; j \u0026lt; i * gsize + gsize; ++j) { cipher[j] = temp[j - i * gsize]; } //è®¾ç½®æ–°å‘é‡,æ–°å‘é‡å·¦ç§» for(int j = 0;j \u0026lt; gsize;++j) { C[j] = C[j + gsize]; C[j + gsize] = S[j]; } } return cipher; } å®ç°æ•ˆæœ:\nCTRæ¨¡å¼(è®¡æ•°å™¨æ¨¡å¼) ç±»å‹äºCFBï¼Œä½†æ˜¯åŠ å¯†æ¯ä¸ªè®¡æ•°å€¼ï¼Œè€Œä¸æ˜¯ä»»ä½•åé¦ˆå€¼,å¯¹æ¯ä¸ªæ˜æ–‡åˆ†ç»„ï¼Œå¿…é¡»æœ‰ä¸åŒçš„å¯†é’¥å’Œè®¡æ•°å€¼ (ä»ä¸é‡å¤ä½¿ç”¨),,å¯ä»¥ç”¨å¦‚ä¸‹å…¬å¼è¡¨ç¤º:\n$$\nO_i = E_K(i)\\\nC_i = P_i XOR O_i\n$$\nè®¡æ•°å™¨æ¨¡å¼æµç¨‹å›¾å¦‚ä¸‹:\nè®¡æ•°å™¨æ¨¡å¼åŠ å¯†å‡½æ•°ä¸è§£å¯†å‡½æ•°ä¸€æ ·,ä»£ç å¦‚ä¸‹:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 //è®¡æ•°å™¨æ¨¡å¼,åŠ å¯†å‡½æ•° unsigned char *CTR(unsigned char *plain, int N) { int gNum = N / groupSize; //åˆ†ç»„æ•°é‡ //å¯†æ–‡ unsigned char *cipher = new unsigned char[N]; //è®¾ç½®éšæœºå€¼ unsigned char Counter[groupSize*groupSize] = {0x44, 0xa9, 0x5d, 0x99, 0xe5, 0xf1, 0x3d, 0x91, 0x16, 0xa6, 0xe1, 0x33, 0x22, 0xdd, 0xab, 0x1f}; int count = 0; for (int i = 0; i \u0026lt; gNum; ++i) { unsigned char temp[groupSize]; //æ˜æ–‡åˆ†ç»„ unsigned char C[groupSize]; //åˆ†ç»„éšæœºå€¼ for (int j = 0; j \u0026lt; groupSize; ++j) { temp[j] = plain[count++]; C[j] = Counter[i*4+j]; } //åŠ è¿· //é¦–å…ˆåŠ å¯†éšæœºå€¼C encrypt(C, groupSize); //ç„¶åä¸æ˜æ–‡è¿›è¡Œå¼‚æˆ– for(int j = 0;j \u0026lt; groupSize;++j) temp[j] ^= C[j]; //è®¾ç½®å¯†æ–‡ for(int j = i*groupSize;j \u0026lt; i*groupSize+groupSize;j++) cipher[j] = temp[j-i*groupSize]; } return cipher; } å®ç°æ•ˆæœå¦‚ä¸‹:\nå‚è€ƒ:\nhttps://www.cnblogs.com/RabbitHu/p/bitset.html bitsetç”¨æ³• https://blog.csdn.net/liushu1231/article/details/8844631 bitsetçš„ç©ºé—´å¤§å° http://c.biancheng.net/cpp/html/2834.html æ–‡ä»¶å¤„ç† https://bbs.pediy.com/thread-253884.htm AESç®—æ³•å¸¦å›¾è§£ https://blog.csdn.net/lisonglisonglisong/article/details/41909813 AESç®—æ³• CSDN https://blog.csdn.net/sinat_23338865/article/details/72869841 AESäº”ç§åŠ å¯†æ¨¡å¼ è®¾â€œ+â€ä¸ºä¸€ä¸ªäº¤æ¢æ€§çš„äºŒå…ƒè¿ç®—ï¼Œå³å¯¹äºæ‰€æœ‰x,yï¼Œx+y=y+xã€‚è‹¥è¯¥é›†å†…å­˜åœ¨ä¸€ä¸ªå…ƒç´ 0ï¼Œä½¿å¾—å¯¹äºæ‰€æœ‰xï¼Œx+0=0+x=xï¼Œåˆ™æ­¤å…ƒç´ æ˜¯å”¯ä¸€çš„ã€‚å¦‚æœå¯¹äºä¸€ä¸ªç»™å®šçš„xï¼Œå­˜åœ¨ä¸€ä¸ªx\u0026rsquo;ä½¿å¾—x+x\u0026rsquo;=x\u0026rsquo;+x=0ï¼Œåˆ™ç§°x\u0026rsquo;æ˜¯xçš„åŠ æ³•é€†å…ƒã€‚\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nä¹˜æ³•é€†å…ƒï¼Œæ˜¯æŒ‡æ•°å­¦é¢†åŸŸç¾¤Gä¸­ä»»æ„ä¸€ä¸ªå…ƒç´ aï¼Œéƒ½åœ¨Gä¸­æœ‰å”¯ä¸€çš„é€†å…ƒaâ€˜ï¼Œå…·æœ‰æ€§è´¨aÃ—a\u0026rsquo;=a\u0026rsquo;Ã—a=eï¼Œå…¶ä¸­eä¸ºè¯¥ç¾¤çš„å•ä½å…ƒã€‚\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n","description":"","id":23,"section":"posts","tags":["AES","å¯†ç å­¦"],"title":"Aes-é«˜çº§åŠ å¯†æ ‡å‡†","uri":"https://hugo.jiahongw.com/zh/posts/cryptography/aes/"},{"content":"ä½¿ç”¨Scrapyçˆ¬å–æ–‡ç« çš„ä¸€ä¸ªå°é¡¹ç›®..\nScrapy æ¡†æ¶å›¾ï¼š\næŠ“å–å°ç¨‹åºç¤¾åŒºæ–‡ç«  åˆ›å»ºçˆ¬è™«é¡¹ç›® åˆ›å»ºé¡¹ç›®ï¼ˆé¡¹ç›®åä¸ºMyTestï¼‰\n1 scrapy startproject MyTest åˆ›å»ºçˆ¬è™«ğŸª²(å…ˆè¿›å…¥åˆ°MyTestç›®å½•)\n1 scrapy genspider -t crawl wx wxapp-union.com wxä¸ºçˆ¬è™«çš„åå­—ï¼Œwxapp-union.comä¸ºçˆ¬å–çš„åŸŸåï¼Œä½¿ç”¨äº†æ¨¡æ¿crawl\nå®šä¹‰çˆ¬å–çš„æ•°æ®ç»“æ„ çˆ¬å–çš„æ•°æ®ç»“æ„ç±»ç»§æ‰¿Itemç±»ï¼Œåœ¨items.pyæ–‡ä»¶ä¸­ï¼Œå¦‚ä¸‹æ˜¯è®¾ç½®éœ€è¦çˆ¬å–çš„æ•°æ®ç»“æ„ï¼Œå…¶ä¸­åŒ…æ‹¬:æ ‡é¢˜ã€ä½œè€…ã€æ—¶é—´ã€è®¿é—®è€…ã€å‰è¨€ã€æ­£æ–‡ã€‚\n1 2 3 4 5 6 7 8 9 10 from scrapy import Item,Field # å®šä¹‰æ–‡ç« æ•°æ®ç»“æ„ class ArticleItem(Item): title = Field() author = Field() _time = Field() visitors = Field() pre_talk = Field() article_content = Field() ç¼–å†™çˆ¬è™«è§„åˆ™ä¸è§£æè§„åˆ™ çˆ¬è™«çš„çˆ¬å–ç½‘é¡µçš„é“¾æ¥çš„è§„åˆ™å’Œè§£æé¡µé¢çš„è§„åˆ™éƒ½æ˜¯åœ¨æ–°å»ºçš„spideræ–‡ä»¶ä¸­çš„ç±»ä¸­ï¼Œä¹Ÿå³åœ¨wx.pyä¸­\nç¼–å†™çš„spiderç±»å¦‚ä¸‹:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 import scrapy from scrapy.linkextractors import LinkExtractor from scrapy.spiders import CrawlSpider, Rule from MyTest.items import ArticleItem class WxSpider(CrawlSpider): name = \u0026#39;wx\u0026#39; allowed_domains = [\u0026#39;wxapp-union.com\u0026#39;] start_urls = [\u0026#39;http://www.wxapp-union.com/portal.php?mod=list\u0026amp;catid=2\u0026amp;page=255\u0026#39;] rules = ( Rule(LinkExtractor(allow=r\u0026#39;.+mod=list\u0026amp;catid=2\u0026amp;page=\\d\u0026#39;), follow=True), Rule(LinkExtractor(allow=r\u0026#39;.+article-.+\\.html\u0026#39;),callback=\u0026#34;parse_item\u0026#34;,follow=False) ) def parse_item(self, response): title = response.xpath(\u0026#39;//h1[@class=\u0026#34;ph\u0026#34;]/text()\u0026#39;).get() author = response.xpath(\u0026#39;//p[@class=\u0026#34;authors\u0026#34;]//a\u0026#39;).get() _time = response.xpath(\u0026#39;//span[@class=\u0026#34;time\u0026#34;]/text()\u0026#39;).get() visitors = response.xpath(\u0026#39;//div[contains(@class,\u0026#34;focus_num\u0026#34;)]//a/text()\u0026#39;).get() pre_talk = response.xpath(\u0026#39;//div[@class=\u0026#34;blockquote\u0026#34;]//p/text()\u0026#39;).get() article_content = response.xpath(\u0026#39;//td[@id=\u0026#34;article_content\u0026#34;]\u0026#39;).get() item = ArticleItem(title=title,author=author,_time=_time,visitors=visitors,pre_talk=pre_talk,article_content=article_content) print(\u0026#39;*\u0026#39;*40) print(title) print(\u0026#39;*\u0026#39;*40) return item é¦–å…ˆruleså®šä¹‰äº†çˆ¬å–é“¾æ¥è§„åˆ™ï¼Œæœ‰ä¸¤ä¸ªè§„åˆ™ï¼Œç¬¬ä¸€ä¸ªè§„åˆ™æ˜¯çˆ¬å–é¡µé¢çš„é“¾æ¥ï¼Œæ¯ä¸€é¡µæœ‰å¤šä¸ªæ–‡ç« çš„é“¾æ¥ï¼Œè€Œç¬¬äºŒä¸ªè§„åˆ™åˆ™æ˜¯å®šä¹‰çˆ¬å–çš„å…·ä½“æ–‡ç« å†…å®¹çš„é“¾æ¥ã€‚ ç¬¬ä¸€ä¸ªè§„åˆ™éœ€è¦Followï¼Œå› ä¸ºéœ€è¦æ ¹æ®æ¯ä¸€é¡µçš„å†…å®¹æŸ¥æ‰¾æ–‡ç« çš„é“¾æ¥ï¼›è€Œç¬¬äºŒä¸ªè§„åˆ™æ˜¯æ–‡ç« é“¾æ¥ï¼Œæ•…ä¸éœ€è¦ç»§ç»­Follow ç¬¬ä¸€ä¸ªé¡µé¢é“¾æ¥è§„åˆ™ä¸éœ€è¦å›è°ƒå‡½æ•°ï¼Œå› ä¸ºä¸éœ€è¦è§£æï¼Œåªéœ€è¦è·å–æ–‡ç« é“¾æ¥ï¼›ç¬¬äºŒä¸ªæ–‡ç« é“¾æ¥è§„åˆ™åˆ™éœ€è¦è®¾ç½®å›è°ƒå‡½æ•°æ¥å¯¹è¿”å›çš„æ–‡ç« ç½‘é¡µå†…å®¹è¿›è¡Œè§£æã€‚ parse_itemè¯´æ˜ï¼š\nparse_itemæ˜¯è§£æé¡µé¢è¿”å›å†…å®¹çš„å‡½æ•°ï¼Œå…¶è¿”å›Itemæ•°æ®ç»“æ„ï¼Œä½¿ç”¨Xpathåˆ†åˆ«è·å–æ•°æ®ç»“æ„å„ä¸ªå…ƒç´ çš„å†…å®¹å¹¶ä¸”è¿”å›Item\nä¿å­˜æ•°æ® pipelinesæ˜¯ä¸€ä¸ªæœ€åå¤„ç†Itemçš„ç®¡é“\nåœ¨pipelines.pyæ–‡ä»¶ä¸­æ–°å»ºpiplelineå¯¹è¿”å›çš„Itemè¿›è¡Œå¤„ç†ï¼Œå¯ä»¥ä¿å­˜ä¸ºæ–‡ä»¶ï¼Œæˆ–è€…å­˜å‚¨åˆ°æ•°æ®åº“ã€‚\né¦–å…ˆæ–‡ä»¶ä¸­éœ€è¦å¯¼å…¥å¿…è¦çš„åº“â€˜\n1 2 3 4 5 import re\t# æ­£åˆ™å¤„ç† from html2text import HTML2Text\t# å°†ç½‘é¡µè½¬åŒ–ä¸ºMarkdownæ ¼å¼ from scrapy.exporters import JsonLinesItemExporter\t# è¾“å‡ºJsonæ–‡ä»¶è¾“å‡ºå™¨ from urllib.parse import urljoin\t# è¡¥å…¨URLï¼Œå› ä¸ºæœ‰äº›URLåªæ˜¾ç¤ºç›¸å¯¹ä½ç½® import pymongo\t# MongoDBæ“ä½œåº“ ç¬¬ä¸€ä¸ªPipelineï¼šä¿å­˜åˆ°Jsonæ–‡ä»¶ ç¨‹åºçš„æ„é€ å‡½æ•°æ–°å»ºä¸€ä¸ªJsonæ–‡ä»¶è¾“å‡ºå™¨ï¼Œprocess_itemè¿›è¡Œæ•°æ®çš„å­˜å‚¨ï¼Œå…³é—­çš„æ—¶å€™close_spiderä¼šè°ƒç”¨å…³é—­æ–‡ä»¶\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 # å­˜å‚¨åˆ°Jsonæ–‡ä»¶ä¸­ class JsonPipeline(object): def __init__(self): self.f = open(\u0026#39;wxjc.json\u0026#39;,\u0026#39;wb\u0026#39;) self.exporter = JsonLinesItemExporter(self.f, ensure_ascii=False,encoding=\u0026#34;utf-8\u0026#34;) def process_item(self, item, spider): # å°†å†…å®¹è½¬åŒ–ä¸ºMarkDownæ ¼å¼ item[\u0026#39;article_content\u0026#39;] = convert_md(item[\u0026#39;article_content\u0026#39;]) self.exporter.export_item(item) return item def close_spider(self,spider): self.f.close() ç¬¬äºŒä¸ªPipelineï¼šä¿å­˜åˆ°Markdownæ–‡ä»¶ æ–¹æ³•ä¸ç¬¬ä¸€å‘Pipelineç±»ä¼¼ï¼Œåªæ˜¯å†™æ–‡ä»¶ä½¿ç”¨æœ€ç®€å•çš„è¿½åŠ æ–¹å¼\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 # å†™å…¥Markdown class MDPipeline(object): def __init__(self): self.f = open(\u0026#39;wx_teaches.md\u0026#39;,\u0026#39;a\u0026#39;,encoding=\u0026#39;utf-8\u0026#39;) def process_item(self,item,spider): if self.f: self.f.write(\u0026#39;\\n\u0026#39;) self.f.write(\u0026#34;# \u0026#34; + item[\u0026#39;title\u0026#39;] + \u0026#39;\\n\u0026#39;) header_info = \u0026#34;ä½œè€…:{} å‘å¸ƒæ—¶é—´:{} Visitors:{}\\n\u0026#34;.format(item[\u0026#39;author\u0026#39;],item[\u0026#39;_time\u0026#39;],item[\u0026#39;visitors\u0026#39;]) self.f.write(header_info) self.f.write(\u0026#39;\u0026gt; \u0026#39; + item[\u0026#39;pre_talk\u0026#39;] + \u0026#39;\\n\u0026#39;) self.f.write(item[\u0026#39;article_content\u0026#39;]) return item def close_spider(self,spider): self.f.close() ç¬¬ä¸‰ä¸ªPilelineï¼šä¿å­˜åˆ°MongoDB å…¶ä¸­ä½¿ç”¨äº†ç±»æ–¹æ³•è£…é¥°å™¨@classmethod,æ„æ€å°±æ˜¯ç›´æ¥ç”¨ç±»åè°ƒç”¨è¯¥å‡½æ•°ï¼Œå°±èƒ½å¤Ÿç›´æ¥è¿”å›ä¸€ä¸ªMongoPipelineç±»äº†ï¼Œè¿˜å®šä¹‰äº†æ‰“å¼€spiderä¸å…³é—­spiderçš„æ“ä½œï¼Œå°±æ˜¯è¿æ¥æ•°æ®åº“ä¸å…³é—­æ•°æ®åº“\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 # å­˜å‚¨åˆ°MongoDBæ•°æ®åº“ class MongoPipeline(object): def __init__(self,mongo_uri,mongo_db): self.mongo_uri = mongo_uri self.mongo_db = mongo_db @classmethod def from_crawler(cls,crawler): return cls(mongo_uri = crawler.settings.get(\u0026#39;MONGO_URI\u0026#39;), mongo_db = crawler.settings.get(\u0026#39;MONGO_DB\u0026#39;)) def open_spider(self,spider): self.client = pymongo.MongoClient(self.mongo_uri) self.db =self.client[self.mongo_db] def process_item(self,item,spider): name = item.__class__.__name__ # \u0026lt;a href=\\\u0026#34;space-uid-17761.html\\\u0026#34;\u0026gt;Rolan\u0026lt;/a\u0026gt; item[\u0026#39;author\u0026#39;] = re.search(\u0026#39;\u0026lt;a.*?\u0026gt;(.*?)\u0026lt;/a\u0026gt;\u0026#39;,item[\u0026#39;author\u0026#39;]).group(1) self.db[name].insert(dict(item)) return item def close_spider(self,spider): self.client.close() æœ€åéœ€è¦åœ¨settings.pyä¸­æ·»åŠ å¦‚ä¸‹å­—æ®µ:\n1 2 MONGO_URI = \u0026#39;localhost\u0026#39; MONGO_DB = \u0026#39;WX\u0026#39; æœ€åéœ€è¦åœ¨settings.pyä¸­æ·»åŠ å¦‚ä¸‹å­—æ®µ 1 2 3 4 5 6 7 8 9 ITEM_PIPELINES = { \u0026#39;MyTest.pipelines.JsonPipeline\u0026#39;: 300, \u0026#39;MyTest.pipelines.MDPipeline\u0026#39;: 301, \u0026#39;MyTest.pipelines.MongoPipeline\u0026#39;: 400, } # ä¿®æ”¹ä¸ºFalse ROBOTSTXT_OBEY = False # è®¾ç½®å»¶è¿Ÿ1s DOWNLOAD_DELAY = 1 å¼€å§‹çˆ¬å– å¯ä»¥åœ¨é¡¹ç›®ç›®å½•ä¸­æ–°å»ºä¸€ä¸ªè„šæœ¬start.pyï¼Œæ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼Œè‡ªåŠ¨è¿è¡Œè„šæœ¬\n1 2 from scrapy import cmdline cmdline.execute(\u0026#39;scrapy crawl test\u0026#39;.split(\u0026#39; \u0026#39;)) çˆ¬å–ç»“æœ Jsonç»“æœ Markdownç»“æœ Markdownæ–‡ä»¶ç”±äºå¤ªå¤§äº†ä½¿ç”¨Markdownæ–‡ä»¶æ‰“ä¸å¼€ï¼Œåªå¥½ä½¿ç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€\nMongoDBç»“æœ ","description":"","id":24,"section":"posts","tags":["çˆ¬è™«","scrapy"],"title":"ä½¿ç”¨Scrapyæ¡†æ¶ç¼–å†™çˆ¬è™«","uri":"https://hugo.jiahongw.com/zh/posts/dev/scrapy-exercise/"},{"content":" HUGO + Github + Github Action æŒç»­é›†æˆéƒ¨ç½²ä¸ªäººåšå®¢\nå®‰è£… HUGO æœ¬åœ°ç¯å¢ƒ é¦–å…ˆåœ¨ HUGO çš„å®˜ç½‘ä¸‹è½½Hugoçš„ Windows å®‰è£…åŒ…ï¼Œç„¶åå°†è·¯å¾„æ·»åŠ åˆ°ç¯å¢ƒå˜é‡å³å¯ã€‚\nstep1:ä¸‹è½½ hugo\nstep2:é…ç½®ç¯å¢ƒå˜é‡\nå…¶ä»–ç³»ç»Ÿå®‰è£… HUGO çš„æ–¹æ³•ï¼š\nMacï¼šbrew install hugo HUGO ç«™ç‚¹é…ç½®åŠä¸»é¢˜é…ç½® åˆ›å»ºç«™ç‚¹ åœ¨ç›®å½•ä¸‹ç›´æ¥è¾“å…¥ä¸‹é¢çš„ä»£ç å³å¯åˆ›å»ºä¸€ä¸ªåä¸º blog çš„ hugo ç«™ç‚¹(æ³¨æ„ï¼šæ–°å»ºçš„ç«™ç‚¹æ˜¯æ²¡æœ‰è‡ªå¸¦ä¸»é¢˜çš„)\n1 hugo new site blog æˆ–è€…è¿›å…¥ blog æ–‡ä»¶å¤¹å†…ç›´æ¥è¾“å…¥ä»¥ä¸‹è¯­å¥ï¼š\n1 hugo new site . ä¸‹è½½ä¸»é¢˜ å¯ä»¥åœ¨hugo themeä¸‹è½½ä¸»é¢˜ï¼Œç„¶åæ ¹æ®ä¸»é¢˜çš„æ–‡æ¡£è¿›è¡Œé…ç½®\næ”¾åˆ°ç«™ç‚¹æ–‡ä»¶å¤¹ themes å†…ï¼Œé…ç½® config.toml\næœ¬åœ°æµ‹è¯•è¿è¡Œ è¾“å…¥hugo serveræµ‹è¯•\nGithub é…ç½® åˆ›å»ºç«™ç‚¹ä»“åº“å¹¶ä¸”è®¾ç½® GithubPage å¯ä»¥åœ¨ Setting ä¸­çœ‹è§å¦‚ä¸‹ï¼š\nåˆ›å»ºå¦ä¸€ä¸ªå­˜å‚¨é¡¹ç›®çš„ä»“åº“ åˆ›å»ºå¦ä¸€ä¸ªå­˜å‚¨é¡¹ç›®çš„ä»“åº“ï¼Œå­˜å‚¨å†™çš„åšå®¢æ–‡ç« \né…ç½® Github Action é¦–å…ˆåœ¨é¡¹ç›®ä»“åº“ç‚¹å‡» actionï¼Œé€‰æ‹©Simple workflowï¼Œè¾“å…¥ä¸€ä¸‹çš„é…ç½®ä»£ç ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 name: HUGO_CI #è‡ªåŠ¨åŒ–çš„åç§° on: push: # pushçš„æ—¶å€™è§¦å‘ branches: # é‚£äº›åˆ†æ”¯éœ€è¦è§¦å‘ - master jobs: build: runs-on: ubuntu-latest # é•œåƒå¸‚åœº steps: - name: checkout # æ­¥éª¤çš„åç§° uses: actions/checkout@v3 #è½¯ä»¶å¸‚åœºçš„åç§° with: # å‚æ•° submodules: true - name: Setup Hugo uses: peaceiris/actions-hugo@v2.2.2 with: hugo-version: \u0026#39;0.64.1\u0026#39; # è®¾ç½®HUGOæ¡†æ¶çš„ç‰ˆæœ¬ extended: true # æ˜¯å¦é€‰æ‹©æ‹“å±•ç‰ˆHUGOæ¡†æ¶ï¼Œé€‰æ‹©æ˜¯ - name: Build run: hugo -D - name: Deploy uses: peaceiris/actions-gh-pages@v2.5.1 env: ACTIONS_DEPLOY_KEY: ${{ secrets.ACTIONS_DEPLOY_KEY }} EXTERNAL_REPOSITORY: redisread/redisread.github.io PUBLISH_BRANCH: master PUBLISH_DIR: ./public å‡†å¤‡éƒ¨ç½²ï¼Œæˆ‘ä»¬å¼€å‘çš„é¡¹ç›®åŠgithub pageså®é™…æ˜¯åˆ†å¼€çš„ï¼Œä¸€ä¸ªç”¨äºä¿å­˜é¡¹ç›®ï¼Œç›¸å½“äºæºä»£ç ï¼Œå¦å¤–ä¸€ä¸ªç”¨äºä¿å­˜æœ€ç»ˆçš„ç½‘é¡µæ–‡ä»¶ã€‚\nä½¿ç”¨ git ç”Ÿæˆ ssh key(ç›¸å½“äºç”Ÿæˆå¯¹å¯†é’¥)\n1 2 3 4 ssh-keygen -t rsa -b 4096 -C \u0026#34;$(git config user.email)\u0026#34; -f gh-pages -N \u0026#34;\u0026#34; # You will get 2 files: # gh-pages.pub (public key) # gh-pages (private key) å‡è®¾ å¼€å‘é¡¹ç›®ä¸º HUGO_blog éƒ¨ç½²çš„é¡¹ç›®ä¸º redisread.github.io\næ‰“å¼€HUGO_blogä»“åº“çš„ settingsï¼Œå†ç‚¹å‡»Secretsï¼Œç„¶åæ·»åŠ åˆšåˆšç”Ÿæˆçš„ç§é’¥ï¼Œname ä¸ºACTIONS_DEPLOY_KEY\nåŒç†ï¼Œæ‰“å¼€redisread.github.ioï¼Œç‚¹å‡»Deploy keysï¼Œæ·»åŠ å…¬é’¥ï¼ŒAllow write accessä¸€å®šè¦å‹¾ä¸Šï¼Œå¦åˆ™ä¼šæ— æ³•æäº¤\nç„¶åï¼Œä½ å°±å¯ä»¥æäº¤ä»£ç äº†ï¼Œpush æˆåŠŸåï¼Œæ‰“å¼€ä»“åº“actionsï¼Œè‡³æ­¤éƒ¨ç½²æˆåŠŸï¼Œå¤§åŠŸå‘Šæˆï¼\nåç»­å¯ä»¥è‡ªå·±å†™æ–‡ç« ç„¶å push äº†ï¼Œgithub actionä¼šè‡ªåŠ¨å¸®ä½ éƒ¨ç½²ã€‚\n","description":"Guide to set Hugo site.","id":26,"section":"posts","tags":["hugo","github"],"title":"éƒ¨ç½²HUGOåšå®¢","uri":"https://hugo.jiahongw.com/zh/posts/hugo/hugo_setup/"},{"content":"æˆ‘æ˜¯ä¸€ä¸ªä¸å¤Ÿä¸¥è°¨çš„ç¨‹åºå‘˜ğŸ™‰.\næˆ‘å–œæ¬¢ğŸ“–,è¿˜æœ‰ğŸ“.\næˆ–è®¸æœ‰æ—¶å€™æˆ‘æƒ³çš„ä¸å¤Ÿè¿œï¼Œä½†æ˜¯æœ‰æ—¶å€™æˆ‘æƒ³çš„å¾ˆæ·±å…¥ã€‚\næˆ‘æœ€å–œæ¬¢çš„ Aaron Swartz è¯­å½•:\nåœ¨é•¿å¤§çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘æ‰æ…¢æ…¢å‘ç°ï¼Œæˆ‘èº«è¾¹çš„æ‰€æœ‰äº‹ï¼Œåˆ«äººè·Ÿæˆ‘è¯´çš„æ‰€æœ‰äº‹ï¼Œé‚£äº›æ‰€è°“æœ¬æ¥å¦‚æ­¤ï¼Œæ³¨å®šå¦‚æ­¤çš„äº‹ï¼Œå®ƒä»¬å…¶å®æ²¡æœ‰éå¾—å¦‚æ­¤ï¼Œäº‹æƒ…æ˜¯å¯ä»¥æ”¹å˜çš„ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œæœ‰äº›äº‹æ—¢ç„¶é”™äº†ï¼Œé‚£å°±è¯¥åšå‡ºæ”¹å˜ã€‚\næˆ‘å¯¹å­¦æ ¡ååˆ†å¤±æœ›ï¼Œæˆ‘è§‰å¾—è€å¸ˆä»¬æ ¹æœ¬ä¸æ‡‚è‡ªå·±æ‰€è®²çš„æ˜¯ä»€ä¹ˆï¼Œä»–ä»¬å±…é«˜ä¸´ä¸‹ï¼Œç®¡è¿™ç®¡é‚£ï¼›ä½œä¸šå°±åƒæ˜¯ç§æŠŠæˆï¼Œå°±å¥½åƒçŸ¥è¯†ä¸€ç§å¼ºåˆ¶æ‰€æœ‰å­¦ç”Ÿä¸€èµ·åº¸åº¸ç¢Œç¢Œçš„æ‰‹æ®µã€‚äºæ˜¯æˆ‘å°±å¼€å§‹å»é˜…è¯»é‚£äº›å…³äºæ•™è‚²å²å’Œè¿™å¥—æ•™è‚²ä½“ç³»æ¼”å˜çš„ä¹¦ç±ã€‚ç„¶åä½ å°±èƒ½å‘ç°ï¼Œå¦‚æœè¦çœŸæ­£å­¦åˆ°ä¸œè¥¿ï¼Œé‚£å°±ä¸èƒ½æœºæ¢°é‡å¤è€å¸ˆæ‰€æ•™çš„ï¼Œè¿™æœ‰ç‚¹å„¿ä½¿å¾—æˆ‘æ¸æ¸å­¦ä¼šäº†è´¨ç–‘ã€‚æˆ‘è´¨ç–‘æˆ‘æ‰€ä¸Šçš„å­¦æ ¡ï¼Œæˆ‘è´¨ç–‘ç®€å†è¿™æ‰€å­¦æ ¡çš„è¿™ä¸ªç¤¾ä¼šï¼Œæˆ‘è´¨ç–‘å­¦æ ¡æ•™äººä»¬è¿½æ±‚çš„é‚£å¥—äº‹ç†ï¼Œæˆ‘è´¨ç–‘å»ºç«‹èµ·è¿™æ•´ä¸ªä½“ç³»çš„æ”¿åºœã€‚\næˆ‘æ€»æ˜¯æ·±å…¥æ€è€ƒï¼Œæˆ‘å¸Œæœ›åˆ«äººä¹Ÿèƒ½æƒ³è¿œä¸€ç‚¹ã€‚æˆ‘ä¸ºç†æƒ³è€Œå·¥ä½œï¼Œå¹¶ä»åˆ«äººèº«ä¸Šå­¦ä¹ ï¼Œæˆ‘ä¸å–œæ¬¢æ‹’äººäºå¤–ã€‚æˆ‘æ˜¯ä¸ªå®Œç¾ä¸»ä¹‰è€…ï¼Œä½†æˆ‘ä¸ä¼šè¦æ±‚å‡ºç‰ˆç•Œä¹Ÿç²¾ç›Šæ±‚ç²¾ã€‚é™¤äº†æ•™è‚²å’Œå¨±ä¹ä»¥å¤–ï¼Œæˆ‘ä¸ä¼šæµªè´¹æ—¶é—´åœ¨é‚£äº›ä¸ä¼šæœ‰å½±å“çš„äº‹æƒ…ä¸Šã€‚æˆ‘è¯•ç€å’Œæ¯ä¸ªäººéƒ½å‹å¥½ç›¸å¤„ï¼Œä½†æˆ‘è®¨åŒäººä»¬ä¸è®¤çœŸå¯¹å¾…æˆ‘ã€‚æˆ‘ä¸è®°æ¨ä»–äººï¼Œå› ä¸ºè¿™äºåˆ›é€ æ— ç›Šã€‚ä½†æˆ‘ä»è‡ªèº«ç»å†ä¸­å­¦ä¹ ï¼Œæˆ‘æƒ³è®©ä¸–ç•Œå˜å¾—æ›´ç¾å¥½ã€‚\næˆ‘æ·±æ·±åœ°è§‰å¾—ï¼Œå…‰å®‰ç”Ÿä¸å½“ä¸‹è¿™ä¸–ç•Œæ˜¯ä¸å¤Ÿçš„ï¼Œé‚£æ ·å­çŸ¥è¯†åˆ«äººç»™ä»€ä¹ˆä½ å°±ç…§æ”¶ï¼Œå¤§äººä»¬è¯´ä»€ä¹ˆä½ å°±ç…§åšï¼Œä½ ç…§ç€çˆ¶æ¯è¯´çš„å»åšï¼Œç…§ç€ç¤¾ä¼šè¯´çš„å»åšã€‚æˆ‘è§‰å¾—ä½ åº”è¯¥æ€»æŒæœ‰è´¨ç–‘ï¼Œæˆ‘è§‰å¾—ä»ç§‘å­¦çš„è§’åº¦çœ‹ï¼Œä½ æ‰€å­¦çš„ä¸€åˆ‡éƒ½çŸ¥è¯†æš‚æ—¶æ€§çš„ï¼Œä»»ä½•æ‰€å­¦éƒ½æœ‰æ”¹å£ã€é©³æ–¥ã€è´¨ç–‘çš„ä½™åœ°ã€‚æˆ‘è§‰å¾—è¿™æƒ…å†µå¯¹ç¤¾ä¼šä¹Ÿé€‚ç”¨ã€‚å½“æˆ‘æ„è¯†åˆ°ç¤¾ä¼šä¸Šæœ‰ç€æˆ‘èƒ½å°½ä»½åŠ›å»è§£å†³çš„çœŸæ­£ä¸¥é‡çš„ã€åŸºç¡€æ€§çš„é—®é¢˜æ—¶ï¼Œæˆ‘æ²¡æ³•å»é—å¿˜å®ƒã€å›é¿å®ƒã€‚\n","description":"Zzo about page","id":27,"section":"","tags":null,"title":"About","uri":"https://hugo.jiahongw.com/zh/about/"},{"content":"ç›’å­ æ”¯æŒ Markdown è¯­æ³•çš„ç›’å­ è¯­æ³•ï¼š\næˆ–è€…ï¼š\n1 \u0026lt;div class=\u0026#34;box\u0026#34;\u0026gt;This is \u0026lt;strong\u0026gt;boxmd\u0026lt;/strong\u0026gt; shortcode\u0026lt;/div\u0026gt; æ¸²æŸ“æ˜¾ç¤ºï¼š\nThis is boxmd shortcode ç®€å•ç›’å­ è¯­æ³•ï¼š\næ¸²æŸ“æ˜¾ç¤ºï¼š\nThis is **box** shortcode ä»£ç é€‰é¡¹å¡ å¯ä»¥åœ¨ä¸åŒçš„ä»£ç å—ä¹‹é—´åˆ‡æ¢ï¼Œè¯­æ³•ï¼š\næ¸²æŸ“æ˜¾ç¤ºï¼š\njava javascript 1 System.out.println(\u0026#39;Hello World!\u0026#39;); 1 console.log(\u0026#39;Hello World!\u0026#39;); å¸¸è§„é€‰é¡¹å¡ è¿™ä¸ªå’Œä»£ç é€‰é¡¹å¡ç±»ä¼¼ï¼Œä¸åŒçš„æ˜¯ï¼Œè¿™ç§é€‰é¡¹å¡æ›´åŠ â€œå¸¸è§„â€ã€‚è¯­æ³•ï¼š\næ¸²æŸ“æ˜¾ç¤ºï¼š\nWindows MacOS Ubuntu Windows section 1 console.log(\u0026#39;Hello World!\u0026#39;); âš ï¸Becareful that the content in the tab should be different from each other. The tab makes unique id hashes depending on the tab contents. So, If you just copy-paste the tabs with multiple times, since it has the same contents, the tab will not work.\nMacOS section Hello world! Ubuntu section Great! å±•å¼€æ  è¯­æ³•ï¼š\næ¸²æŸ“æ˜¾ç¤ºï¼š\nExpand me Title contents Expand me2 Title2 contents2 å½©è‰²æ–‡æœ¬æ¡† è¯­æ³•ï¼š\næ¸²æŸ“æ˜¾ç¤ºï¼š\nthis is a text this is a text this is a text this is a text å½©è‰²æ³¨æ„æ¡† è¯­æ³•ï¼š\næ¸²æŸ“æ˜¾ç¤ºï¼š\nsuccess text info text warning text error text å›¾ç‰‡æè¿° ä½¿ç”¨è¯­æ³•ï¼š\næ¸²æŸ“æ˜¾ç¤ºï¼š\nSample Image: Image with title, caption, alt, ... æŒ‰é’® è¯­æ³•ï¼š\nç®€å•æŒ‰é’®ï¼š\nbutton è®¾ç½®å®½åº¦é«˜åº¦ï¼š\nbutton è®¾ç½®é¢œè‰²ï¼š\nbutton ","description":"tabs, code-tabs, expand, alert, warning, notice, img, box","id":28,"section":"posts","tags":["shortcode","zzo","åšå®¢æ­å»º"],"title":"Shortcodesä½¿ç”¨å‚è€ƒ","uri":"https://hugo.jiahongw.com/zh/posts/hugo/shortcodes/"},{"content":"A Short Videoï¼š â€”â€”ä»¥ä¸‹ Aaron Swartzçš„å®£è¨€ï¼Œæˆ‘æƒ³è¿™æ‰æ˜¯ä¿¡æ¯é©å‘½çš„çœŸè°›â€”â€”\nä¿¡æ¯å°±æ˜¯åŠ›é‡ã€‚ä½†å°±åƒæ‰€æœ‰åŠ›é‡ä¸€æ ·ï¼Œæœ‰äº›äººåªæƒ³å ä¸ºå·±æœ‰ã€‚ä¸–ç•Œä¸Šæ‰€æœ‰çš„ç§‘å­¦å’Œæ–‡åŒ–é—äº§ï¼Œå·²åœ¨ä¹¦ç±å’ŒæœŸåˆŠä¸Šå‘å¸ƒäº†æ•°ä¸ªä¸–çºªï¼Œæ­£æ¸æ¸åœ°è¢«å°‘æ•°ç§æœ‰çš„å…¬å¸æ•°å­—åŒ–å¹¶ä¸Šé”ã€‚æƒ³è¦é˜…è¯»é‚£äº›æœ‰ç€æœ€è‘—åç ”ç©¶æˆæœçš„è®ºæ–‡ï¼Ÿä½ å¿…é¡»æ”¯ä»˜ç»™å¦‚ Reed Elsevier è¿™æ ·çš„å‡ºç‰ˆå•†å¤§æŠŠé’±ã€‚\næœ‰äººåŠªåŠ›å»æ”¹å˜è¿™ç§çŠ¶å†µã€‚å¼€æ”¾è®¿é—®è¿åŠ¨ (Open Access Movement) å¥‹å‹‡æ–—äº‰ï¼Œç¡®ä¿ç§‘å­¦å®¶ä»¬æ²¡æœ‰å°†ä»–ä»¬çš„ç‰ˆæƒç­¾ç½²ç»™åˆ«äººï¼Œè€Œæ˜¯å°†ä»–ä»¬çš„æˆæœå‘å¸ƒåˆ°ç½‘ç»œä¸Šï¼Œå…è®¸ä»»ä½•äººè®¿é—®å®ƒä»¬ã€‚ä½†å³ä¾¿æ˜¯æœ€å¥½çš„æƒ…å†µï¼Œä»–ä»¬çš„è¡Œä¸ºä¹Ÿåªä½œç”¨äºæœªæ¥å‘å¸ƒçš„ä¸œè¥¿ã€‚ä¹‹å‰çš„éƒ½å°†å¤±å»ã€‚\nè¿™æ ·çš„ä»£ä»·å®åœ¨å¤ªé«˜ã€‚å¼ºåˆ¶å­¦è€…ä»˜é’±ä»¥é˜…è¯»ä»–ä»¬åŒè¡Œçš„æˆæœï¼Ÿæ‰«ææ•´ä¸ªå›¾ä¹¦é¦†å´åªå…è®¸ Google çš„äººé˜…è¯»å®ƒä»¬ï¼Ÿæä¾›ç§‘å­¦æ–‡ç« ç»™é‚£äº›ç¬¬ä¸€ä¸–ç•Œçš„ç²¾è‹±å¤§å­¦ï¼Œå´ä¸ç»™èº«åœ¨å—åŠçƒçš„å„¿ç«¥ï¼Ÿè¿™å®åœ¨è›®æ¨ªä¸”æ— æ³•æ¥å—ã€‚\nâ€œæˆ‘åŒæ„ï¼Œâ€æœ‰äº›äººå°±è¯´äº†ï¼Œâ€œä½†æ˜¯æˆ‘ä»¬èƒ½åšä»€ä¹ˆå‘¢ï¼Ÿé‚£äº›å…¬å¸æ¡æœ‰ç‰ˆæƒï¼Œä»–ä»¬é é™åˆ¶è®¿é—®èµšå–å¤§æŠŠçš„é’±ï¼Œè€Œä¸”è¿™æ˜¯å®Œå…¨åˆæ³•çš„ - æˆ‘ä»¬æ²¡æœ‰åŠæ³•é˜»æ­¢ä»–ä»¬ã€‚â€ä½†æœ‰äº›äº‹æˆ‘ä»¬èƒ½åšï¼Œè¿™äº›äº‹æˆ‘ä»¬å·²ç»åœ¨åšï¼šæˆ‘ä»¬å¯ä»¥åå‡»ã€‚\né‚£äº›èƒ½å¤Ÿè®¿é—®è¿™äº›èµ„æºçš„äºº - å­¦ç”Ÿï¼Œå›¾ä¹¦ç®¡ç†å‘˜ï¼Œç§‘å­¦å®¶ - ä½ ä»¬è¢«èµ‹äºˆäº†ç‰¹æƒã€‚ä½ ä»¬èƒ½äº«å—åˆ°è¿™çŸ¥è¯†çš„ç››å®´ï¼Œè€Œå…¶ä»–äººå´è¢«æ’é™¤åœ¨å¤–ã€‚ä½†æ˜¯ä½ ä»¬ä¸å¿… - äº‹å®ä¸Šï¼Œä»é“ä¹‰å±‚é¢æ¥è¯´ï¼Œä½ ä»¬ä¸èƒ½ - ä¸ºä¿ç•™è‡ªå·±ä¿ç•™è¿™ä»½ç‰¹æƒã€‚ä½ ä»¬æœ‰ä¹‰åŠ¡å’Œå…¨ä¸–ç•Œåˆ†äº«å®ƒã€‚è€Œä¸”ä½ ä»¬å·²ç»åœ¨åšäº†ï¼šå’ŒåŒè¡Œä»¬äº¤æ¢å¯†ç ï¼Œå›åº”æœ‹å‹ä»¬çš„ä¸‹è½½è¯·æ±‚ã€‚\nåŒæ—¶ï¼Œé‚£äº›è¢«æ‹’ä¹‹é—¨å¤–çš„äººä»¬å¹¶æ²¡æœ‰è¢–æ‰‹æ—è§‚ã€‚ä½ ä»¬æºœè¿‡æ´ç©´ï¼Œç¿»è¶Šå›´å¢™ï¼Œè§£æ”¾é‚£äº›è¢«å‡ºç‰ˆå•†å°é”çš„ä¿¡æ¯å¹¶åˆ†äº«ç»™ä½ çš„æœ‹å‹ä»¬ã€‚\nä½†æ‰€æœ‰è¿™äº›è¡ŒåŠ¨éƒ½æ˜¯åœ¨é»‘æš—ä¸­è¿›è¡Œï¼Œéšè—äºåœ°åº•ã€‚å®ƒä»¬è¢«ç§°ä½œå·çªƒæˆ–ç›—ç‰ˆï¼Œä»¿ä½›åˆ†äº«å¤§é‡çš„çŸ¥è¯†ç²¾ç¥ä¸Šç­‰åŒäºæŠ¢åŠ«ä¸€è‰˜èˆ¹åªå¹¶è°‹æ€å…¶èˆ¹å‘˜ã€‚ä½†æ˜¯åˆ†äº«ç»éä¸é“å¾·çš„ï¼Œå®ƒæ˜¯ä¸€ç§é“å¾·ä½¿å‘½ã€‚åªæœ‰é‚£äº›åˆ©æ¬²ç†å¿ƒçš„äººæ‰ä¼šæ‹’ç»è®©æœ‹å‹å¤åˆ¶ä¸€ä»½ã€‚\nå¤§å…¬å¸ï¼Œå½“ç„¶ï¼Œå°±æ˜¯åˆ©æ¬²ç†å¿ƒã€‚ä½¿å®ƒä»¬è¿è½¬çš„æ³•å¾‹è¦æ±‚ä½¿ç„¶ - ç¨å¾®å‡ºç‚¹äº‹æŠ•èµ„äººå°±å¾—å›ä¹±ã€‚å®ƒä»¬æ”¶ä¹°çš„æ”¿æ²»å®¶ä»¬æ”¯æŒå®ƒä»¬ï¼Œé€šè¿‡æ³•æ¡ˆè®©å®ƒä»¬æ‹¥æœ‰ä¸“å±çš„æƒåŠ›å†³å®šè°å¯ä»¥å¤åˆ¶ã€‚\néµä»ä¸å…¬æ­£çš„æ³•å¾‹ä¸ä¼šå¸¦æ¥å…¬æ­£ã€‚æ­¥å…¥å…‰æ˜çš„æ—¶å€™åˆ°äº†ï¼Œåœ¨å…¬æ°‘ä¸æœä»çš„ä¼Ÿå¤§ä¼ ç»Ÿä¸‹ï¼Œå®£å‘Šæˆ‘ä»¬å¯¹è¿™ç§ç§äººç›—çªƒå…¬å…±æ–‡åŒ–çš„åæŠ—ã€‚\næˆ‘ä»¬è¦å¤ºå›ä¿¡æ¯ï¼Œæ— è®ºå®ƒä»¬è¢«å­˜åœ¨ä½•å¤„ï¼Œåˆ¶ä½œæˆ‘ä»¬çš„å‰¯æœ¬å¹¶å’Œå…¨ä¸–ç•Œåˆ†äº«ã€‚æˆ‘ä»¬è¦å–åˆ°ç‰ˆæƒåˆ°æœŸçš„ä¸œè¥¿å¹¶å°†å®ƒä»¬å½’æ¡£ï¼Œæˆ‘ä»¬è¦ä¹°ä¸‹ç§˜å¯†çš„èµ„æ–™åº“å¹¶å°†å®ƒä»¬æ”¾åˆ°ç½‘ä¸Šã€‚æˆ‘ä»¬è¦ä¸‹è½½ç§‘å­¦æœŸåˆŠå¹¶å°†å®ƒä»¬ä¸Šä¼ åˆ°æ–‡ä»¶åˆ†äº«ç½‘ç»œã€‚æˆ‘ä»¬è¦ä¸ºæ¸¸å‡»é˜Ÿå¼€æ”¾è®¿é—®è€Œæˆ˜ã€‚\nåªè¦å…¨ä¸–ç•Œæœ‰è¶³å¤Ÿå¤šçš„æˆ‘ä»¬ï¼Œé‚£å°±ä¸ä»…æ˜¯ä¼ è¾¾äº†ä¸€ä¸ªåå¯¹çŸ¥è¯†ç§æœ‰åŒ–çš„å¼ºæœ‰åŠ›ä¿¡å·ï¼Œæˆ‘ä»¬è¿˜å°†è®©å®ƒæˆä¸ºè¿‡å»ã€‚ä½ æ„¿æ„å’Œæˆ‘ä»¬ä¸€èµ·å—ï¼Ÿ\näºšä¼¦Â·æ–¯æ²ƒèŒ¨ (Aaron Swartz)\n2008 å¹´ 7 æœˆï¼Œæ„å¤§åˆ© Eremo\nInformation is power. But like all power, there are those who want to keep it for themselves. The world\u0026rsquo;s entire scientific and cultural heritage, published over centuries in books and journals, is increasingly being digitized and locked up by a handful of private corporations. Want to read the papers featuring the most famous results of the sciences? You\u0026rsquo;ll need to send enormous amounts to\npublishers like Reed Elsevier.\nThere are those struggling to change this. The Open Access Movement has fought valiantly to ensure that scientists do not sign their copyrights away but instead ensure their work is published on the Internet, under terms that allow anyone to access it. But even under the best scenarios, their work will only apply to things published in the future. Everything up until now will have been lost.\nThat is too high a price to pay. Forcing academics to pay money to read the work of their colleagues? Scanning entire libraries but only allowing the folks at Google to read them? Providing scientific articles to those at elite universities in the First World, but not to children in the Global South? It\u0026rsquo;s outrageous and unacceptable.\n\u0026ldquo;I agree,\u0026rdquo; many say, \u0026ldquo;but what can we do? The companies hold the copyrights, they make enormous amounts of money by charging for access, and it\u0026rsquo;s perfectly legal - there\u0026rsquo;s nothing we can do to stop them.\u0026rdquo; But there is something we can, something that\u0026rsquo;s already being done: we can fight back.\nThose with access to these resources - students, librarians, scientists - you have been given a privilege. You get to feed at this banquet of knowledge while the rest of the world is locked out. But you need not - indeed, morally, you cannot - keep this privilege for yourselves. You have a duty to share it with the world. And you have: trading passwords with colleagues, filling download requests for friends.\nMeanwhile, those who have been locked out are not standing idly by. You have been sneaking through holes and climbing over fences, liberating the information locked up by the publishers and sharing them with your friends.\nBut all of this action goes on in the dark, hidden underground. It\u0026rsquo;s called stealing or piracy, as if sharing a wealth of knowledge were the moral equivalent of plundering a ship and murdering its crew. But sharing isn\u0026rsquo;t immoral - it\u0026rsquo;s a moral imperative. Only those blinded by greed would refuse to let a friend make a copy.\nLarge corporations, of course, are blinded by greed. The laws under which they operate require it - their shareholders would revolt at anything less. And the politicians they have bought off back them, passing laws giving them the exclusive power to decide who can make copies.\nThere is no justice in following unjust laws. It\u0026rsquo;s time to come into the light and, in the grand tradition of civil disobedience, declare our opposition to this private theft of public culture.\nWe need to take information, wherever it is stored, make our copies and share them with the world. We need to take stuff that\u0026rsquo;s out of copyright and add it to the archive. We need to buy secret databases and put them on the Web. We need to download scientific journals and upload them to file sharing networks. We need\nto fight for Guerilla Open Access.\nWith enough of us, around the world, we\u0026rsquo;ll not just send a strong message opposing the privatization of knowledge - we\u0026rsquo;ll make it a thing of the past.\nWill you join us?\nAaron Swartz\nJuly 2008, Eremo, Italy\n","description":"","id":29,"section":"talks","tags":[null],"title":"äº’è”ç½‘ä¹‹å­çš„æ•…äº‹","uri":"https://hugo.jiahongw.com/zh/talks/aaron-swartz-story/"},{"content":"å…³äºç”Ÿæ´»çš„ç‚¹ç‚¹æ»´æ»´\u0026hellip;\u0026hellip;\n","description":"è®°å½•ç”Ÿæ´»","id":31,"section":"gallery","tags":[null],"title":"ç”Ÿæ´»ç›¸å†Œ","uri":"https://hugo.jiahongw.com/zh/gallery/life/"},{"content":"between 70 and 240 in movies\ngood moviesï¼ğŸ¥\n","description":"è®°å½•ç”µå½±ç²¾å½©ç¬é—´","id":32,"section":"gallery","tags":[null],"title":"å½±è§†ç›¸å†Œ","uri":"https://hugo.jiahongw.com/zh/gallery/movie/"}]